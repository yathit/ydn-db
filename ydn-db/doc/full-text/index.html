
<!DOCTYPE html>
<html lang="en" class="no-js no-touch" itemscope itemtype="http://schema.org/Article">
  <head>

    
<meta charset="utf-8" />


<title>
  
    Full text search
  
</title>





<meta name="author" content="https://plus.google.com/+KyawTun-Yathit/posts" />



<meta name="description" content="Full text search module for YDN-DB" />


<link rel="icon" href="/favicon.ico" />

<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta id="viewport" name="viewport" content="width=device-width, initial-scale=1" />

<meta name="twitter:card" content="summary">
<meta property="twitter:account_id" content="@yathit" />
<meta property="twitter:site" content="@yathit" />
<meta property="twitter:description" content="Full text search module for YDN-DB" />
<meta property="twitter:creator" content="@yathit" />
<meta property="twitter:image:src" content="/ydn-db/imgs/logo.png" />


<link rel="author" href="https://plus.google.com/+KyawTun-Yathit/posts">
<link rel="publisher" href="https://plus.google.com/+KyawTun-Yathit">

<meta itemprop="name" content="
  
    Full text search
  
">
<link itemprop="image" href="/imgs/logo.png">
<meta itemprop="description" content="Full text search module for YDN-DB">

<meta property="og:site_name" content="Yathit" />
<meta property="og:title" content="
  
    Full text search
  
" />
<meta property="og:type" content="website" />
<meta property="og:url" content="/ydn-db/" />
<meta property="og:image" content="/ydn-db/imgs/logo.png" />

<link rel="chrome-webstore-item" href="https://chrome.google.com/webstore/detail/iccdnijlhdogaccaiafdpjmbakdcdakk">
<link rel="chrome-webstore-item" href="https://chrome.google.com/webstore/detail/ldikiokclnbceabnlbkabmcacpiednop">

<link rel="stylesheet" media="screen" href="/css/styles.min.css" />

<script src="/js/analytics.js"></script>

  </head>

  <body class="page-doc article--ydndb-doc theme--ydndb-doc">
    

    <header class="main-header">

	























<nav class="main-nav">

  <header class="main-nav__header">
    <span class="main-nav__current-label">Full text search</span>
  </header>

  <ul class="main-nav__list clear">
  
    
    
    <li class="main-nav__item main-nav__item--<strong>ydn-db</strong>
                main-nav__item--home 
               
               
               ">
      <a class="main-nav__link main-nav__link--parent" href="/ydn-db/index.html" title="Go to <strong>YDN-DB</strong>">

        <strong>YDN-DB</strong>

        
        <i class="main-nav__icon icon icon-chevron-right"></i>
        
      </a>

      

    </li>
    
  
    
    
    <li class="main-nav__item main-nav__item--download
               
               
                 
               
               
               ">
      <a class="main-nav__link main-nav__link--parent" href="/ydn-db/downloads.html" title="Go to Download">

        Download

        
        <i class="main-nav__icon icon icon-chevron-right"></i>
        
      </a>

      

    </li>
    
  
    
    
    <li class="main-nav__item main-nav__item--documentation
               
               
                 
               
               
               ">
      <a class="main-nav__link main-nav__link--parent" href="/ydn-db/doc/index.html" title="Go to Documentation">

        Documentation

        
        <i class="main-nav__icon icon icon-chevron-right"></i>
        
      </a>

      

    </li>
    
  
    
    
    <li class="main-nav__item main-nav__item--api
               
               
                 
               
               
               ">
      <a class="main-nav__link main-nav__link--parent" href="/ydn-db/api/ydn/db/storage.html" title="Go to API">

        API

        
        <i class="main-nav__icon icon icon-chevron-right"></i>
        
      </a>

      

    </li>
    
  
    
    
    <li class="main-nav__item main-nav__item--examples
               
               
                 
               
               
               ">
      <a class="main-nav__link main-nav__link--parent" href="//dev.yathit.com/ydn-db/doc/example/index.html" title="Go to Examples">

        Examples

        
        <i class="main-nav__icon icon icon-chevron-right"></i>
        
      </a>

      

    </li>
    
  
    
    
    <li class="main-nav__item main-nav__item--github
               
               
                 
               
               
               ">
      <a class="main-nav__link main-nav__link--parent" href="https://github.com/yathit/ydn-db" title="Go to GitHub">

        GitHub

        
        <i class="main-nav__icon icon icon-chevron-right"></i>
        
      </a>

      

    </li>
    
  

  <li class="main-nav__item right">
    <a class="main-nav__link main-nav__link--parent" id="user-login">...</a>
  </li>
  <li class="main-nav__item right">
    <span class="main-nav__link main-nav__link--parent" id="user-name" style="display: none;"></span>
  </li>

  </ul>
  <button class="main-nav__btn btn--toggle-nav">
    <i class="icon icon-menu"></i>
  </button>

</nav>


</header>


    <div class="article-container">
      <div class="editorial-header">
        <div class="container">
          <div class="content">

            <div class="ydn-breadcrumb-before"></div>
            <div id="ydn-breadcrumb" name="ydndb-doc"></div>
            <div class="ydn-breadcrumb-after"></div>

            <h1 class="editorial-header__title"></h1>
            <h2 class="editorial-header__subtitle">Full text search</h2>

            <p class="editorial-header__excerpt">YDN-DB full text search module.</p>

          </div>
        </div>
      </div>

      <div class="container-medium">
  <div class="guides" data-current-lesson="0">
    <h3><i class="icon icon-lessons"></i> Guides</h3>
    <ol class="list-guides list-links">
      
        <li title="Basic concept">
          <a href="/ydn-db/doc/full-text/basic.html">Basic concept</a>
        </li>
      
        <li title="Usage">
          <a href="/ydn-db/doc/full-text/usage.html">Usage</a>
        </li>
      
    </ol>
  </div>
</div>

      <div class="container"><div class="content ">

    <p>Full text search module for <a href="https://github.com/yathit/ydn-db">YDN-DB</a> database library. This library build on top of two excellent full text search libraries, <a href="https://github.com/NaturalNode/natural">natural</a> for stemming, normalization, analyzer and <a href="https://github.com/reyesr/fullproof">fullproof</a> for tokenization.</p>

    <h2 id="features">Features</h2>

    <ul>
      <li>Unicode-base tokenization supporting full language spectrum.</li>
      <li>Stemming and phonetic normalization for English language.</li>
      <li>Free text query base ranking with
        <ul>
          <li>index weight</li>
          <li>implicit logical (and, or)</li>
          <li>positional</li>
        </ul>
      </li>
      <li>Support exact match and prefix match.</li>
      <li>Being based on YDN-DB, IndexedDB, WebSQL or localStorage storage mechanisms
are supported.</li>
      <li>Flexible index configuration using fulltext catalog.</li>
    </ul>

    <h2 id="api-reference">API Reference</h2>

    <p>Use <code>search</code> method to query full text search.</p>

    <pre><code>db.search(catalog, query)
</code></pre>

    <p>Documents are indexed during storing into the database using add or put methods.</p>

    <p>Query format is free text, in which implicit and/or/near logic operator apply
for each token. Use double quote for exact match, - to subtract from the result
and * for prefix search.</p>

    <p><em>Parameters:</em></p>

    <ul>
      <li><code>{string} catalog</code>
 Full text search catalog name, as defined in schema.</li>
      <li><code>{string} query</code>
 Free text query string.</li>
    </ul>

    <p><em>Returns:</em></p>

    <p><code>{!ydn.db.Request}</code> Returns a request object.</p>

    <p><code>done: {Array}</code> Return list of inverted index. An inverted index has the
  following attributes: <code>storeName</code>, <code>primaryKey</code>, <code>score</code>, <code>tokens</code>, representing for
  store name of original document, primary key of original document, match
  quality score and array of token objects. Token object has the following
  attributes: <code>keyPath</code>, <code>value</code> and <code>loc</code> representing key path of index of the
  original document, original word from the original document and array list of
  position of word in the document.</p>

    <p><code>fail: {Error}</code> If any one of deleting a key fail, fail callback is invoked,
  with the resulting error in respective elements.</p>

    <p><code>progress: {Array}</code> During index retrieval, raw inverted index are dispatched.</p>

    <h2 id="example">Example</h2>

    <pre><code>var schema = {
  fullTextCatalogs: [{
    name: 'name',
    lang: 'en',
      sources: [
        {
          storeName: 'contact',
          keyPath: 'first'
        }],
    ]},
    stores: [
      {
        name: 'contact',
        autoIncrement: true
      }]
};
var db = new ydn.db.Storage('db name', schema);
db.put('contact', [{first: 'Jhon'}, {first: 'Collin'}]);
db.search('name', 'jon').done(function(x) {
  console.log(x);
  db.get(x[0].storeName, x[0].primaryKey).done(function(top) {
    console.log(top);
  })
});
</code></pre>

    <h2 id="full-text-catalog">Full text catalog</h2>
    <p>Full text catalog is a logical grouping of one or more full-text indexes. It is
defined in database initialization in database schema.</p>

    <p><em>Fields:</em></p>

    <ul>
      <li><code>{string} name</code> Full text catalog name.</li>
      <li><code>{string=} lang</code> Language. Stemming, word segmentation and phonetic normalization
 are language dependent. <code>lang</code> must be defined to index properly. Currently
 only <code>en</code> is well supported. For more languages, check out on <a href="https://github.com/yathit/natural.git">natural</a>
 project repo.</li>
      <li><code>{Array} sources</code> Full text indexes. Each index has source reference to
original document by <code>storeName</code> and <code>keyPath</code>. The value of <code>keyPath</code> is
the text to be indexed. <code>weight</code> factor is applied when ranking search result.
This value is not stored in the database can be changed after indexing as well.</li>
    </ul>

    <p>The following full text catalog index author name on <code>first</code> and <code>last</code> field
of record value with weighting more on <code>first</code>.</p>

    <pre><code>var catalog = {
  name: 'author-name',
  lang: 'en',
  sources: [{
    storeName: 'author',
    keyPath: 'first',
    weight: 1.0
  }, {
    storeName: 'author',
    keyPath: 'last',
    weight: 0.8
}]
</code></pre>

    <h2 id="native-full-text-search-on-websql">Native full-text search on WebSQL</h2>

    <p>WebSQL support full text search via <a href="http://www.sqlite.org/fts3.html">FTS3 extension</a> on Chrome and Safari. The follow example illustrate full text search usage. Use virtual table to create full text index using porter tokenizer. Here is example from <a href="http://nolanlawson.com/">Nolan Lawson</a>,</p>

    <pre><code>var db = openDatabase('fts_demo', 1, 'fts_demo', 5000000);

db.transaction(function (tx){
  function onReady() {
    var content = 'WebSQL has full-text search!';
    tx.executeSql('insert into doc values (?)', [content], function () {
      var terms = ['websql', 'text', 'search', 'searches', 'searching', 'indexeddb']
      terms.forEach(function (term) {
        tx.executeSql('select count(*) as count from doc where content match ?',
            [term], function (tx, res) {
          var count = res.rows.item(0).count;
          console.log(term, !!count);
        });
      });
    });
  }
  tx.executeSql('create virtual table doc using fts3(content text, tokenize=porter);', [], onReady, onReady);
});
</code></pre>

    <h2 id="demo-applications">Demo applications</h2>

    <ul>
      <li><a href="http://yathit.github.io/ydndb-demo/ydn-db-text/animals/animals.html">Animal database search</a>
Basic indexing operation, featuring text suggestion input.</li>
      <li><a href="http://yathit.github.io/ydndb-demo/ydn-db-text/pubmed-search/index.html">Biomedical Medical Journal Abstract Search</a>
Ajax data load, free text search ranking and presenting result with matching words highlighted.</li>
      <li><a href="/ydn-db/index/demos.html">All demos</a></li>
    </ul>

    <h2 id="dependency">Dependency</h2>

    <ol>
      <li>Closure library: http://closure-library.googlecode.com/svn/trunk/</li>
      <li>YDN-BASE: https://github.com/yathit/ydn-base.git</li>
      <li>YDN-DB: https://github.com/yathit/ydn-db.git</li>
      <li>fullproof: https://github.com/yathit/fullproof.git</li>
      <li>natural: https://github.com/yathit/natural.git</li>
    </ol>

    <h2 id="build-process">Build process</h2>

    <p>See detail build procedure in <a href="https://github.com/yathit/ydn-db">YDN-DB</a>.</p>

    <p>Collect all dependency using <code>git</code> or <code>svn</code>. Generate closure dependency using
<code>ant deps</code>. Then you should able to run HTML test files in the source code folders.
You should able to run example using raw js files.
Use <code>ant build</code> for minification.</p>

  </div></div>


      <div class="container clear-both">
        <div class="content">

          <div class="container-medium">
  <nav class="article-nav">
  
    <a class="article-nav-link article-nav-link--prev" title="Previous article" href="/ydn-db/doc/usage/index.html">
      Previous 'Using YDN-DB'
    </a>
  
  
    <a class="article-nav-link article-nav-link--next" title="Next article" href="/ydn-db/doc/sync/index.html" style="float: right;">
      Next 'Synchronization'
    </a>
  
  </nav>
</div>


          <br /><div class="g-comments" data-href=""></div>
        </div>
      </div>

      


      







    </div> <!-- /.article-container -->

    <div class="container clear">
	<div id="gc-content-license" class="gc-content-license g-wide--3 g-wide--last" >
		
		<div class="container clear">
	<div class="g-wide--3 g-wide--last">
    
		<h4>Authors</h4>
		
		
    <a href="/resources/contributors/index.html#kyawtun">
      Kyaw Tun</a>
		
    
	</div>
</div>

	</div>
</div>

    <footer class="main-footer">
  <div class="main-footer__container container clear">
    <div class="main-footer__list-group">
      <ul class="main-footer__list main-footer__list--primary">
      

        

        
        <li class="sitemap__item sitemap__item--<strong>ydn-db</strong>  sitemap__item--home  ">
          <a class="sitemap-list__link sitemap-list__link--parent" href="/ydn-db/index.html" title="Go to <strong>YDN-DB</strong>">
            <strong>YDN-DB</strong>
          </a>
        </li>
        
      

        

        
        <li class="sitemap__item sitemap__item--download  ">
          <a class="sitemap-list__link sitemap-list__link--parent" href="/ydn-db/downloads.html" title="Go to Download">
            Download
          </a>
        </li>
        
      

        

        
        <li class="sitemap__item sitemap__item--documentation  ">
          <a class="sitemap-list__link sitemap-list__link--parent" href="/ydn-db/doc/index.html" title="Go to Documentation">
            Documentation
          </a>
        </li>
        
      

        

        
        <li class="sitemap__item sitemap__item--api  ">
          <a class="sitemap-list__link sitemap-list__link--parent" href="/ydn-db/api/ydn/db/storage.html" title="Go to API">
            API
          </a>
        </li>
        
      

        

        
        <li class="sitemap__item sitemap__item--examples  ">
          <a class="sitemap-list__link sitemap-list__link--parent" href="//dev.yathit.com/ydn-db/doc/example/index.html" title="Go to Examples">
            Examples
          </a>
        </li>
        
      

        

        
        <li class="sitemap__item sitemap__item--github  ">
          <a class="sitemap-list__link sitemap-list__link--parent" href="https://github.com/yathit/ydn-db" title="Go to GitHub">
            GitHub
          </a>
        </li>
        
      
      </ul>

      <div class="main-footer__google-section">
        <h3 class="main-footer__title"><a href="/ydn-db/">
          <img id="developers-logo-footer" src="/imgs/yathit-dev-network.svg" alt="Yathit Developer Network logo">
        </a></h3>
        <ul class="main-footer__list main-footer__list--secondary google-list">
          <li><a href="https://www.yathit.com/">Yathit</a></li>
          <li><a href="https://www.yathit.com/terms.html">Terms of Service</a></li>
          <li><a href="https://www.yathit.com/privacy.html">Privacy Policy</a></li>
        </ul>
      </div>
    </div>
  </div>
</footer>

    <script src="/jsc/prettify.js"></script>

    <script src="/jsc/ydn.db-dev.js"></script>
    
<script src="/js/script.js"></script>
<script src="/jsc/website-app.js"></script>
<script src="https://apis.google.com/js/client.js?onload=handleClientLoad"></script>





  </body>
</html>

