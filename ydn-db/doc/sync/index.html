
<!DOCTYPE html>
<html lang="en" class="no-js no-touch" itemscope itemtype="http://schema.org/Article">
  <head>

    
<meta charset="utf-8" />


<title>
  
    Synchronization
  
</title>





<meta name="author" content="https://plus.google.com/+KyawTun-Yathit/posts" />



<meta name="description" content="Synchronization with backend server" />


<link rel="icon" href="/favicon.ico" />

<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta id="viewport" name="viewport" content="width=device-width, initial-scale=1" />

<meta name="twitter:card" content="summary">
<meta property="twitter:account_id" content="@yathit" />
<meta property="twitter:site" content="@yathit" />
<meta property="twitter:description" content="" />
<meta property="twitter:creator" content="@yathit" />
<meta property="twitter:image:src" content="http://dev.yathit.com/imgs/logo.png" />


<link rel="author" href="https://plus.google.com/+KyawTun-Yathit/posts">
<link rel="publisher" href="https://plus.google.com/+KyawTun-Yathit">

<meta itemprop="name" content="
  
    Synchronization
  
">
<link itemprop="image" href="/imgs/logo.png">
<meta itemprop="description" content="Synchronization with backend server">

<meta property="og:site_name" content="Yathit" />
<meta property="og:title" content="
  
    Synchronization
  
" />
<meta property="og:type" content="website" />
<meta property="og:url" content="http://dev.yathit.com/" />
<meta property="og:image" content="http://dev.yathit.com/imgs/logo.png" />

<link rel="chrome-webstore-item" href="https://chrome.google.com/webstore/detail/iccdnijlhdogaccaiafdpjmbakdcdakk">
<link rel="chrome-webstore-item" href="https://chrome.google.com/webstore/detail/ldikiokclnbceabnlbkabmcacpiednop">

<link rel="stylesheet" media="screen" href="/css/styles.min.css" />

<script src="/js/analytics.js"></script>

  </head>

  <body class="page-doc article--ydndb-doc theme--ydndb-doc">
    

    <header class="main-header">

	























<nav class="main-nav">

  <header class="main-nav__header">
    <span class="main-nav__current-label">Synchronization</span>
  </header>

  <ul class="main-nav__list clear">
  
    
    
    <li class="main-nav__item main-nav__item--<strong>ydn-db</strong>
                main-nav__item--home 
               
               
               ">
      <a class="main-nav__link main-nav__link--parent" href="/ydn-db/index.html" title="Go to <strong>YDN-DB</strong>">

        <strong>YDN-DB</strong>

        
        <i class="main-nav__icon icon icon-chevron-right"></i>
        
      </a>

      

    </li>
    
  
    
    
    <li class="main-nav__item main-nav__item--download
               
               
                 
               
               
               ">
      <a class="main-nav__link main-nav__link--parent" href="/ydn-db/downloads.html" title="Go to Download">

        Download

        
        <i class="main-nav__icon icon icon-chevron-right"></i>
        
      </a>

      

    </li>
    
  
    
    
    <li class="main-nav__item main-nav__item--documentation
               
               
                 
               
               
               ">
      <a class="main-nav__link main-nav__link--parent" href="/ydn-db/doc/index.html" title="Go to Documentation">

        Documentation

        
        <i class="main-nav__icon icon icon-chevron-right"></i>
        
      </a>

      

    </li>
    
  
    
    
    <li class="main-nav__item main-nav__item--api
               
               
                 
               
               
               ">
      <a class="main-nav__link main-nav__link--parent" href="/api/ydn/db/storage.html" title="Go to API">

        API

        
        <i class="main-nav__icon icon icon-chevron-right"></i>
        
      </a>

      

    </li>
    
  
    
    
    <li class="main-nav__item main-nav__item--examples
               
               
                 
               
               
               ">
      <a class="main-nav__link main-nav__link--parent" href="//dev.yathit.com/ydn-db/doc/example/index.html" title="Go to Examples">

        Examples

        
        <i class="main-nav__icon icon icon-chevron-right"></i>
        
      </a>

      

    </li>
    
  
    
    
    <li class="main-nav__item main-nav__item--github
               
               
                 
               
               
               ">
      <a class="main-nav__link main-nav__link--parent" href="https://github.com/yathit/ydn-db" title="Go to GitHub">

        GitHub

        
        <i class="main-nav__icon icon icon-chevron-right"></i>
        
      </a>

      

    </li>
    
  

  <li class="main-nav__item right">
    <a class="main-nav__link main-nav__link--parent" id="user-login">...</a>
  </li>
  <li class="main-nav__item right">
    <span class="main-nav__link main-nav__link--parent" id="user-name" style="display: none;"></span>
  </li>

  </ul>
  <button class="main-nav__btn btn--toggle-nav">
    <i class="icon icon-menu"></i>
  </button>

</nav>


</header>


    <div class="article-container">
      <div class="editorial-header">
        <div class="container">
          <div class="content">

            <div class="ydn-breadcrumb-before"></div>
            <div id="ydn-breadcrumb" name="ydndb-doc"></div>
            <div class="ydn-breadcrumb-after"></div>

            <h1 class="editorial-header__title"></h1>
            <h2 class="editorial-header__subtitle">Synchronization</h2>

            <p class="editorial-header__excerpt">Synchronization with backend server</p>

          </div>
        </div>
      </div>

      <div class="container-medium">
  <div class="guides" data-current-lesson="0">
    <h3><i class="icon icon-lessons"></i> Guides</h3>
    <ol class="list-guides list-links">
      
        <li title="Synchronizing with a web service">
          <a href="/ydn-db/doc/sync/entity.html">Synchronizing with a web service</a>
        </li>
      
        <li title="Synchronizing with AWS S3 like backend">
          <a href="/ydn-db/doc/sync/build-in.html">Synchronizing with AWS S3 like backend</a>
        </li>
      
        <li title="Synchronizing with a RESTful service">
          <a href="/ydn-db/doc/sync/rest.html">Synchronizing with a RESTful service</a>
        </li>
      
    </ol>
  </div>
</div>

      <div class="container"><div class="content ">

    <p>Data stored in client side storage mechanism is <a href="https://developers.google.com/chrome/whitepapers/storage">ephemeral</a>, although it may be possible to specified as persistent storage in the future through <a href="http://www.w3.org/TR/quota-api/">quota management API</a>. User agents are allowed to wipe out data anytime if deem necessary such as in case of low disk space or exceeding quota limit. For example mobile Safari browser will arbitrarily limit storage size to 50MB. Browser will not inform data lost to user or script. Critical data must be send back to the server.</p>

    <p>Synchronization logic can be implemented by pre-database or in-database process.</p>

    <p>In pre-database synchronization technique, database is used as secondary storage or caching. This technique required no additional functionality from database library. StoreEvent and RecordEvent dispatch from the storage instance may useful in this scenario.</p>

    <p>In-database synchronization are handled by the library. Library usage is similar to non-synchornization usage. But, additional configuration and handler HTTP request are to be implemented. Before discussing synchronization process, we need to understand how the library handle cache invalidation and conflict resolution. These processes require metadata for each resource (record in this library, model in MVC architecture).</p>

    <h3 id="metadata">Metadata</h3>

    <p>Metadata are specified in HTTP respond headers. For performance reason, several standardized URL format exist to retrieved only metadata for a specific resource or a list of resources (also know as collection resource). Metadata are store in client database along with the record value or in separate medata data store. Upon retrieval, these metadata are stripped from record value, but it may set to keep in record value as well through configuration. </p>

    <p>HTTP header name are case insensitive. This library always use lower case header name as metadata attribute name.</p>

    <p>It should be noted that, for cross domain request, header name must be exposed setting <a href="https://developer.mozilla.org/en-US/docs/HTTP/Access_control_CORS">Access-Control-Expose-Headers</a> in origin server.</p>

    <p><a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec3.html#sec3.11"><em>etag</em></a>: Entity tag is used for cache invalidation and conditional retrieval and update.</p>

    <p><a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.29"><em>last-modified</em></a>: Last modified time value is used for conflict resolution. In case of conflicting update in both client and server, an algorithm may automatically set last modified entity as winner. Additionally, if etag is not exposed, last modified time value is used for conditional retrieval and update. It should be note however that last modified time value is only accurate to second.</p>

    <p><a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.21"><em>expires</em></a>: The Expires entity-header field gives the time after which the response is considered stale. If Expires header field is not expose, it is calculated from Cache-Controlâ€™s <a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.9.3">max-age</a> value, if it presents.</p>

    <p><em>date</em>: Date refer to as current time value, which is not read from HTTP header, but set by using <code>Date.now()</code> at the time of storing metadata. Date value may be used to invalidate cache.</p>

    <p><em>key</em>: Resource key is URI path. Generally this is same as record key, but may have namespace prefix.</p>

    <h3 id="cache-invalidation">Cache invalidation</h3>

    <p>Any database CRUD operation requires to invalidate the resource to origin server for freshness. There are two levels of invalidation for a read operation, opportunistic cache invalidation and conditional retrieval. Opportunistic cache invalidation use expires medata value for freshness. If resource entity is not expired, GET request is noted send to origin server for reading the entity. Immutable store also never send GET request if a record exist in the client database. Otherwise a conditional GET request is send either with <code>If-None-Match</code> etag or <code>If-Unmodified-Since</code> last-updated precondition. For write operation, <code>If-Match</code> etag or <code>If-None-Match</code> last-updated precondition is used.  </p>

    <h3 id="conflict-resolution">Conflict resolution</h3>

    <p>All database write operation send the request with either with <code>ETag</code> or <code>Last-Updated</code> pre-condition. In case of failing precondition, the deferred object invoke fail callback with <code>ConflictEvent</code>, which encapsulate both client and server record value including metadata. If the Event object is not resolved in the fail callback, the event is resolve by default algorithm.           </p>

  </div></div>


      <div class="container clear-both">
        <div class="content">

          <div class="container-medium">
  <nav class="article-nav">
  
    <a class="article-nav-link article-nav-link--prev" title="Previous article" href="/ydn-db/doc/full-text/index.html">
      Previous 'Full text search'
    </a>
  
  
    <a class="article-nav-link article-nav-link--next" title="Next article" href="/ydn-db/doc/example/index.html" style="float: right;">
      Next 'Examples'
    </a>
  
  </nav>
</div>


          <br /><div class="g-comments" data-href=""></div>
        </div>
      </div>

      


      







    </div> <!-- /.article-container -->

    <div class="container clear">
	<div id="gc-content-license" class="gc-content-license g-wide--3 g-wide--last" >
		
		<div class="container clear">
	<div class="g-wide--3 g-wide--last">
    
		<h4>Authors</h4>
		
		
    <a href="/resources/contributors/index.html#kyawtun">
      Kyaw Tun</a>
		
    
	</div>
</div>

	</div>
</div>

    <footer class="main-footer">
  <div class="main-footer__container container clear">
    <div class="main-footer__list-group">
      <ul class="main-footer__list main-footer__list--primary">
      

        

        
        <li class="sitemap__item sitemap__item--<strong>ydn-db</strong>  sitemap__item--home  ">
          <a class="sitemap-list__link sitemap-list__link--parent" href="/ydn-db/index.html" title="Go to <strong>YDN-DB</strong>">
            <strong>YDN-DB</strong>
          </a>
        </li>
        
      

        

        
        <li class="sitemap__item sitemap__item--download  ">
          <a class="sitemap-list__link sitemap-list__link--parent" href="/ydn-db/downloads.html" title="Go to Download">
            Download
          </a>
        </li>
        
      

        

        
        <li class="sitemap__item sitemap__item--documentation  ">
          <a class="sitemap-list__link sitemap-list__link--parent" href="/ydn-db/doc/index.html" title="Go to Documentation">
            Documentation
          </a>
        </li>
        
      

        

        
        <li class="sitemap__item sitemap__item--api  ">
          <a class="sitemap-list__link sitemap-list__link--parent" href="/api/ydn/db/storage.html" title="Go to API">
            API
          </a>
        </li>
        
      

        

        
        <li class="sitemap__item sitemap__item--examples  ">
          <a class="sitemap-list__link sitemap-list__link--parent" href="//dev.yathit.com/ydn-db/doc/example/index.html" title="Go to Examples">
            Examples
          </a>
        </li>
        
      

        

        
        <li class="sitemap__item sitemap__item--github  ">
          <a class="sitemap-list__link sitemap-list__link--parent" href="https://github.com/yathit/ydn-db" title="Go to GitHub">
            GitHub
          </a>
        </li>
        
      
      </ul>

      <div class="main-footer__google-section">
        <h3 class="main-footer__title"><a href="http://dev.yathit.com/">
          <img id="developers-logo-footer" src="/imgs/yathit-dev-network.svg" alt="Yathit Developer Network logo">
        </a></h3>
        <ul class="main-footer__list main-footer__list--secondary google-list">
          <li><a href="https://www.yathit.com/">Yathit</a></li>
          <li><a href="https://www.yathit.com/terms.html">Terms of Service</a></li>
          <li><a href="https://www.yathit.com/privacy.html">Privacy Policy</a></li>
        </ul>
      </div>
    </div>
  </div>
</footer>

    <script src="/jsc/prettify.js"></script>

    <script src="/jsc/ydn.db-dev.js"></script>
    
<script src="/js/script.js"></script>
<script src="/jsc/website-app.js"></script>
<script src="https://apis.google.com/js/client.js?onload=handleClientLoad"></script>





  </body>
</html>

