(function(){function aa(){return function(){}}function l(a){return function(){return this[a]}}function ba(a){return function(){return a}}var q,r=this;function ca(a){a=a.split(".");for(var b=r,c;c=a.shift();)if(null!=b[c])b=b[c];else return null;return b}
function da(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function u(a){return void 0!==a}function v(a){return"array"==da(a)}function w(a){var b=da(a);return"array"==b||"object"==b&&"number"==typeof a.length}function x(a){return"string"==typeof a}function ea(a){return"boolean"==typeof a}function y(a){return"number"==typeof a}function fa(a){return"function"==da(a)}function z(a){var b=typeof a;return"object"==b&&null!=a||"function"==b}function ga(a){return a[ha]||(a[ha]=++ia)}
var ha="closure_uid_"+(1E9*Math.random()>>>0),ia=0;function ja(a,b,c){return a.call.apply(a.bind,arguments)}function ka(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}
function la(a,b,c){la=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ja:ka;return la.apply(null,arguments)}function ma(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=Array.prototype.slice.call(arguments);b.unshift.apply(b,c);return a.apply(this,b)}}var na=Date.now||function(){return+new Date};
function A(a,b){var c=a.split("."),d=r;c[0]in d||!d.execScript||d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)c.length||void 0===b?d=d[e]?d[e]:d[e]={}:d[e]=b}function D(a,b){function c(){}c.prototype=b.prototype;a.u=b.prototype;a.prototype=new c};function oa(a){Error.captureStackTrace?Error.captureStackTrace(this,oa):this.stack=Error().stack||"";a&&(this.message=String(a))}D(oa,Error);oa.prototype.name="CustomError";function pa(a,b){for(var c=1;c<arguments.length;c++){var d=String(arguments[c]).replace(/\$/g,"$$$$");a=a.replace(/\%s/,d)}return a}function ra(a){return/^[\s\xa0]*$/.test(a)}function sa(a,b){return a.replace(/(\r\n|\r|\n)/g,b?"<br />":"<br>")}function ta(a){if(!ua.test(a))return a;-1!=a.indexOf("&")&&(a=a.replace(wa,"&amp;"));-1!=a.indexOf("<")&&(a=a.replace(xa,"&lt;"));-1!=a.indexOf(">")&&(a=a.replace(ya,"&gt;"));-1!=a.indexOf('"')&&(a=a.replace(za,"&quot;"));return a}
var wa=/&/g,xa=/</g,ya=/>/g,za=/\"/g,ua=/[&<>\"]/;function Aa(a){return sa(a.replace(/  /g," &#160;"),void 0)}function Ba(a,b){for(var c=b.length,d=0;d<c;d++){var e=1==c?b:b.charAt(d);if(a.charAt(0)==e&&a.charAt(a.length-1)==e)return a.substring(1,a.length-1)}return a}var Ca={"\x00":"\\0","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\x0B":"\\x0B",'"':'\\"',"\\":"\\\\"},Da={"'":"\\'"};
function Ea(a){a=String(a);if(a.quote)return a.quote();for(var b=['"'],c=0;c<a.length;c++){var d=a.charAt(c),e=d.charCodeAt(0),f=b,g=c+1,h;if(!(h=Ca[d])){if(!(31<e&&127>e))if(d in Da)d=Da[d];else if(d in Ca)d=Da[d]=Ca[d];else{e=d;h=d.charCodeAt(0);if(31<h&&127>h)e=d;else{if(256>h){if(e="\\x",16>h||256<h)e+="0"}else e="\\u",4096>h&&(e+="0");e+=h.toString(16).toUpperCase()}d=Da[d]=e}h=d}f[g]=h}b.push('"');return b.join("")};function Fa(a,b){b.unshift(a);oa.call(this,pa.apply(null,b));b.shift()}D(Fa,oa);Fa.prototype.name="AssertionError";function Ga(a,b){throw new Fa("Failure"+(a?": "+a:""),Array.prototype.slice.call(arguments,1));};var Ha=Array.prototype,Ia=Ha.indexOf?function(a,b,c){return Ha.indexOf.call(a,b,c)}:function(a,b,c){c=null==c?0:0>c?Math.max(0,a.length+c):c;if(x(a))return x(b)&&1==b.length?a.indexOf(b,c):-1;for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},Ja=Ha.forEach?function(a,b,c){Ha.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=x(a)?a.split(""):a,f=0;f<d;f++)f in e&&b.call(c,e[f],f,a)},Ka=Ha.map?function(a,b,c){return Ha.map.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=Array(d),f=
x(a)?a.split(""):a,g=0;g<d;g++)g in f&&(e[g]=b.call(c,f[g],g,a));return e},Na=Ha.some?function(a,b,c){return Ha.some.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=x(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&b.call(c,e[f],f,a))return!0;return!1};function Oa(a,b){var c=Pa(a,b,void 0);return 0>c?null:x(a)?a.charAt(c):a[c]}function Pa(a,b,c){for(var d=a.length,e=x(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&b.call(c,e[f],f,a))return f;return-1}
function Qa(a){if(!v(a))for(var b=a.length-1;0<=b;b--)delete a[b];a.length=0}function Ra(a,b){var c=Ia(a,b),d;(d=0<=c)&&Ha.splice.call(a,c,1);return d}function Sa(a){var b=a.length;if(0<b){for(var c=Array(b),d=0;d<b;d++)c[d]=a[d];return c}return[]}function Ta(a,b,c){return 2>=arguments.length?Ha.slice.call(a,b):Ha.slice.call(a,b,c)}function Ua(a,b){if(!w(a)||!w(b)||a.length!=b.length)return!1;for(var c=a.length,d=Va,e=0;e<c;e++)if(!d(a[e],b[e]))return!1;return!0}function Va(a,b){return a===b};function Wa(a,b){for(var c in a)b.call(void 0,a[c],c,a)}function Xa(a,b){for(var c=w(b),d=c?b:arguments,c=c?0:1;c<d.length&&(a=a[d[c]],u(a));c++);return a}var Ya="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Za(a,b){for(var c,d,e=1;e<arguments.length;e++){d=arguments[e];for(c in d)a[c]=d[c];for(var f=0;f<Ya.length;f++)c=Ya[f],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}};var $a="StopIteration"in r?r.StopIteration:Error("StopIteration");function ab(){}ab.prototype.a=function(){throw $a;};ab.prototype.xa=function(){return this};function bb(a){if(a instanceof ab)return a;if("function"==typeof a.xa)return a.xa(!1);if(w(a)){var b=0,c=new ab;c.a=function(){for(;;){if(b>=a.length)throw $a;if(b in a)return a[b++];b++}};return c}throw Error("Not implemented");}
function cb(a,b,c){if(w(a))try{Ja(a,b,c)}catch(d){if(d!==$a)throw d;}else{a=bb(a);try{for(;;)b.call(c,a.a(),void 0,a)}catch(e){if(e!==$a)throw e;}}}function db(a){if(w(a))return Sa(a);a=bb(a);var b=[];cb(a,function(a){b.push(a)});return b};function eb(a,b){this.b={};this.a=[];var c=arguments.length;if(1<c){if(c%2)throw Error("Uneven number of arguments");for(var d=0;d<c;d+=2)fb(this,arguments[d],arguments[d+1])}else if(a){var e;if(a instanceof eb)e=a.oa(),d=a.qb();else{var c=[],f=0;for(e in a)c[f++]=e;e=c;c=[];f=0;for(d in a)c[f++]=a[d];d=c}for(c=0;c<e.length;c++)fb(this,e[c],d[c])}}q=eb.prototype;q.s=0;q.rb=0;q.Qa=l("s");q.qb=function(){gb(this);for(var a=[],b=0;b<this.a.length;b++)a.push(this.b[this.a[b]]);return a};
q.oa=function(){gb(this);return this.a.concat()};q.clear=function(){this.b={};this.rb=this.s=this.a.length=0};function gb(a){if(a.s!=a.a.length){for(var b=0,c=0;b<a.a.length;){var d=a.a[b];Object.prototype.hasOwnProperty.call(a.b,d)&&(a.a[c++]=d);b++}a.a.length=c}if(a.s!=a.a.length){for(var e={},c=b=0;b<a.a.length;)d=a.a[b],Object.prototype.hasOwnProperty.call(e,d)||(a.a[c++]=d,e[d]=1),b++;a.a.length=c}}
function fb(a,b,c){Object.prototype.hasOwnProperty.call(a.b,b)||(a.s++,a.a.push(b),a.rb++);a.b[b]=c}q.Oa=function(){return new eb(this)};q.xa=function(a){gb(this);var b=0,c=this.a,d=this.b,e=this.rb,f=this,g=new ab;g.a=function(){for(;;){if(e!=f.rb)throw Error("The map has changed since the iterator was created");if(b>=c.length)throw $a;var g=c[b++];return a?g:d[g]}};return g};var hb,ib,jb,kb;function lb(){return r.navigator?r.navigator.userAgent:null}kb=jb=ib=hb=!1;var mb;if(mb=lb()){var nb=r.navigator;hb=0==mb.indexOf("Opera");ib=!hb&&-1!=mb.indexOf("MSIE");jb=!hb&&-1!=mb.indexOf("WebKit");kb=!hb&&!jb&&"Gecko"==nb.product}var ob=hb,pb=ib,rb=kb,sb=jb;function tb(){var a=r.document;return a?a.documentMode:void 0}var ub;
a:{var vb="",wb;if(ob&&r.opera)var xb=r.opera.version,vb="function"==typeof xb?xb():xb;else if(rb?wb=/rv\:([^\);]+)(\)|;)/:pb?wb=/MSIE\s+([^\);]+)(\)|;)/:sb&&(wb=/WebKit\/(\S+)/),wb)var yb=wb.exec(lb()),vb=yb?yb[1]:"";if(pb){var zb=tb();if(zb>parseFloat(vb)){ub=String(zb);break a}}ub=vb}var Ab={};
function Bb(a){var b;if(!(b=Ab[a])){b=0;for(var c=String(ub).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),d=String(a).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),e=Math.max(c.length,d.length),f=0;0==b&&f<e;f++){var g=c[f]||"",h=d[f]||"",k=/(\d*)(\D*)/g,n=/(\d*)(\D*)/g;do{var m=k.exec(g)||["","",""],p=n.exec(h)||["","",""];if(0==m[0].length&&0==p[0].length)break;b=((0==m[1].length?0:parseInt(m[1],10))<(0==p[1].length?0:parseInt(p[1],10))?-1:(0==m[1].length?0:parseInt(m[1],10))>(0==p[1].length?
0:parseInt(p[1],10))?1:0)||((0==m[2].length)<(0==p[2].length)?-1:(0==m[2].length)>(0==p[2].length)?1:0)||(m[2]<p[2]?-1:m[2]>p[2]?1:0)}while(0==b)}b=Ab[a]=0<=b}return b}var Cb=r.document,Db=Cb&&pb?tb()||("CSS1Compat"==Cb.compatMode?parseInt(ub,10):5):void 0;function Eb(a){return Fb(a||arguments.callee.caller,[])}
function Fb(a,b){var c=[];if(0<=Ia(b,a))c.push("[...circular reference...]");else if(a&&50>b.length){c.push(Hb(a)+"(");for(var d=a.arguments,e=0;e<d.length;e++){0<e&&c.push(", ");var f;f=d[e];switch(typeof f){case "object":f=f?"object":"null";break;case "string":break;case "number":f=String(f);break;case "boolean":f=f?"true":"false";break;case "function":f=(f=Hb(f))?f:"[fn]";break;default:f=typeof f}40<f.length&&(f=f.substr(0,40)+"...");c.push(f)}b.push(a);c.push(")\n");try{c.push(Fb(a.caller,b))}catch(g){c.push("[exception trying to get caller]\n")}}else a?
c.push("[...long stack...]"):c.push("[end]");return c.join("")}function Hb(a){if(Jb[a])return Jb[a];a=String(a);if(!Jb[a]){var b=/function ([^\(]+)/.exec(a);Jb[a]=b?b[1]:"[Anonymous]"}return Jb[a]}var Jb={};function Kb(a,b,c,d,e){"number"==typeof e||Lb++;this.g=d||na();this.e=a;this.d=b;this.c=c;delete this.b;delete this.a}Kb.prototype.b=null;Kb.prototype.a=null;var Lb=0;function Mb(a){this.e=a}Mb.prototype.c=null;Mb.prototype.b=null;Mb.prototype.d=null;Mb.prototype.a=null;function Nb(a,b){this.name=a;this.value=b}Nb.prototype.toString=l("name");var Ob=new Nb("SHOUT",1200),Pb=new Nb("SEVERE",1E3),Qb=new Nb("WARNING",900),Rb=new Nb("INFO",800),Sb=new Nb("CONFIG",700),Tb=new Nb("FINE",500),Ub=new Nb("FINER",400),Vb=new Nb("FINEST",300),Wb=[new Nb("OFF",Infinity),Ob,Pb,Qb,Rb,Sb,Tb,Ub,Vb,new Nb("ALL",0)],Xb=null;Mb.prototype.getName=l("e");
function Yb(a){if(a.b)return a.b;if(a.c)return Yb(a.c);Ga("Root logger has no level set.");return null}Mb.prototype.log=function(a,b,c){if(a.value>=Yb(this).value)for(a=this.g(a,b,c),b="log:"+a.d,r.console&&(r.console.timeStamp?r.console.timeStamp(b):r.console.markTimeline&&r.console.markTimeline(b)),r.msWriteProfilerMark&&r.msWriteProfilerMark(b),b=this;b;){c=b;var d=a;if(c.a)for(var e=0,f=void 0;f=c.a[e];e++)f(d);b=b.c}};
Mb.prototype.g=function(a,b,c){var d=new Kb(a,String(b),this.e);if(c){d.b=c;var e;var f=arguments.callee.caller;try{var g;var h=ca("window.location.href");if(x(c))g={message:c,name:"Unknown error",lineNumber:"Not available",fileName:h,stack:"Not available"};else{var k,n,m=!1;try{k=c.lineNumber||c.ud||"Not available"}catch(p){k="Not available",m=!0}try{n=c.fileName||c.filename||c.sourceURL||r.$googDebugFname||h}catch(t){n="Not available",m=!0}g=!m&&c.lineNumber&&c.fileName&&c.stack?c:{message:c.message,
name:c.name,lineNumber:k,fileName:n,stack:c.stack||"Not available"}}e="Message: "+ta(g.message)+'\nUrl: <a href="view-source:'+g.fileName+'" target="_new">'+g.fileName+"</a>\nLine: "+g.lineNumber+"\n\nBrowser stack:\n"+ta(g.stack+"-> ")+"[end]\n\nJS stack traversal:\n"+ta(Eb(f)+"-> ")}catch(s){e="Exception trying to expose exception! You win, we lose. "+s}d.a=e}return d};function Zb(a,b){a.log(Pb,b,void 0)}function E(a,b){a.log(Qb,b,void 0)}function $b(a,b){a.log(Tb,b,void 0)}
function F(a,b){a.log(Ub,b,void 0)}function G(a,b){a.log(Vb,b,void 0)}var ac={},bc=null;function cc(){bc||(bc=new Mb(""),ac[""]=bc,bc.b=Sb)}function dc(){cc();return bc}function H(a){cc();var b;if(!(b=ac[a])){b=new Mb(a);var c=a.lastIndexOf("."),d=a.substr(c+1),c=H(a.substr(0,c));c.d||(c.d={});c.d[d]=b;b.c=c;ac[a]=b}return b};function ec(a){return function(){throw a;}};/*
 Portions of this code are from MochiKit, received by
 The Closure Authors under the MIT license. All other code is Copyright
 2005-2009 The Closure Authors. All Rights Reserved.
*/
function I(a,b){this.c=[];this.R=b||null}q=I.prototype;q.Pa=!1;q.Ra=!1;q.Nb=!1;q.Mc=!1;q.yc=!1;q.Nc=0;q.mc=function(a,b){this.Nb=!1;fc(this,a,b)};function fc(a,b,c){a.Pa=!0;a.e=c;a.Ra=!b;gc(a)}function hc(a){if(a.Pa){if(!a.yc)throw new ic;a.yc=!1}}q.v=function(a){hc(this);fc(this,!0,a)};q.t=function(a){hc(this);fc(this,!1,a)};q.da=function(a,b){return this.ea(a,null,b)};q.kc=function(a,b){return this.ea(null,a,b)};q.Lc=function(a,b){return this.ea(a,a,b)};
q.ea=function(a,b,c){this.c.push([a,b,c]);this.Pa&&gc(this);return this};function jc(a){return Na(a.c,function(a){return fa(a[1])})}
function gc(a){a.g&&(a.Pa&&jc(a))&&(r.clearTimeout(a.g),delete a.g);a.h&&(a.h.Nc--,delete a.h);for(var b=a.e,c=!1,d=!1;a.c.length&&!a.Nb;){var e=a.c.shift(),f=e[0],g=e[1],e=e[2];if(f=a.Ra?g:f)try{var h=f.call(e||a.R,b);u(h)&&(a.Ra=a.Ra&&(h==b||h instanceof Error),a.e=b=h);b instanceof I&&(d=!0,a.Nb=!0)}catch(k){b=k,a.Ra=!0,jc(a)||(c=!0)}}a.e=b;d&&(b.ea(la(a.mc,a,!0),la(a.mc,a,!1)),b.Mc=!0);c&&(a.g=r.setTimeout(ec(b),0))}
function kc(a){Error.captureStackTrace?Error.captureStackTrace(this,kc):this.stack=Error().stack||"";a&&(this.message=String(a))}D(kc,Error);function ic(){kc.call(this)}D(ic,kc);ic.prototype.message="Deferred has already fired";ic.prototype.name="AlreadyCalledError";var lc={READ_ONLY:"readonly",READ_WRITE:"readwrite",VERSION_CHANGE:"versionchange"},mc=r.IDBRequest&&"LOADING"in r.IDBRequest?r.IDBTransaction:r.webkitIDBRequest&&"LOADING"in r.webkitIDBRequest&&1===r.webkitIDBTransaction.READ_WRITE?r.webkitIDBTransaction:lc,J=mc.READ_ONLY,K=mc.READ_WRITE,nc=mc.VERSION_CHANGE;function oc(a,b){return a?b?"prevunique":"prev":b?"nextunique":"next"};function pc(a,b){var c,d;2==arguments.length&&x(arguments[1])?(c=!0,d=arguments[1].split(".")):d=(c=w(b))?b:arguments;for(c=c?0:1;c<d.length&&(a=a[d[c]],u(a));c++);return a}var qc={};
function rc(a){var b=[a];a=new sc;for(var c=0,d,e;void 0!==(e=b.pop());){0===c%4&&12<c+4&&(a.write(c),c=0);d=typeof e;if(e instanceof Array)if(c+=4,0<e.length){b.push(qc);for(d=e.length;d--;)b.push(e[d]);continue}else a.write(c);else if("number"===d)c+=1,a.write(c),tc(a,e);else if(e instanceof Date)c+=2,a.write(c),tc(a,e.valueOf());else if("string"===d){c+=3;a.write(c);c=a;for(d=0;d<e.length;d++){var f=e.charCodeAt(d);126>=f?c.write(f+1):16510>=f?(f-=127,c.write(128|f>>8,f&255)):c.write(192|f>>10,
f>>2|255,(f|3)<<6)}c.write(0)}else if(e===qc)a.write(0);else return"";c=0}for(b=a.a.length;"00"===a.a[--b];);a.a.length=++b;return a.toString()}function uc(a){for(var b=[],c=b,d=[],e,f,g=new vc(a);null!=wc(g);)if(0===g.a)c=d.pop();else{if(null===g.a)break;do{e=g.a/4|0;a=g.a%4;for(var h=0;h<e;h++)f=[],c.push(f),d.push(c),c=f;if(0===a&&12<g.a+4)wc(g);else break}while(1);1===a?c.push(xc(g)):2===a?c.push(new Date(xc(g))):3===a?c.push(yc(g)):0===a&&(c=d.pop())}return b[0]}
function tc(a,b){var c,d,e;c=b;var f=e=d=0;if(0!==c)if(isFinite(c)){0>c&&(d=1,c=-c);f=0;if(2.2250738585072014E-308<=c){for(e=c;1>e;)f--,e*=2;for(;2<=e;)f++,e/=2;e=f+1023}f=e?Math.floor(4503599627370496*(c/Math.pow(2,f)-1)):Math.floor(c/4.9E-324)}else e=2047,isNaN(c)?f=0x8000000000000:-Infinity===c&&(d=1);c=d;d=e;e=f;c&&(e=0xfffffffffffff-e,d=2047-d);a.write((c?0:128)|d>>4);a.write((d&15)<<4|0|e/281474976710656);e%=281474976710656;c=0|e/4294967296;a.write(c>>8,c&255);e%=4294967296;c=0|e/65536;a.write(c>>
8,c&255);c=e%65536;a.write(c>>8,c&255)}function xc(a){var b=wc(a)|0,c=b>>7?!1:!0,d=c?-1:1,e=(b&127)<<4,b=wc(a)|0,e=e+(b>>4);c&&(e=2047-e);for(var b=[c?15-(b&15):b&15],f=6;f--;)b.push(c?255-(wc(a)|0):wc(a)|0);a=0;for(f=7;f--;)a=a/256+b[f];a/=16;return 0===a&&0===e?0:(a+1)*Math.pow(2,e-1023)*d}
function yc(a){for(var b=[],c=0,d=0,e=0,f,g;;){f=wc(a);if(0===f||null==f)break;0===c?(g=f>>6,2>g&&!isNaN(f)?b.push(String.fromCharCode(f-1)):(c=g,d=f<<10,e++)):2===c?(b.push(String.fromCharCode(d+f+127)),c=d=e=0):2===e?(d+=f<<2,e++):(b.push(String.fromCharCode(d|f>>6)),c=d=e=0)}return b.join("")}function vc(a){this.a=null;this.b=a;this.c=this.b.length-1;this.index=-1}function wc(a){return a.a=a.index<a.c?parseInt(a.b[++a.index]+a.b[++a.index],16):null}function sc(){this.a=[];this.b=void 0}
sc.prototype.write=function(a){for(var b=0;b<arguments.length;b++)this.b=arguments[b].toString(16),this.a.push(2===this.b.length?this.b:this.b="0"+this.b)};sc.prototype.toString=function(){return this.a.length?this.a.join(""):""};function zc(a,b){var c=rc(a),d=rc(b);return c>d?1:c==d?0:-1};function Ac(){0!=Bc&&(Cc[ga(this)]=this)}var Bc=0,Cc={};Ac.prototype.rc=!1;Ac.prototype.pc=function(){if(!this.rc&&(this.rc=!0,this.Ba(),0!=Bc)){var a=ga(this);delete Cc[a]}};Ac.prototype.Ba=function(){if(this.sc)for(;this.sc.length;)this.sc.shift()()};var Dc=!pb||pb&&9<=Db,Ec=pb&&!Bb("9");!sb||Bb("528");rb&&Bb("1.9b")||pb&&Bb("8")||ob&&Bb("9.5")||sb&&Bb("528");rb&&!Bb("8")||pb&&Bb("9");function Fc(a,b){this.type=a;this.a=this.target=b}Fc.prototype.pc=aa();Fc.prototype.b=!1;Fc.prototype.d=!0;Fc.prototype.preventDefault=function(){this.d=!1};function Gc(a){Gc[" "](a);return a}Gc[" "]=aa();function Hc(a,b){a&&Ic(this,a,b)}D(Hc,Fc);q=Hc.prototype;q.target=null;q.clientX=0;q.clientY=0;q.nc=null;function Ic(a,b,c){var d=a.type=b.type;Fc.call(a,d);a.target=b.target||b.srcElement;a.a=c;if((c=b.relatedTarget)&&rb)try{Gc(c.nodeName)}catch(e){}a.clientX=void 0!==b.clientX?b.clientX:b.pageX;a.clientY=void 0!==b.clientY?b.clientY:b.pageY;a.nc=b;b.defaultPrevented&&a.preventDefault();delete a.b}
q.preventDefault=function(){Hc.u.preventDefault.call(this);var a=this.nc;if(a.preventDefault)a.preventDefault();else if(a.returnValue=!1,Ec)try{if(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)a.keyCode=-1}catch(b){}};var Jc="closure_listenable_"+(1E6*Math.random()|0),Kc=0;function Lc(a,b,c,d,e,f){this.X=a;this.a=b;this.src=c;this.type=d;this.capture=!!e;this.Ca=f;this.key=++Kc;this.S=this.ya=!1};var Mc={},Nc={},Oc={},Pc={};function Qc(a,b,c,d,e){if(v(b))for(var f=0;f<b.length;f++)Qc(a,b[f],c,d,e);else c=Rc(c),a&&a[Jc]?Sc(a,b,c,!1,d,e):Tc(a,b,c,!1,d,e)}
function Tc(a,b,c,d,e,f){if(!b)throw Error("Invalid event type");e=!!e;var g=Nc;b in g||(g[b]={s:0,aa:0});g=g[b];e in g||(g[e]={s:0,aa:0},g.s++);var g=g[e],h=ga(a),k;g.aa++;if(g[h]){k=g[h];for(var n=0;n<k.length;n++)if(g=k[n],g.X==c&&g.Ca==f){if(g.S)break;d||(k[n].ya=!1);return}}else k=g[h]=[],g.s++;n=Uc();g=new Lc(c,n,a,b,e,f);g.ya=d;n.src=a;n.X=g;k.push(g);Oc[h]||(Oc[h]=[]);Oc[h].push(g);a.addEventListener?a.addEventListener(b,n,e):a.attachEvent(b in Pc?Pc[b]:Pc[b]="on"+b,n);Mc[g.key]=g}
function Uc(){var a=Vc,b=Dc?function(c){return a.call(b.src,b.X,c)}:function(c){c=a.call(b.src,b.X,c);if(!c)return c};return b}function Wc(a,b,c,d,e){if(v(b))for(var f=0;f<b.length;f++)Wc(a,b[f],c,d,e);else c=Rc(c),a&&a[Jc]?Sc(a,b,c,!0,d,e):Tc(a,b,c,!0,d,e)}
function Xc(a,b,c,d,e){if(v(b))for(var f=0;f<b.length;f++)Xc(a,b[f],c,d,e);else if(c=Rc(c),a&&a[Jc])b in a.g&&(a=a.g[b],c=Yc(a,c,d,e),-1<c&&(e=a[c],delete Mc[e.key],e.S=!0,Ha.splice.call(a,c,1)));else{d=!!d;a:{f=Nc;if(b in f&&(f=f[b],d in f&&(f=f[d],a=ga(a),f[a]))){a=f[a];break a}a=null}if(a)for(f=0;f<a.length;f++)if(a[f].X==c&&a[f].capture==d&&a[f].Ca==e){Zc(a[f]);break}}}
function Zc(a){if(!y(a)&&a&&!a.S){var b=a.src;if(b&&b[Jc])$c(b,a);else{var c=a.type,d=a.a,e=a.capture;b.removeEventListener?b.removeEventListener(c,d,e):b.detachEvent&&b.detachEvent(c in Pc?Pc[c]:Pc[c]="on"+c,d);b=ga(b);Oc[b]&&(d=Oc[b],Ra(d,a),0==d.length&&delete Oc[b]);a.S=!0;a.X=null;a.a=null;a.src=null;a.Ca=null;if(d=Nc[c][e][b])d.tc=!0,ad(c,e,b,d);delete Mc[a.key]}}}
function ad(a,b,c,d){if(!d.vb&&d.tc){for(var e=0,f=0;e<d.length;e++)d[e].S||(e!=f&&(d[f]=d[e]),f++);d.length=f;d.tc=!1;0==f&&(delete Nc[a][b][c],Nc[a][b].s--,0==Nc[a][b].s&&(delete Nc[a][b],Nc[a].s--),0==Nc[a].s&&delete Nc[a])}}function bd(a,b,c,d,e){var f=1;b=ga(b);if(a[b]){var g=--a.aa,h=a[b];h.vb?h.vb++:h.vb=1;try{for(var k=h.length,n=0;n<k;n++){var m=h[n];m&&!m.S&&(f&=!1!==cd(m,e))}}finally{a.aa=Math.max(g,a.aa),h.vb--,ad(c,d,b,h)}}return Boolean(f)}
function cd(a,b){var c=a.X,d=a.Ca||a.src;a.ya&&Zc(a);return c.call(d,b)}
function Vc(a,b){if(a.S)return!0;var c=a.type,d=Nc;if(!(c in d))return!0;var d=d[c],e,f;if(!Dc){e=b||ca("window.event");var g=!0 in d,h=!1 in d;if(g){if(0>e.keyCode||void 0!=e.returnValue)return!0;a:{var k=!1;if(0==e.keyCode)try{e.keyCode=-1;break a}catch(n){k=!0}if(k||void 0==e.returnValue)e.returnValue=!0}}k=new Hc;Ic(k,e,this);e=!0;try{if(g){for(var m=[],p=k.a;p;p=p.parentNode)m.push(p);f=d[!0];f.aa=f.s;for(var t=m.length-1;!k.b&&0<=t&&f.aa;t--)k.a=m[t],e&=bd(f,m[t],c,!0,k);if(h)for(f=d[!1],f.aa=
f.s,t=0;!k.b&&t<m.length&&f.aa;t++)k.a=m[t],e&=bd(f,m[t],c,!1,k)}else e=cd(a,k)}finally{m&&(m.length=0)}return e}c=new Hc(b,this);return e=cd(a,c)}var dd="__closure_events_fn_"+(1E9*Math.random()>>>0);function Rc(a){return fa(a)?a:a[dd]||(a[dd]=function(b){return a.handleEvent(b)})};function ed(){Ac.call(this);this.g={};this.Vc=this}D(ed,Ac);ed.prototype[Jc]=!0;ed.prototype.w=null;ed.prototype.Rb=function(a,b,c,d){Qc(this,a,b,c,d)};ed.prototype.removeEventListener=function(a,b,c,d){Xc(this,a,b,c,d)};
function fd(a,b){var c,d=a.w;if(d)for(c=[];d;d=d.w)c.push(d);var d=a.Vc,e=b,f=e.type||e;if(x(e))e=new Fc(e,d);else if(e instanceof Fc)e.target=e.target||d;else{var g=e,e=new Fc(f,d);Za(e,g)}var g=!0,h;if(c)for(var k=c.length-1;!e.b&&0<=k;k--)h=e.a=c[k],g=gd(h,f,!0,e)&&g;e.b||(h=e.a=d,g=gd(h,f,!0,e)&&g,e.b||(g=gd(h,f,!1,e)&&g));if(c)for(k=0;!e.b&&k<c.length;k++)h=e.a=c[k],g=gd(h,f,!1,e)&&g}
ed.prototype.Ba=function(){ed.u.Ba.call(this);var a=0,b;for(b in this.g){for(var c=this.g[b],d=0;d<c.length;d++)++a,delete Mc[c[d].key],c[d].S=!0;c.length=0}this.w=null};function Sc(a,b,c,d,e,f){var g=a.g[b]||(a.g[b]=[]),h=Yc(g,c,e,f);-1<h?(a=g[h],d||(a.ya=!1)):(a=new Lc(c,null,a,b,!!e,f),a.ya=d,g.push(a))}function $c(a,b){var c=b.type;c in a.g&&Ra(a.g[c],b)&&(delete Mc[b.key],b.S=!0)}
function gd(a,b,c,d){if(!(b in a.g))return!0;var e=!0;b=Sa(a.g[b]);for(var f=0;f<b.length;++f){var g=b[f];if(g&&!g.S&&g.capture==c){var h=g.X,k=g.Ca||g.src;g.ya&&$c(a,g);e=!1!==h.call(k,d)&&e}}return e&&!1!=d.d}function Yc(a,b,c,d){for(var e=0;e<a.length;++e){var f=a[e];if(f.X==b&&f.capture==!!c&&f.Ca==d)return e}return-1};function hd(a,b,c){if(fa(a))c&&(a=la(a,c));else if(a&&"function"==typeof a.handleEvent)a=la(a.handleEvent,a);else throw Error("Invalid listener argument");2147483647<b||r.setTimeout(a,b||0)};function id(a,b,c){var d;if(z(a))d=a.store,b=a.id,null!=a.parent&&(c=new id(a.parent));else if(u(b))d=a;else if(d=a.lastIndexOf("^|"),b=a,0<d&&(b=a.substr(d),c=new id(a.substring(0,d))),b=b.split("^:"),d=b[0],b=b[1],!u(b))throw Error("Invalid key value: "+a);this.a=d;this.id=b;this.parent=c||null}q=id.prototype;q.toJSON=function(){var a={store:this.a,id:this.id};this.parent&&(a.parent=this.parent.toJSON());return a};
q.valueOf=function(){return(this.parent?this.parent.valueOf()+"^|":"")+this.a+"^:"+this.id};q.toString=function(){return this.valueOf().replace("^|","|").replace("^:",":")};q.md=l("a");q.Pc=l("id");q.ld=l("parent");function jd(a){if(w(a)){for(var b=[],c=0,d=a.length;c<d;c++)b[c]=a[c];return b}return a};function L(a,b,c,d){this.lower=a;this.upper=b;this.lowerOpen=!!c;this.upperOpen=!!d;fa(Object.freeze)&&Object.freeze(this)}L.prototype.lower=void 0;L.prototype.upper=void 0;L.prototype.toJSON=function(){return kd(this)};L.only=function(a){return new L(a,a,!1,!1)};L.bound=function(a,b,c,d){return new L(a,b,c,d)};L.upperBound=function(a,b){return new L(void 0,a,void 0,!!b)};L.lowerBound=function(a,b){return new L(a,void 0,!!b,void 0)};
function md(a){var b;if(v(a))b=Sa(a),b.push("\uffff");else if(x(a))b=a+"\uffff";else throw new M;return L.bound(a,b,!1,!0)}function kd(a){a=a||{};return{lower:a.lower,upper:a.upper,lowerOpen:a.lowerOpen,upperOpen:a.upperOpen}}function nd(a){return null!=a?null!=a.upper&&null!=a.lower?od.bound(a.lower,a.upper,!!a.lowerOpen,!!a.upperOpen):null!=a.upper?od.upperBound(a.upper,a.upperOpen):null!=a.lower?od.lowerBound(a.lower,a.lowerOpen):null:null}
function pd(a){if(a instanceof L)return"";if(null!=a){if(z(a)){for(var b in a)if(a.hasOwnProperty(b)&&!(0<=Ia(["lower","upper","lowerOpen","upperOpen"],b)))return'invalid attribute "'+b+'" in key range object';return""}return"key range must be an object"}return""}
L.prototype.Mb=function(a){var b=this.lower,c=this.upper,d=this.lowerOpen,e=this.upperOpen;null!=a.lower&&(null==this.lower||a.lower>=this.lower)&&(b=a.lower,d=a.lowerOpen||this.lowerOpen);null!=a.upper&&(null==this.upper||a.upper<=this.upper)&&(c=a.upper,e=a.upperOpen||this.upperOpen);return L.bound(b,c,d,e)};function qd(a){if(!a)return"";var b=a.lowerOpen?" (":" [";null!=a.lower&&(b+=a.lower+", ");null!=a.upper&&(b+=a.upper);return b+=a.upperOpen?")":"]"}
function rd(a,b,c,d,e){if(c)if(c.lowerOpen||c.upperOpen||null==c.lower||null==c.upper||0!==N(c.lower,c.upper)){if(null!=c.lower){var f=c.lowerOpen?" > ":" >= ";d.push(a+f+"?");e.push(sd(c.lower,b))}null!=c.upper&&(f=c.upperOpen?" < ":" <= ",d.push(a+f+"?"),e.push(sd(c.upper,b)))}else d.push(a+" = ?"),e.push(sd(c.lower,b))}
function td(a,b,c,d){var e,f,g,h;if("^"==a)return md(b);if("<"==a||"<="==a)e=b,g="<"==a;else if(">"==a||">="==a)f=b,h=">"==a;else if("="==a||"=="==a)e=f=b;else throw new M("invalid op: "+a);if("<"==c||"<="==c)e=d,g="<"==c;else if(">"==c||">="==c)f=d,h=">"==c;else if(u(c))throw new M("invalid op2: "+c);return L.bound(f,e,h,g)}var od=r.IDBKeyRange||r.webkitIDBKeyRange||L;function ud(a,b,c){I.call(this,0,c);this.d=a;this.w=[];this.b=[];this.j=[];this.a=null;this.ia=""}D(ud,I);q=ud.prototype;q.ia="";q.Ya=H("ydn.db.Request");function vd(a,b,c){a.a=b;a.ia=c;F(a.Ya,a+" BEGIN");if(b){for(c=0;c<a.b.length;c++)a.b[c][0].call(a.b[c][1],b);a.b.length=0}F(a.Ya,a+" END")}q.Oc=function(){return!!this.a};
q.nd=function(){if(this.a)if(F(this.Ya,this+" aborting"),fa(this.a.abort))this.a.abort();else if(fa(this.a.executeSql))this.a.executeSql("ABORT",[],aa(),ba(!0));else throw new wd;else throw new xd("No active transaction");};function O(a,b,c){var d=a.j.shift();c=!!c;d?d[0].call(d[1],b,c,function(b,c){O(a,b,c)}):c?a.t(b):a.v(b)}function yd(a,b,c){a.j.push([b,c])}function P(a,b,c){a.a?b.call(c,a.a):a.b.push([b,c])}q.od=function(a,b){this.w.push([a,b]);return this};
q.v=function(a){F(this.Ya,this+" SUCCESS");ud.u.v.call(this,a);zd(this)};q.t=function(a){F(this.Ya,this+" ERROR");ud.u.t.call(this,a);zd(this)};function zd(a){a.w.length=0;a.a=null;a.ia=a.ia}function Q(a){var b="";a.ia&&(b=a.a?"!":"",b+="["+a.ia+"]");return a.d+b}function Ad(a,b){var c=new ud(a);O(c,b);return c}q.valueOf=l("ia");q.toString=function(){return"Request:"+Q(this)};
q.toJSON=function(){var a=(this.ia||"").match(/B(\d+)T(\d+)(?:Q(\d+?))?(?:R(\d+))?/)||[];return{method:this.d?this.d.split(":"):[],branchNo:parseFloat(a[1]),transactionNo:parseFloat(a[2]),queueNo:parseFloat(a[3]),requestNo:parseFloat(a[4])}};function M(a){oa.call(this,a);this.name="ydn.error.ArgumentException"}D(M,oa);function Bd(a){oa.call(this,a);this.name="ydn.error.NotSupportedException"}D(Bd,oa);function Cd(a){oa.call(this,a);this.name="ydn.error.NotImplementedException"}D(Cd,oa);function Dd(a){oa.call(this,a);this.name="ydn.error.InvalidOperationException"}D(Dd,oa);
function Ed(a){Error.captureStackTrace?Error.captureStackTrace(this,Ed):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.error.InternalError"}D(Ed,Error);Ed.prototype.name="ydn.error.InternalError";function Fd(a){Error.captureStackTrace?Error.captureStackTrace(this,Gd):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.error.ConstraintError"}D(Fd,Error);Fd.prototype.name="ydn.error.ConstraintError";function Hd(a,b,c,d,e,f){u(e)||(e=v(a)?a.join(", "):a);if(null!=a&&!x(a)&&!w(a))throw new M("index keyPath for "+e+" must be a string or array, but "+a+" is "+typeof a);v(a)&&Object.freeze&&Object.freeze(a);!u(a)&&u(e)&&(a=e);this.keyPath=a;this.e=w(this.keyPath);this.name=e;this.type=Id(b);if(u(b)){if(!u(this.type))throw new M("type invalid in index: "+this.name);if(v(this.keyPath))throw new M('composite key for store "'+this.name+'" must not specified type');}this.unique=!!c;this.multiEntry=!!d;
this.g=x(this.type)?this.type:Jd;this.c=x(e)?e:v(a)?this.keyPath.join(","):a;this.b=Ea(this.c);this.a=this.e||this.multiEntry?null:this.keyPath.split(".");this.d=f||null}function Kd(a,b){if(null!=b){if(w(a.keyPath)){for(var c=[],d=0,e=a.keyPath.length;d<e;d++){var f=pc(b,a.keyPath[d]);c[d]=f}return c}return pc(b,a.keyPath)}}function Ld(a,b,c){for(var d=0;d<a.a.length;d++)d==a.a.length-1?b[a.a[d]]=c:z(b[a.a[d]])||(b[a.a[d]]={})}var Jd="TEXT";
function sd(a,b){if("DATE"==b){if(a instanceof Date)return+a}else return u(b)?a:rc(a)}function Md(a,b){return"DATE"==b?new Date(a):u(b)?a:uc(a)}var Nd=["BLOB","DATE","INTEGER","NUMERIC",Jd];function Id(a){if(x(a))return a=Ia(Nd,a),Nd[a]}Hd.prototype.getName=l("name");Hd.prototype.toJSON=function(){return{name:this.name,keyPath:this.keyPath,type:this.type,unique:this.unique,multiEntry:this.multiEntry}};
Hd.prototype.Oa=function(){var a=v(this.keyPath)?Sa(this.keyPath):this.keyPath;return new Hd(a,this.type,this.unique,this.multiEntry,this.name,this.d)};function Od(a,b){return null!=a||null!=b?null!=a?null!=b?w(a)&&w(b)?Ua(a,b)?null:"expect: "+a+", but: "+b:Pd(a,b)?null:"expect: "+a+", but: "+b:"keyPath: "+a+" no longer defined":"newly define "+b:null}
Hd.prototype.hint=function(a){if(!a)return this;var b=v(this.keyPath)?Sa(this.keyPath):this.keyPath,c=this.type;u(a.type)||"TEXT"!=c||(c=void 0);return new Hd(b,c,this.unique,this.multiEntry,a.name)};function Qd(a,b,c,d,e,f,g){this.name=a;if(!x(this.name))throw new M("store name must be a string");this.keyPath=u(b)?b:null;this.d=w(this.keyPath);if(null!==this.keyPath&&!x(this.keyPath)&&!this.d)throw new M("keyPath must be a string or array");this.autoIncrement=c;var h;if(null!=d){h=Id(d);if(!u(h))throw new M('type "'+d+'" for primary key in store "'+this.name+'" is invalid.');if(this.d)throw new M('composite key for store "'+this.name+'" must not specified type');}this.type=null!=h?h:this.autoIncrement?
"INTEGER":void 0;this.c=x(this.keyPath)?this.keyPath.split("."):[];this.indexes=e||[];this.na=!!f;this.Hc=!!g;this.g=x(this.type)?this.type:Jd;this.b=v(this.keyPath)?this.keyPath.join(","):x(this.keyPath)?this.keyPath:"_ROWID_";this.a=Ea(this.b);this.e=[]}q=Qd.prototype;q.na=!1;q.Hc=!1;q.toJSON=function(){for(var a=[],b=0;b<this.indexes.length;b++)a.push(this.indexes[b].toJSON());return{name:this.name,keyPath:this.keyPath,autoIncrement:this.autoIncrement,type:this.type,indexes:a}};
function Rd(a){var b="name keyPath autoIncrement type indexes dispatchEvents fixed Sync".split(" "),c;for(c in a)if(a.hasOwnProperty(c)&&-1==Ia(b,c))throw new M('Unknown attribute "'+c+'"');b=[];c=a.indexes||[];if(v(c))for(var d=0;d<c.length;d++){var e;e=c[d];var f="name unique type keyPath multiEntry generator".split(" "),g=void 0;for(g in e)if(e.hasOwnProperty(g)&&-1==Ia(f,g))throw new M("Unknown field: "+g+" in "+T(e));e=new Hd(e.keyPath,e.type,e.unique,e.multiEntry,e.name,e.generator);u(e.keyPath)&&
e.keyPath===a.keyPath||b.push(e)}return new Qd(a.name,a.keyPath,a.autoIncrement,"undefined"===a.type||"null"===a.type?void 0:a.type,b,a.dispatchEvents,a.fixed)}function Sd(a,b,c,d,e,f,g){a=Td(a,b,c,d,e,f,g);b="";0!=c&&(b+="SELECT "+a.select);b+=" FROM "+a.Aa;a.p&&(b+=" WHERE "+a.p);a.group&&(b+=" GROUP BY "+a.group);a.$&&(b+=" ORDER BY "+a.$);return b}
function Td(a,b,c,d,e,f,g){var h={select:"",Aa:"",p:"",group:"",$:""},k=a.b,n=a.a,m=null;d!==k&&x(d)&&(m=Ud(a,d));var p=!!m,t=d||k,s=Ea(t),B=p?m.type:a.type,C=p&&m.multiEntry;h.Aa=Vd(a);4===c?h.select="COUNT("+n+")":1===c?(h.select=n,null!=d&&d!=k&&(h.select+=", "+s)):h.select="*";d=g?"DISTINCT ":"";k=[];C?(C=Ea("ydn.db.me:"+a.getName()+":"+m.getName()),h.select=4===c?"COUNT("+d+C+"."+s+")":1===c?Vd(a)+"."+n+", "+C+"."+s:Vd(a)+".*, "+C+"."+s+" AS "+t,h.Aa=C+" INNER JOIN "+Vd(a)+" USING ("+n+")",null!=
e&&(rd(C+"."+s,B,e,k,b),0<k.length&&(h.p=h.p?h.p+(" AND "+k.join(" AND ")):k.join(" AND ")))):null!=e&&(rd(s,B,e,k,b),0<k.length&&(h.p=h.p?h.p+(" AND "+k.join(" AND ")):k.join(" AND ")));p&&(!m.unique&&g)&&(h.group=s);a=f?"DESC":"ASC";h.$=s+" "+a;p&&(h.$+=", "+n+" "+a);return h}q.Oa=function(){return Rd(this.toJSON())};q.index=function(a){return this.indexes[a]||null};function Ud(a,b){return Oa(a.indexes,function(a){return a.name==b})}
function Wd(a,b){return b===a.keyPath?!0:Na(a.indexes,function(a){return a.name==b})}function Vd(a){return Ea(a.name)}
q.hint=function(a){if(!a)return this;var b=this.autoIncrement,c=v(this.keyPath)?Sa(this.keyPath):this.keyPath,d=this.type,e=Ka(this.indexes,function(a){return a.Oa()});u(a.type)||"TEXT"!=d||(d=void 0);v(a.keyPath)&&(x(c)&&c==a.keyPath.join(","))&&(c=Sa(a.keyPath));for(var f=0,g=a.indexes.length;f<g;f++)if(a.indexes[f].e)for(var h=a.indexes[f].getName(),k=e.length-1;0<=k;k--)if(0<=h.indexOf(e[k].getName())){e[k]=a.indexes[f].Oa();break}for(f=0;f<e.length;f++)(g=Ud(a,e[f].getName()))&&(e[f]=e[f].hint(g));
return new Qd(a.name,c,b,d,e)};q.getName=l("name");function Xd(a,b,c){if(!a.keyPath&&null!=c)return c;if(a.d){c=[];for(var d=0;d<a.keyPath.length;d++)c.push(pc(b,a.keyPath[d]));return c}if(a.keyPath)return Xa(b,a.c)}function Yd(a,b,c){for(var d=0;d<a.c.length;d++){var e=a.c[d];if(d==a.c.length-1){b[e]=c;break}u(b[e])||(b[e]={});b=b[e]}}
function Zd(a,b,c){var d=[],e=[];c=u(c)?c:Xd(a,b);u(c)&&(e.push(a.a),d.push(sd(c,a.type)));for(var f=0;f<a.indexes.length;f++){var g=a.indexes[f];if(!g.multiEntry&&g.name!==a.keyPath&&"_default_"!=g.name){var h=Kd(g,b);null!=h&&(d.push(sd(h,g.type)),e.push(g.b))}}a.Hc||(d.push(T(b)),e.push("_default_"));a=[];for(f=d.length-1;0<=f;f--)a[f]="?";return{lc:e,zc:a,G:d,key:c}}
function $d(a,b){if(!b)return"missing store: "+a.name;if(a.name!=b.name)return"store name, expect: "+a.name+", but: "+b.name;var c=Od(a.keyPath,b.keyPath);if(c)return"keyPath, "+c;if(u(a.autoIncrement)&&u(b.autoIncrement)&&a.autoIncrement!=b.autoIncrement)return"autoIncrement, expect:  "+a.autoIncrement+", but: "+b.autoIncrement;if(a.indexes.length!=b.indexes.length)return"indexes length, expect:  "+a.indexes.length+", but: "+b.indexes.length;if(u(a.type)&&u(b.type)&&(w(a.type)?!Ua(a.type,b.type):
a.type!=b.type))return"data type, expect:  "+a.type+", but: "+b.type;for(c=0;c<a.indexes.length;c++){var d=Ud(b,a.indexes[c].name),e;e=a.indexes[c];if(d)if(e.name!=d.name)e="name, expect: "+e.name+", but: "+d.name;else{var f=Od(e.keyPath,d.keyPath);e=f?"keyPath, "+f:null!=e.unique&&null!=d.unique&&e.unique!=d.unique?"unique, expect: "+e.unique+", but: "+d.unique:null!=e.multiEntry&&null!=d.multiEntry&&e.multiEntry!=d.multiEntry?"multiEntry, expect: "+e.multiEntry+", but: "+d.multiEntry:u(e.type)&&
u(d.type)&&(w(e.type)?!Ua(e.type,d.type):e.type!=d.type)?"data type, expect: "+e.type+", but: "+d.type:""}else e="no index for "+e.name;if(0<e.length)return'index "'+a.indexes[c].name+'" '+e}return""}function ae(a,b){if(b)for(var c=0;c<a.indexes.length;c++){var d=a.indexes[c],e=b;if(d.d){var f=d.d(e),g=typeof f;if("string"==g||"number"==g||"array"==g||"undefined"==g||f instanceof Date){for(g=0;g<d.a.length-1;g++)z(e[d.a[g]])||(e[d.a[g]]={});e[d.a[d.a.length-1]]=f}}}}
function be(a,b,c){for(var d=0;d<a.e.length;d++)if(void 0!==d)a.e[d](b,c)};function ce(a){a=String(a);if(/^\s*$/.test(a)?0:/^[\],:{}\s\u2028\u2029]*$/.test(a.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r\u2028\u2029\x00-\x08\x0a-\x1f]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:[\s\u2028\u2029]*\[)+/g,"")))try{return eval("("+a+")")}catch(b){}throw Error("Invalid JSON string: "+a);}function de(){}
function ee(a,b,c){switch(typeof b){case "string":fe(b,c);break;case "number":c.push(isFinite(b)&&!isNaN(b)?b:"null");break;case "boolean":c.push(b);break;case "undefined":c.push("null");break;case "object":if(null==b){c.push("null");break}if(v(b)){var d=b.length;c.push("[");for(var e="",f=0;f<d;f++)c.push(e),ee(a,b[f],c),e=",";c.push("]");break}c.push("{");d="";for(e in b)Object.prototype.hasOwnProperty.call(b,e)&&(f=b[e],"function"!=typeof f&&(c.push(d),fe(e,c),c.push(":"),ee(a,f,c),d=","));c.push("}");
break;case "function":break;default:throw Error("Unknown type: "+typeof b);}}var ge={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\x0B":"\\u000b"},he=/\uffff/.test("\uffff")?/[\\\"\x00-\x1f\x7f-\uffff]/g:/[\\\"\x00-\x1f\x7f-\xff]/g;function fe(a,b){b.push('"',a.replace(he,function(a){if(a in ge)return ge[a];var b=a.charCodeAt(0),e="\\u";16>b?e+="000":256>b?e+="00":4096>b&&(e+="0");return ge[a]=e+b.toString(16)}),'"')};H("ydn");var ie="undefined"!=typeof r.JSON;function je(a){return!x(a)||ra(a)?{}:ie?JSON.parse(a):ce(a)}function ke(a){var b;try{b=T(a)}catch(c){b=""}return b?b.substr(0,70)+(70<b.length?"...":""):""}function T(a){if(ie)a=JSON.stringify(a);else{var b=[];ee(new de,a,b);a=b.join("")}return a};function le(a,b){if(!a||ra(a))throw new M("store_name must be provided for primary full text index");if(!b||ra(b))throw new M("index_name must be provided for primary full text index");this.a=a};function me(a,b,c){this.name=a;this.indexes=b;this.a=c||"";if(-1==["","en","fr"].indexOf(this.a))throw new M('Unsupported lang "'+c+" for full text search index "+a);}me.prototype.getName=l("name");me.prototype.count=function(){return this.indexes.length};me.prototype.index=function(a){return this.indexes[a]};
function ne(a){var b=["name","indexes","lang"],c;for(c in a)if(a.hasOwnProperty(c)&&-1==Ia(b,c))throw new M("Unknown field: "+c+" in "+T(a));if(!v(a.indexes))throw new M("indexes require for full text search index "+a.name+", but "+a.indexes+" of type "+typeof a.indexes+" found.");b=a.indexes.map(function(a){var b=["storeName","keyPath","weight"],c;for(c in a)if(a.hasOwnProperty(c)&&-1==Ia(b,c))throw new M("Unknown field: "+c+" in "+ke(a));return new le(a.storeName,a.keyPath)});return new me(a.name,
b,a.lang)};function oe(a,b){var c,d,e=b;if(z(a)){d=a;c=["version","stores","fullTextCatalogs"];for(var f in d)if(d.hasOwnProperty(f)&&-1==Ia(c,f))throw new M("Unknown field: "+f+" in schema.");c=d.version;var e=[],g=d.stores||[];if(!v(g))throw new M("stores must be array");for(f=0;f<g.length;f++){var h=Rd(g[f]);if(-1!=Pa(e,function(a){return a.name==h.name}))throw new M('duplicate store name "'+h.name+'".');e.push(h)}}else x(a)?c=0==a.length?void 0:parseFloat(a):y(a)&&(c=a);if(u(c)){if(!y(c)||0>c)throw new M("Invalid version: "+
c+" ("+a+")");isNaN(c)&&(c=void 0)}if(u(b)&&(!v(b)||0<b.length&&!(b[0]instanceof Qd)))throw new M("stores");this.version=c;this.Da=!u(this.version);this.stores=e||[];c=[];if(d&&d.fullTextCatalogs)for(f=0;f<d.fullTextCatalogs.length;f++)e=ne(d.fullTextCatalogs[f]),c[f]=e,V(this,e.getName())||(g=[new Hd("keyword",Jd),new Hd("value",Jd)],e=new Qd(e.getName(),"id",!1,void 0,g),this.stores.push(e));this.a=c}q=oe.prototype;
q.toJSON=function(){var a=Ka(this.stores,function(a){return a.toJSON()}),b={};b.stores=a;u(this.version)&&(b.version=this.version);return b};q.Da=!1;q.Q=ba(!1);function pe(a){return Ka(a.stores,function(a){return a.name})}q.ra=function(a){return this.stores[a]||null};q.count=function(){return this.stores.length};function V(a,b){return Oa(a.stores,function(a){return a.name==b})}function qe(a,b){return Na(a.stores,function(a){return a.name==b})}
function re(a,b,c){if(!b||a.stores.length!=b.stores.length)return"Number of store: "+a.stores.length+" vs "+b.stores.length;for(var d=0;d<a.stores.length;d++){var e=V(b,a.stores[d].name),e=e&&c?e.hint(a.stores[d]):e,e=$d(a.stores[d],e);if(0<e.length)return'store: "'+a.stores[d].name+'" '+e}return""};function se(a){Error.captureStackTrace?Error.captureStackTrace(this,se):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.error.ArgumentException"}D(se,Error);function wd(a){Error.captureStackTrace?Error.captureStackTrace(this,wd):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.error.NotSupportedException"}D(se,Error);wd.prototype.name="ydn.error.NotSupportedException";
function te(a){Error.captureStackTrace?Error.captureStackTrace(this,te):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.error.NotImplementedException"}D(te,Error);function ue(a){Error.captureStackTrace?Error.captureStackTrace(this,ue):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.error.InternalError"}D(ue,Error);ue.prototype.name="ydn.InternalError";
function Gd(a){Error.captureStackTrace?Error.captureStackTrace(this,Gd):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.error.ConstraintError"}D(Gd,Error);Gd.prototype.name="ydn.error.ConstraintError";function ve(a){Error.captureStackTrace?Error.captureStackTrace(this,ve):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.error.InvalidOperationException"}D(se,Error);
function we(a){Error.captureStackTrace?Error.captureStackTrace(this,we):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.error.InvalidOperationError"}D(we,Error);function xe(a,b){u(a)&&5242880<a&&E(this.m,"storage size request ignored, use Quota Management API instead");this.q=null;this.Wa=b||NaN}
xe.prototype.Ja=function(a,b){function c(a,c,d){F(e.m,(d?"changing":"upgrading")+" version to "+a.version+" from "+g);for(d=0;d<b.stores.length;d++)ye(e,a,c,b.stores[d]);c=a.objectStoreNames;var f=c.length;for(d=0;d<f;d++)qe(b,c[d])||(a.deleteObjectStore(c[d]),F(e.m,"store: "+c[d]+" deleted."))}function d(a,b){f.Pa?E(e.m,"database already set."):u(b)?(E(e.m,b?b.message:"Error received."),e.q=null,f.t(b)):(e.q=a,e.q.onabort=function(a){G(e.m,e+": abort");e.cb(a.target.error)},e.q.onerror=function(a){G(e.m,
e+": error");e.cb(a.target.error)},e.q.onversionchange=function(a){G(e.m,e+" closing connection for onversionchange to: "+a.version);e.q&&(e.q.onabort=null,e.q.onblocked=null,e.q.onerror=null,e.q.onversionchange=null,e.q.close(),e.q=null,e.Db(Error(a.type)))},f.v(parseFloat(g)))}var e=this,f=new I,g=void 0,h=b.version;F(e.m,"Opening database: "+a+" ver: "+(b.Da?"auto":h));var k;k=u(h)?ze.open(a,h):ze.open(a);k.onsuccess=function(f){var h=f.target.result;u(g)||(g=h.version);F(e.m,"Database: "+h.name+
", ver: "+h.version+" opened.");if(b.Da)e.P(function(f){if(b instanceof Ae)for(var g=0;g<f.stores.length;g++)qe(b,f.stores[g].getName())||Be(b,f.stores[g].Oa());f=re(b,f);if(0<f.length){F(e.m,"Schema change require for difference in "+f);var k=y(h.version)?h.version+1:1;if("IDBOpenDBRequest"in r){h.close();var n=ze.open(a,k);n.onupgradeneeded=function(a){a=a.target.result;F(e.m,"re-open for version "+a.version);c(a,n.transaction,!1)};n.onsuccess=function(a){d(a.target.result)};n.onerror=function(){F(e.m,
e+": fail.");d(null)}}else{var p=h.setVersion(k+"");p.a=function(a){E(e.m,"migrating from "+h.version+" to "+k+" failed.");d(null,a)};p.onsuccess=function(){p.transaction.oncomplete=U;c(h,p.transaction,!0)};var U=function(){var b=ze.open(a);b.onsuccess=function(a){a=a.target.result;F(e.m,e+": OK.");d(a)};b.onerror=function(){F(e.m,e+": fail.");d(null)}};null!=p.transaction&&(p.transaction.oncomplete=U)}}else d(h)},void 0,h);else if(b.version>h.version){var k=h.setVersion(b.version);k.a=function(a){E(e.m,
"migrating from "+h.version+" to "+b.version+" failed.");d(null,a)};k.onsuccess=function(){c(h,k.transaction,!0)}}else b.version==h.version?F(e.m,"database version "+h.version+" ready to go"):E(e.m,"connected database version "+h.version+" is higher than requested version."),e.P(function(a){a=re(b,a);0<a.length?(F(e.m,a),d(null,new Gd("different schema: "+a))):d(h)},void 0,h)};k.onupgradeneeded=function(a){a=a.target.result;g=NaN;F(e.m,"upgrade needed for version "+a.version);c(a,k.transaction,!1)};
k.onerror=function(c){Zb(e.m,'open request to database "'+a+'" '+(u(b.version)?" with version "+b.version:"")+" cause error of "+k.error.name);d(null,c)};k.onblocked=function(c){Zb(e.m,"database "+a+" "+b.version+" block, close other connections.");d(null,c)};y(this.Wa)&&!isNaN(this.Wa)&&hd(function(){"done"!=k.readyState&&(Zb(e.m,e+": database state is still "+k.readyState),d(null,new Ce("connection timeout after "+e.Wa)))},this.Wa);return f};
var ze=r.indexedDB||r.mozIndexedDB||r.webkitIndexedDB||r.moz_indexedDB||r.msIndexedDB;q=xe.prototype;q.Wa=18E4;q.Db=aa();q.cb=aa();q.ta=ba("indexeddb");q.hc=function(){return this.q||null};q.bb=function(){return!!this.q};q.m=H("ydn.db.con.IndexedDb");q.q=null;q.Cb=function(){return this.q?parseFloat(this.q.version):void 0};
q.P=function(a,b,c){c=c||this.q;if(u(b)){if(null===b){if(0==c.objectStoreNames.length){a(new oe(c.version));return}throw new ue;}c=b.db}else{b=[];for(var d=c.objectStoreNames.length-1;0<=d;d--)b[d]=c.objectStoreNames[d];if(0==b.length){a(new oe(c.version));return}b=c.transaction(b,J)}for(var e=c.objectStoreNames,f=[],g=e.length,d=0;d<g;d++){for(var h=b.objectStore(e[d]),k=[],n=0,m=h.indexNames.length;n<m;n++){var p=h.index(h.indexNames[n]);k[n]=new Hd(p.keyPath,void 0,p.unique,p.multiEntry,p.name)}f[d]=
new Qd(h.name,h.keyPath,h.autoIncrement,void 0,k)}b=new oe(c.version,f);a(b)};
function ye(a,b,c,d){function e(){var a={autoIncrement:!!d.autoIncrement};null!=d.keyPath&&(a.keyPath=d.keyPath);try{return b.createObjectStore(d.getName(),a)}catch(c){if("InvalidAccessError"==c.name)throw new De("creating store for "+d.getName()+" of keyPath: "+d.keyPath+" and autoIncrement: "+d.autoIncrement);if("ConstraintError"==c.name)throw new Gd("creating store for "+d.getName());throw c;}}G(a.m,"Creating Object Store for "+d.getName()+" keyPath: "+d.keyPath);if(b.objectStoreNames.contains(d.getName()))if(c=
c.objectStore(d.getName()),Od(d.keyPath||"",c.keyPath||""))b.deleteObjectStore(d.getName()),E(a.m,"store: "+d.getName()+" deleted due to keyPath change."),c=e();else if(ea(c.autoIncrement)&&ea(d.autoIncrement)&&c.autoIncrement!=d.autoIncrement)b.deleteObjectStore(d.getName()),E(a.m,"store: "+d.getName()+" deleted due to autoIncrement change."),c=e();else{for(var f=c.indexNames,g=0,h=0,k=0,n=0;n<d.indexes.length;n++){var m=d.indexes[n],p=!1;if(f.contains(m.name)){var t=c.index(m.name),s=null!=t.unique&&
null!=m.unique&&t.unique!=m.unique,B=null!=t.multiEntry&&null!=m.multiEntry&&t.multiEntry!=m.multiEntry,t=null!=t.keyPath&&null!=m.keyPath&&!!Od(t.keyPath,m.keyPath);if(s||B||t)c.deleteIndex(m.name),p=!0,g--,k++}else p=!0;p&&(m.unique||m.multiEntry?(p={unique:m.unique,multiEntry:m.multiEntry},c.createIndex(m.name,m.keyPath,p)):c.createIndex(m.name,m.keyPath),g++)}for(n=0;n<f.length;n++)Wd(d,f[n])||(c.deleteIndex(f[n]),h++);G(a.m,"Updated store: "+c.name+", "+g+" index created, "+h+" index deleted, "+
k+" modified.")}else{c=e();for(n=0;n<d.indexes.length;n++)m=d.indexes[n],G(a.m,"Creating index: "+m.name+" multiEntry: "+m.multiEntry),m.unique||m.multiEntry?(p={unique:m.unique,multiEntry:m.multiEntry},c.createIndex(m.name,m.keyPath,p)):c.createIndex(m.name,m.keyPath);G(a.m,"Created store: "+c.name+" keyPath: "+c.keyPath)}}
q.mb=function(a,b,c,d){var e=this.q;if(!b){b=[];for(var f=e.objectStoreNames.length-1;0<=f;f--)b[f]=e.objectStoreNames[f]}0==b.length?a(null):(b=e.transaction(b,c),b.oncomplete=function(a){d("complete",a)},b.onabort=function(a){d("abort",a)},a(b),a=null)};q.Bb=function(){G(this.m,this+" closing connection");this.q.close()};q.toString=function(){return"IndexedDB:"+(this.q?this.q.name+":"+this.q.version:"")};function Ee(a){Error.captureStackTrace?Error.captureStackTrace(this,Ee):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ConstraintError"}D(Ee,Error);Ee.prototype.name="ConstraintError";function Fe(a){Error.captureStackTrace?Error.captureStackTrace(this,Fe):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.db.InvalidKeyException"}D(Fe,Error);
function Ge(a){Error.captureStackTrace?Error.captureStackTrace(this,Ge):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.db.VersionError"}D(Ge,Error);Ge.prototype.name="ydn.db.VersionError";function He(a){Error.captureStackTrace?Error.captureStackTrace(this,He):this.stack=Error().stack||"";a&&(this.message=String(a))}D(He,Error);He.prototype.name="ydn.db.InternalError";
function xd(a){Error.captureStackTrace?Error.captureStackTrace(this,xd):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="InvalidStateError"}D(xd,Error);function De(a){Error.captureStackTrace?Error.captureStackTrace(this,De):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="InvalidAccessError"}D(De,Error);function Ie(a){Error.captureStackTrace?Error.captureStackTrace(this,Ie):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="NotFoundError"}
D(Ie,Error);Ie.prototype.name="NotFoundError";function Je(a,b){Error.captureStackTrace?Error.captureStackTrace(this,Je):this.stack=Error().stack||"";b&&(this.message=String(b));this.message+=" :"+a.message+" ["+a.code+"]";this.name="SQLError"}D(Je,Error);function Ke(a,b){Error.captureStackTrace?Error.captureStackTrace(this,Ke):this.stack=Error().stack||"";b&&(this.message=String(b));this.message+=" :"+a.message;this.name="SecurityError"}D(Ke,Error);
function Le(a){Error.captureStackTrace?Error.captureStackTrace(this,Le):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.db.SqlParseError"}D(Le,Error);function Ce(a){Error.captureStackTrace?Error.captureStackTrace(this,Ce):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.db.TimeoutError"}D(Ce,Error);function Me(a){this.a=u(a)?a:4194304}q=Me.prototype;
q.Ja=function(a,b){function c(b,c){var f=b.version?parseInt(b.version,10):0,f=c.Da?isNaN(f)?1:f+1:c.version;G(e.r,a+": changing version from "+b.version+" to "+f);var g=!1,h=0;b.changeVersion(b.version,f+"",function(a){e.P(function(b){g=!0;for(var d=0;d<c.count();d++){var f=V(b,c.ra(d).getName()),f=f?f.hint(c.ra(d)):null;Ne(e,a,c.ra(d),function(a){a&&h++},f)}for(d=0;d<b.count();d++)f=b.ra(d),qe(c,f.getName())||(c instanceof Ae?Be(c,f):(f="DROP TABLE "+Vd(f),F(e.r,f),a.executeSql(f,[],aa(),function(a,
b){throw b;})))},a,b)},function(a){throw a;},function(){if(g){var f=".";h!=c.stores.length&&(f=" but unexpected stores exists.");G(e.r,a+":"+b.version+" ready"+f);d(b)}else E(e.r,a+": changing version voided.")})}function d(a,b){u(b)?(e.C=null,g.t(b)):(e.C=a,g.v(parseFloat(f)))}var e=this,f=NaN,g=new I,h=null;try{h=r.openDatabase(a,"",a,this.a)}catch(k){if("SECURITY_ERR"==k.name)E(this.r,"SECURITY_ERR for opening "+a),h=null,this.ic=new Ke(k);else throw k;}if(h){var f=h.version,n="database "+a+(0==
h.version.length?"":" version "+h.version);null!=b.version&&b.version==h.version?($b(e.r,"Existing "+n+" opened as requested."),d(h)):this.P(function(a){(a=re(b,a,!0))?(0==h.version.length?$b(e.r,"New "+n+" created."):b.Da?$b(e.r,"Existing "+n+" opened and schema change for "+a):$b(e.r,"Existing "+n+" opened and  schema change to version "+b.version+" for "+a),c(h,b)):($b(e.r,"Existing "+n+" with same schema opened."),d(h))},null,h)}else d(null,this.ic);return g};q.ta=ba("websql");q.ic=null;q.C=null;
q.hc=function(){return this.C||null};q.r=H("ydn.db.con.WebSql");q.Db=aa();q.cb=aa();
function Oe(a){var b=a.g,c="CREATE TABLE IF NOT EXISTS "+Vd(a)+" (",d=a.a,c=c+(d+" "+b+" PRIMARY KEY ");a.autoIncrement&&(c+=" AUTOINCREMENT ");for(var c=c+" ,_default_ BLOB",e=[],f=[d],g=0,h=a.indexes.length;g<h;g++){var k=a.index(g),n="";if(k.multiEntry)n=k.unique?" UNIQUE ":"",k="CREATE TABLE IF NOT EXISTS "+Ea("ydn.db.me:"+a.getName()+":"+k.getName())+" ("+d+" "+b+", "+k.b+" "+k.g+n+")",e.push(k);else{k.unique&&(n=" UNIQUE ");var m=k.keyPath;"BLOB"!=k.type&&x(m)&&(m="CREATE "+n+" INDEX IF NOT EXISTS "+
Ea(a.getName()+"-"+k.getName())+" ON "+Vd(a)+" ("+Ea(m)+")",e.push(m));m=k.b;-1==f.indexOf(m)&&(c+=", "+m+" "+k.g+n,f.push(m))}}e.unshift(c+")");return e}q.Cb=function(){return this.C?parseFloat(this.C.version):void 0};
q.P=function(a,b,c){function d(a,b){throw b;}function e(b,c){if(c&&c.rows){for(var d=0;d<c.rows.length;d++){var e=c.rows.item(d);if("__WebKitDatabaseInfoTable__"!=e.name&&"sqlite_sequence"!=e.name&&"table"==e.type){var t="sql"in e?e.sql:void 0;G(f.r,"Parsing table schema from SQL: "+t);for(var s=t.substr(t.indexOf("("),t.lastIndexOf(")")).match(/(?:"[^"]*"|[^,])+/g),B=void 0,C,t=[],R=!1,U=!1,qa=0;qa<s.length;qa++){var La=s[qa].match(/\w+|"[^"]+"/g),Ma=Ka(La,function(a){return a.toUpperCase()}),S=
Ba(La[0],'"'),La=Id(Ma[1]);if(-1!=Ma.indexOf("PRIMARY")&&-1!=Ma.indexOf("KEY")){C=La;if(x(S)&&!ra(S)&&"_ROWID_"!=S){var va=S.split(","),B=S;1<va.length&&(B=va,C=void 0)}-1!=Ma.indexOf("AUTOINCREMENT")&&(R=!0)}else if("_ROWID_"!=S)if("_default_"==S)U=!0;else{var ld="UNIQUE"==Ma[2];0==S.lastIndexOf(e.tbl_name+"-",0)&&(S=S.substr(e.tbl_name.length+1));Ma=new Hd(S,La,ld);t.push(Ma)}}if(0==e.name.lastIndexOf("ydn.db.me:",0)){var qb=e.name.split(":");if(3<=qb.length){var Gb=qb[1],B=new Hd(qb[2],La,ld,!0),
s=Pa(t,function(a){return a.getName()==qb[2]});0<=s?t[s]=B:t.push(B);s=Pa(h,function(a){return a.getName()===Gb});0<=s?(qa=h[s],h[s]=new Qd(qa.getName(),qa.keyPath,R,C,t,void 0,!U)):h.push(new Qd(Gb,void 0,!1,void 0,[B]));G(f.r,'multi entry index "'+B.getName()+'" found in '+Gb+(-1==s?"*":""))}else E(f.r,'Invalid multiEntry store name "'+e.name+'"')}else qa=Pa(h,function(a){return a.getName()===e.name}),0<=qa?(s=h[qa].index(0),t.push(s),h[qa]=new Qd(e.name,B,R,C,t,void 0,!U)):(t=new Qd(e.name,B,R,
C,t,void 0,!U),h.push(t))}}d=new oe(g,h);a(d)}}var f=this,g=(c=c||this.C)&&c.version?parseFloat(c.version):void 0,g=isNaN(g)?void 0:g,h=[];b?b.executeSql("SELECT * FROM sqlite_master",[],e,d):c.readTransaction(function(b){f.P(a,b,c)},function(a){Zb(f.r,"opening tx: "+a.message);throw a;},e)};
function Ne(a,b,c,d,e){function f(a){b.executeSql(a,[],function(){g++;g==h.length&&(d(!0),d=null)},function(b,e){g++;g==h.length&&(d(!1),d=null);throw new Je(e,"SQLError creating table: "+c.name+" "+e.message+' for executing "'+a);})}var g=0,h=Oe(c),k="Create";if(e){e=$d(c,e);if(0==e.length){G(a.r,"same table "+c.name+" exists.");d(!0);d=null;return}k="Modify";E(a.r,"table: "+c.name+" has changed by "+e+" additionallly TABLE ALTERATION is not implemented, dropping old table.");h.unshift("DROP TABLE IF EXISTS "+
Ea(c.name))}G(a.r,k+" table: "+c.name+": "+h.join(";"));for(a=0;a<h.length;a++)f(h[a])}q.bb=function(){return!!this.C};q.Bb=aa();q.mb=function(a,b,c,d){function e(a){G(h.r,h+": Tx "+c+" request cause error.");d("abort",a)}function f(){d("complete",{type:"complete"})}function g(b){a(b)}var h=this;null===this.C&&(a(null),d("abort",this.ic));c==J?this.C.readTransaction(g,e,f):c==nc?this.C.changeVersion(this.C.version,this.C.version+1+"",g,e,f):this.C.transaction(g,e,f)};
function Pe(a){function b(){c.r.log(Rb,"all tables in "+a+" deleted.",void 0)}var c=new Me,d=new Ae;F(c.r,"deleting websql database: "+a);d=c.Ja(a,d);d.da(function(){c.mb(function(b){b.executeSql('SELECT * FROM sqlite_master WHERE type = "table"',[],function(d,g){if(g&&g.rows){for(var h=g.rows.length,k=0,n=0;n<h;n++){var m=g.rows.item(n);"__WebKitDatabaseInfoTable__"!=m.name&&"sqlite_sequence"!=m.name&&(k++,G(c.r,"deleting table: "+m.name),b.executeSql("DROP TABLE "+m.name))}F(c.r,k+' tables deleted from "'+
a+'"')}},function(a,b){throw b;})},[],K,b)});d.kc(function(){E(c.r,"Connecting "+a+" failed.")})}q.toString=function(){return"WebSql:"+(this.C?":"+this.C.version:"")};function Qe(a,b,c){a=["ydn.db",a];u(b)&&(a.push(b),u(c)&&(a.push(c),u(void 0)&&a.push(rc(void 0))));return a.join("^|")};function Re(a){this.I=a||Se}function Se(a,b){return String(a)<String(b)?-1:String(a)>String(b)?1:0}q=Re.prototype;q.B=null;q.I=null;q.Z=null;q.Y=null;
function Te(a,b){if(null==a.B)a.B=new Ue(b),a.Z=a.B,a.Y=a.B;else{var c=null;Ve(a,function(a){var e=null;0<this.I(a.value,b)?(e=a.left,null==a.left&&(c=new Ue(b,a),a.left=c,a==this.Z&&(this.Z=c))):0>this.I(a.value,b)&&(e=a.right,null==a.right&&(c=new Ue(b,a),a.right=c,a==this.Y&&(this.Y=c)));return e});c&&(Ve(a,function(a){a.count++;return a.parent},c.parent),Ye(a,c.parent))}}
function Ze(a,b){Ve(a,function(a){var d=null;0<this.I(a.value,b)?d=a.left:0>this.I(a.value,b)?d=a.right:$e(this,a);return d})}q.clear=function(){this.Y=this.Z=this.B=null};q.contains=function(a){var b=!1;Ve(this,function(c){var d=null;0<this.I(c.value,a)?d=c.left:0>this.I(c.value,a)?d=c.right:b=!0;return d});return b};q.Qa=function(){return this.B?this.B.count:0};q.qb=function(){var a=[];af(this,function(b){a.push(b)});return a};
function af(a,b){if(a.B){var c,d=c=bf(a);for(c=c.left?c.left:c;null!=d;)if(null!=d.left&&d.left!=c&&d.right!=c)d=d.left;else{if(d.right!=c&&b(d.value))break;var e=d,d=null!=d.right&&d.right!=c?d.right:d.parent;c=e}}}function Ve(a,b,c){for(c=c?c:a.B;c&&null!=c;)c=b.call(a,c)}
function Ye(a,b){Ve(a,function(a){var b=a.left?a.left.height:0,e=a.right?a.right.height:0;1<b-e?(a.left.right&&(!a.left.left||a.left.left.height<a.left.right.height)&&cf(this,a.left),df(this,a)):1<e-b&&(a.right.left&&(!a.right.right||a.right.right.height<a.right.left.height)&&df(this,a.right),cf(this,a));b=a.left?a.left.height:0;e=a.right?a.right.height:0;a.height=Math.max(b,e)+1;return a.parent},b)}
function cf(a,b){ef(b)?(b.parent.left=b.right,b.right.parent=b.parent):ff(b)?(b.parent.right=b.right,b.right.parent=b.parent):(a.B=b.right,a.B.parent=null);var c=b.right;b.right=b.right.left;null!=b.right&&(b.right.parent=b);c.left=b;b.parent=c;c.count=b.count;b.count-=(c.right?c.right.count:0)+1}
function df(a,b){ef(b)?(b.parent.left=b.left,b.left.parent=b.parent):ff(b)?(b.parent.right=b.left,b.left.parent=b.parent):(a.B=b.left,a.B.parent=null);var c=b.left;b.left=b.left.right;null!=b.left&&(b.left.parent=b);c.right=b;b.parent=c;c.count=b.count;b.count-=(c.left?c.left.count:0)+1}
function $e(a,b){if(null!=b.left||null!=b.right){var c=null,d;if(null!=b.left){d=gf(a,b.left);Ve(a,function(a){a.count--;return a.parent},d);if(d!=b.left){if(d.parent.right=d.left)d.left.parent=d.parent;d.left=b.left;d.left.parent=d;c=d.parent}d.parent=b.parent;d.right=b.right;d.right&&(d.right.parent=d);b==a.Y&&(a.Y=d)}else{d=bf(a,b.right);Ve(a,function(a){a.count--;return a.parent},d);if(d!=b.right){if(d.parent.left=d.right)d.right.parent=d.parent;d.right=b.right;d.right.parent=d;c=d.parent}d.parent=
b.parent;d.left=b.left;d.left&&(d.left.parent=d);b==a.Z&&(a.Z=d)}d.count=b.count;ef(b)?b.parent.left=d:ff(b)?b.parent.right=d:a.B=d;Ye(a,c?c:d)}else Ve(a,function(a){a.count--;return a.parent},b.parent),ef(b)?(b.parent.left=null,b==a.Z&&(a.Z=b.parent),Ye(a,b.parent)):ff(b)?(b.parent.right=null,b==a.Y&&(a.Y=b.parent),Ye(a,b.parent)):a.clear()}function bf(a,b){if(!b)return a.Z;var c=b;Ve(a,function(a){var b=null;a.left&&(b=c=a.left);return b},b);return c}
function gf(a,b){if(!b)return a.Y;var c=b;Ve(a,function(a){var b=null;a.right&&(b=c=a.right);return b},b);return c}function Ue(a,b){this.value=a;this.parent=b?b:null;this.count=1}Ue.prototype.left=null;Ue.prototype.right=null;Ue.prototype.height=1;function ff(a){return!!a.parent&&a.parent.right==a}function ef(a){return!!a.parent&&a.parent.left==a};function hf(a){this.I=a||Se}D(hf,Re);function jf(a,b,c){if(a.B){var d;if(c instanceof Ue)d=c;else if(c){if(Ve(a,function(a){var b=null;0<this.I(a.value,c)?(b=a.left,d=a):0>this.I(a.value,c)?b=a.right:d=a;return b}),!d)return}else d=bf(a);a=d;for(var e=d.left?d.left:d;null!=a;)if(null!=a.left&&a.left!=e&&a.right!=e)a=a.left;else{if(a.right!=e&&b(a))return;var f=a;a=null!=a.right&&a.right!=e?a.right:a.parent;e=f}b(null)}}
function kf(a,b,c){if(a.B){var d;if(c instanceof Ue)d=c;else if(c){if(Ve(a,la(function(a){var b=null;0<this.I(a.value,c)?b=a.left:(0>this.I(a.value,c)&&(b=a.right),d=a);return b},a)),!d)return}else d=gf(a);a=d;for(var e=d.right?d.right:d;null!=a;)if(null!=a.right&&a.right!=e&&a.left!=e)a=a.right;else{if(a.left!=e&&b(a))return;var f=a;a=null!=a.left&&a.left!=e?a.left:a.parent;e=f}b(null)}};function W(a,b){this.key=a;this.a=b}W.prototype.toString=function(){return"ydn.db.con.simple.Node:"+this.key+(null!=this.a?":"+this.a:"")};function lf(a,b){var c=N(a.key,b.key);return 0===c?null!=a.a?null!=b.a?N(a.a,b.a):1:null!=b.a?-1:0:c};function mf(a,b,c){this.g=a;this.c=b;this.d=c;this.a={};a=this.d.keyPath;this.b=v(a)?a.join(","):a||"_ROWID_";this.a[this.b]=null;this.e=Qe(this.g,this.d.getName(),this.b)+"^|"}
function nf(a,b){var c=b||a.b;if(!a.a[c]){a.a[c]=new hf(lf);for(var d=a.c.length,e=0;e<d;e++){var f=a.c.key(e);if(null!==f&&0==f.lastIndexOf(a.e,0)){var g=uc(f.substr(a.e.length));if(c==a.b)Te(a.a[c],new W(g));else{var h=a.c.getItem(f);if(null!==h)if(f=Ud(a.d,c),h=je(h),h=Kd(f,h),f.multiEntry){if(v(h))for(f=0;f<h.length;f++)Te(a.a[c],new W(h[f],g))}else Te(a.a[c],new W(h,g))}}}}return a.a[c]}
function of(a,b,c){for(var d in a.a){var e=a.a[d];if(e)if(d==a.b)Ze(e,new W(b));else{var f=Ud(a.d,d),f=pc(c,f.keyPath);Ze(e,new W(b,f))}}}function pf(a){for(var b in a.a){var c=a.a[b];c&&c.clear()}a.a={}}
function qf(a,b,c,d){if(null==b&&(a.d.keyPath&&(b=Xd(a.d,c)),a.d.autoIncrement&&null==b)){b=a.e+rc(void 0);var e=je(a.c.getItem(b));e.key_count||(e.key_count=0);e.key_count++;a.c.setItem(b,T(e));b=e.key_count}if(d)if(a.a[a.b]){if(a.a[a.b].contains(rc(b)))return null}else if(null!==a.c.getItem(a.e+rc(b)))return null;a.c.setItem(a.e+rc(b),T(c));d=b;for(var f in a.a)if(e=a.a[f])if(f==a.b)Te(e,new W(d));else{var g=Ud(a.d,f),g=pc(c,g.keyPath);null!=g&&Te(e,new W(d,g))}return b}
function rf(a,b){var c=a.e+rc(b),d=a.c.getItem(c);if(null===d)return 0;a.c.removeItem(c);c=je(d);of(a,b,c);return 1}mf.prototype.clear=function(){pf(this);sf(this)};function tf(a,b){var c=a.c.getItem(a.e+rc(b)),d=void 0;if(null!==c)for(var d=je(c),c=0,e=a.d.indexes.length;c<e;c++){var f=a.d.index(c);if("DATE"==f.type){var g=Kd(f,d);g&&Ld(f,d,new Date(g))}}return d}mf.prototype.getName=function(){return this.d.getName()};
function uf(a,b,c){b=b||a.b;a=nf(a,b);var d=null,e=null,f=0,g=!1,h=!1;null!=c&&(null!=c.lower&&(d=new W(c.lower)),null!=c.upper&&(e=new W(c.upper)),g=c.lowerOpen,h=c.upperOpen);jf(a,function(a){if(null!=a&&(a=a.value,!g||null==d||0!=N(a.key,d.key))){if(null!=e&&(a=N(a.key,e.key),1===a||0===a&&h))return!0;f++}},d);return f}
function sf(a,b){var c=nf(a,a.b),d=null,e=null,f=0,g=[],h=[],k=!1,n=!1;null!=b&&(null!=b.lower&&(d=new W(b.lower)),null!=b.upper&&(e=new W(b.upper)),k=b.lowerOpen,n=b.upperOpen);jf(c,function(b){if(null!=b&&(b=b.value,!k||null==d||0!=lf(b,d))){if(null!=e){var c=lf(b,e);if(1===c||0===c&&n)return!0}var c=a.e+rc(b.key),t=a.c.getItem(c);null!==t&&(a.c.removeItem(c),f++,10>g.length&&(g.push(b.key),h.push(je(t))))}},d);if(10>g.length)for(c=0;c<g.length;c++)of(a,g[c],h[c]);else pf(a);return f}
function vf(a,b,c,d,e,f,g,h){function k(c){if(c&&(B++,!(B<g))){var d=c.value;if(e){if(R&&null!=s&&0==N(d.key,s.key))return;if(null!=t&&(c=N(d.key,t.key),-1===c||0===c&&C))return!0}else{if(C&&null!=t&&0==N(d.key,t.key))return;if(null!=s&&(c=N(d.key,s.key),1===c||0===c&&R))return!0}c=d.key;if(!h||null!=m&&N(m,c))d=p?d.a:c,b?n.push(d):(d=tf(a,d),n.push(d));m=c;if(u(f)&&n.length>=f)return!0}}var n=[],m;c=c||a.b;var p=c!=a.b;c=nf(a,c);var t=null,s=null;u(g)||(g=0);var B=-1,C=!1,R=!1;null!=d&&(null!=d.lower&&
(t=p&&e?new W(d.lower,"\uffff"):new W(d.lower)),null!=d.upper&&(s=p&&!e?new W(d.upper,"\uffff"):new W(d.upper)),C=d.lowerOpen,R=d.upperOpen);e?kf(c,k,s):jf(c,k,t);return n}mf.prototype.oa=function(a,b,c,d,e){return vf(this,!0,a,b,c,d,e)};mf.prototype.toString=function(){return"ydn.db.con.simple.Store:"+this.g+":"+this.d.getName()};function wf(a,b){this.i=a;this.a=b}function xf(a,b,c){hd(function(){b.call(c,this.i)},0,a);return function(){a.a("complete",null);a.a=null;a.i=null}};function yf(){this.clear()}q=yf.prototype;q.jb=function(){return this};q.setItem=function(a,b){u(this.a[a])||(this.keys.push(a.toString()),this.length=this.keys.length);this.a[a]=b};q.getItem=function(a){return u(this.a[a])?this.a[a]:null};q.removeItem=function(a){delete this.a[a];Ra(this.keys,a.toString());this.length=this.keys.length};q.length=0;q.key=function(a){a=this.keys[a];return u(a)?this.a[a]:null};q.clear=function(){this.a={};this.keys=[];this.length=0};function zf(a){this.d=a||new yf;this.b=NaN}q=zf.prototype;q.Cc=H("ydn.db.con.SimpleStorage");q.Cb=l("b");
q.Ja=function(a,b){function c(a,b){hd(function(){b?(F(d.Cc,d+" opening fail"),e.t(b)):(F(d.Cc,d+" version "+d.Cb()+" open"),e.v(a))})}var d=this,e=new I;this.i=this.d.jb(a);this.ma=a;this.a=b;this.c={};var f=Qe(this.ma);this.b=NaN;var g=je(this.i.getItem(f));u(g.version)&&!y(g.version)&&(g.version=NaN);if(g)if(g=new oe(g),re(this.a,g))if(!this.a.Da&&!isNaN(g.version)&&this.a.version>g.version)c(NaN,new Ge("existing version "+g.version+" is larger than "+this.a.version));else{var h=this.a.version;
this.b=u(h)?h:g.version+1;for(h=0;h<this.a.count();h++)var k=this.a.ra(h);if(this.a instanceof Ae)for(h=0;h<g.count();h++)k=g.ra(h),Be(this.a,k);h=this.a.toJSON();h.version=this.b||NaN;this.i.setItem(f,T(h));c(g.version||NaN)}else{for(h=0;h<this.a.count();h++)k=this.a.ra(h);this.b=g.version||NaN;c(this.b)}else g=b.toJSON(),this.b=1,g.version=this.b,this.i.setItem(f,T(g)),c(NaN);return e};q.bb=function(){return!!this.ma};q.hc=function(){return this.i||null};q.Db=aa();q.cb=aa();q.ta=ba("memory");
q.Bb=aa();q.mb=function(a,b,c,d){a(new wf(this,function(a,b){d(a,b)}))};q.P=function(a){hd(function(){var b=Qe(this.ma),b=this.i.getItem(b),b=new oe(b);a(b)},0,this)};function Af(a,b){var c=V(a.a,b);if(c)a.c[b]||(a.c[b]=new mf(a.ma,a.i,c));else throw new Ed('store name "'+b+'" not found.');return a.c[b]}q.toString=function(){return"SimpleStorage:"+this.ta()+":"+(this.ma+":"+this.b)};function Bf(){zf.call(this,this)}D(Bf,zf);Bf.prototype.jb=function(){return window.localStorage};Bf.prototype.ta=ba("localstorage");function Cf(a){var b=new Bf,c=new Ae;b.Ja(a,c);b.P(function(a){for(var c=0;c<a.stores.length;c++)Af(b,a.stores[c].name).clear()})}function Df(){zf.call(this,this)}D(Df,zf);Df.prototype.jb=function(){return window.sessionStorage};Df.prototype.ta=ba("sessionstorage");
function Ef(a){var b=new Df,c=new Ae;b.Ja(a,c);b.P(function(a){for(var c=0;c<a.stores.length;c++)Af(b,a.stores[c].name).clear()})};var N=ze&&ze.cmp?la(ze.cmp,ze):zc;function Ff(a,b,c,d){this.a=a;this.b=[];this.c=[];this.g=[];this.s=0;this.Pb=this.N=!1;b&&(this.b=Sa(b.b),this.c=Sa(b.c));null!=c&&(this.b[0]=c);null!=d&&(this.c[0]=d);this.d=function(){throw new Ed;};this.e=function(){throw new Ed;};0<this.a.length&&Gf(this)}q=Ff.prototype;q.s=0;q.N=!1;q.Pb=!1;q.U=H("ydn.db.Cursor");
function Hf(a,b){b.J=function(c,e,f){null==c&&(G(a.U,"cursor "+b+" finished."),a.N=!0);a.b[0]=c;a.c[0]=e;a.g[0]=f;a.s++;a.N?(G(a.U,a+" DONE."),a.d(),If(a)):(G(a.U,a+" new cursor position {"+(null!=a.c[0]?a.b[0]+", "+a.c[0]:a.b[0])+"}"),a.d(a.b[0]))};b.eb=function(b){a.e(b);If(a);a.N=!0};var c=null!=a.c[0]?", "+a.c[0]:"",c=null!=a.b[0]?" resume from {"+a.b[0]+c+"}":"";G(a.U,b+c+" opening");b.Ka(a.b[0],a.c[0])}
function Jf(a){function b(b){var f=a.a[b];f.J=function(k,m,p){d++;null==k&&(G(a.U,"cursor "+f+" finished."),a.N=!0);a.b[b]=k;a.c[b]=m;a.g[b]=p;e[b]=f.b?m:k;if(d==c){d=0;if(a.N)a.s++,G(a.U,a+" DONE."),a.d(),If(a);else if(k=e.reduce(function(a,b){return null===a?b:1==N(b,a)?b:a},null),0==N(k,e[0]))G(a.U,a+" new cursor position {"+(null!=a.c[0]?a.b[0]+", "+a.c[0]:a.b[0])+"}"),a.d(a.b[0]);else for(m=0;m<c;m++)-1==N(e[m],k)?(p=a.a[m],p.b?p.fb(k):p.va(k)):d++;Qa(e)}};f.eb=function(b){a.e(b);If(a);a.N=!0;
d=0};var k=null!=a.c[b]?", "+a.c[b]:"",k=null!=a.b[b]?" resume from {"+a.b[b]+k+"}":"";G(a.U,f+k+" opening");f.Ka(a.b[b],a.c[b])}for(var c=a.a.length,d=0,e=[],f=0;f<c;f++)b(f)}function Gf(a){var b=a.a.length;if(1==b)Hf(a,a.a[0]);else if(1<b)Jf(a);else throw new Ed("no cursors");}q.Qa=l("s");q.Bc=function(a){return this.b[a||0]};q.T=function(a){a=a||0;return this.a[a].b?this.c[a]:this.b[a]};q.ja=function(a){a=a||0;return this.a[a].Ta?this.T(a):this.g[a]};q.advance=function(a){for(var b=0;b<this.a.length;b++)this.a[b].advance(a)};
q.update=function(a,b){return this.a[b||0].update(a)};q.clear=function(a){return this.a[a||0].clear()};function Kf(a){a.Pb=!0;G(a.U,a+": exit");If(a);for(var b=0;b<a.a.length;b++)a.a[b].pc();G(a.U,a+" disposed");Qa(a.g);Qa(a.a)}function If(a){a.c=Ka(a.c,function(a){if(null!=a)return jd(a)});a.b=Ka(a.b,function(a){if(null!=a)return jd(a)})}
q.toString=function(){for(var a="[",b=0;b<this.b.length;b++)0<b&&(a+=" "),this.a[b]?a+=this.a[b].toString():(a+="cursor~{"+this.b[b],a=null!=this.c[b]?a+(";"+this.c[b]+"}"):a+"}");return"Cursor "+(a+"]")};function Lf(a,b,c,d,e){if(!(b instanceof L))if(x(b)&&u(c))b=td(b,c,d,e);else if(null!=b){if(!(b instanceof L))if(z(b))b=new L(b.lower,b.upper,b.lowerOpen,b.upperOpen);else throw new M("Invalid key range: "+b+" of type "+typeof b);}else b=null;this.a=b;this.sa=a}Lf.prototype.sa="";Lf.prototype.Mb=function(a){if(this.sa!=a.sa)return null;a=null!=this.a&&null!=a.a?this.a.Mb(a.a):this.a||a.a;return new Lf(this.sa,a)};function X(a,b,c,d,e,f,g){if(!x(a))throw new TypeError("store name");this.M=a;this.e=b;this.h=g;this.d=!!this.e;this.b=u(f)?f:!!x(this.e);if(!ea(this.b))throw new TypeError("key_only");if(u(d)&&!ea(d))throw new TypeError("reverse");if(u(e)&&!ea(e))throw new TypeError("unique");a="next";d&&e?a="prevunique":d?a="prev":e&&(a="nextunique");this.g=a;if(d=pd(c))throw new M("Invalid key range: "+d);this.a=nd(c);this.c=null}X.prototype.b=!0;
function Mf(a,b,c){if(3<arguments.length)throw new M("too many argument");X.call(this,a,void 0,b,c,void 0,!0)}D(Mf,X);function Nf(a,b,c,d,e){if(!x(b))throw new M("index name must be string");X.call(this,a,b,c,d,e,!0)}D(Nf,X);function Of(a,b,c){if(3<arguments.length)throw new M("too many argument");X.call(this,a,void 0,b,c,void 0,!1)}D(Of,X);function Pf(a,b,c,d,e){if(!x(b))throw new M("index name must be string");X.call(this,a,b,c,d,e,!1)}D(Pf,X);q=X.prototype;
q.oc=function(){return this.c?this.c.N?"done":this.c.Pb?"rest":"busy":"init"};q.hd=H("ydn.db.Iterator");q.fd=l("M");q.W=l("e");q.Tc=l("a");q.dd=function(){return this.a?this.a instanceof od?this.a:od.bound(this.a.lower,this.a.upper,this.a.lowerOpen,this.a.upperOpen):null};q.gd=l("b");q.Sc=l("d");q.toJSON=function(){return{store:this.M,index:this.e,keyRange:this.a?kd(this.a):null,direction:this.g}};
q.toString=function(){var a=u(this.h)?":"+this.h.join(","):u(this.e)?":"+this.e:"",a=a+qd(this.a),b=this.d?"Index":"",b=b+(this.b?"Key":"Value");return b+"Iterator:"+this.M+a};q.cd=function(){return this.c?this.c.Bc():void 0};q.ed=function(){return this.c?this.c.T():void 0};q.Xc=function(a,b){var c=new X(this.M,this.e,this.a,this.Ab(),this.Xa(),this.b,this.h);c.c=new Ff([],null,a,b);return c};
q.kd=function(a,b){var c=new X(this.M,this.e,this.a,!this.Ab(),this.Xa(),this.b,this.h);null!=a&&(c.c=new Ff([],null,a,b));return c};q.count=function(){return this.c?this.c.Qa():NaN};q.stores=function(){var a=[this.M];if(this.j)for(var b=0;b<this.j.length;b++)0<=Ia(a,this.j[b].a)||a.push(this.j[b].a);return a};q.Ab=function(){return"prev"===this.g||"prevunique"===this.g};q.Xa=function(){return"nextunique"===this.g||"prevunique"===this.g};
q.$=function(a,b){var c;c=[b];c=this.a?new L(null!=this.a.lower?c.concat(this.a.lower):c,null!=this.a.upper?c.concat(this.a.upper):c,!!this.a.lowerOpen,!!this.a.upperOpen):this.d?md(c):L.only(b);var d,e;this.h?e=[a].concat(this.h):this.d?e=[a].concat(this.e):d=a;return new X(this.M,d,c,this.Ab(),this.Xa(),this.b,e)};
function Qf(a,b,c,d,e){var f=e||2;e=[d.pb(b,c,a.M,a.h||a.e,a.a,a.g,a.b,f)];for(var g=0,h=a.j?a.j.length:0;g<h;g++){var k=a.j[g];if(k.b&&null!=k.value){var n;n=a.d?nd(md([k.value])):od.only(k.value);k=d.pb(b,c,k.a,k.b,n,a.g,a.b,f);e.push(k)}}b="";a.c&&(b=" by resuming "+a.c);a.c=new Ff(e,a.c);G(a.hd,c+" "+a+" created "+a.c+b);return a.c}q.jd=function(){if("busy"==this.oc())throw new we("busy");this.c=null};function Rf(a,b){this.ma=a;this.a=b}Rf.prototype.f=H("ydn.db.crud.req.RequestExecutor");Rf.prototype.ma="";Rf.prototype.toString=ba("RequestExecutor");Rf.prototype.W=function(a,b){var c;if(v(b))a:{for(c=0;c<a.indexes.length;c++)if(!Od(a.indexes[c].keyPath,b)){c=a.indexes[c];break a}c=null}else c=Ud(a,b);return c.getName()};A("ydn.db.con.IStorage.prototype.transaction",aa().prototype.ua);function Sf(a,b,c,d){if("transaction"in a)this.j=a,this.e=this.h=null;else if("objectStore"in a){if(this.j=null,this.h=a.db,this.e=a,!this.e.db.objectStoreNames.contains(b))throw new se('store "'+b+'" not in transaction.');}else throw new se("storage instance require.");this.w=b;this.R=c;this.Ea=d;this.d=[];this.b=0;this.g=!1}Sf.prototype.a=H("ydn.db.con.IdbCursorStream");Sf.prototype.g=!1;Sf.prototype.d=[];
function Tf(a,b){a.b++;b.onsuccess=function(b){if(b=b.target.result){if(fa(a.Ea)){var d=b.value;a.Ea(b.primaryKey,null!=a.R?d[a.R]:d)}else E(a.a,"sink gone, dropping value for: "+b.primaryKey);if(b&&0<a.d.length)b["continue"](a.d.shift());else a.b--,0==a.b&&a.ga&&a.ga()}};b.onerror=function(){E(a.a,"seeking fail. "+("error"in b?b.error.name+":"+b.error.message:""));a.b--;0==a.b&&a.ga&&a.ga()}}function Uf(a,b){0==a.d.length&&0==a.b?b():a.ga=b}
function Vf(a){if(!a.g){var b=function(b,c){a.e=null;"complete"!==b&&E(a.a,c.name+":"+c.message);G(a.a,a+" transaction "+b)},c=function(b){var c=a.d.shift();G(a.a,a+" transaction started for "+c);b=b.objectStore(a.w);Tf(a,b.openCursor(c))};if(a.e)G(a.a,a+" using existing tx."),c(a.e);else if(a.h)G(a.a,a+" creating tx from IDBDatabase."),a.c=a.h.transaction([a.w],J),a.c.oncomplete=function(a){b("complete",a)},a.c.onerror=function(a){b("error",a)},a.c.onabort=function(a){b("abort",a)};else if(a.j)G(a.a,
a+" creating tx from ydn.db.con.IStorage."),a.g=!0,a.j.ua(function(b){a.g=!1;c(b)},[a.w],J,b);else throw new ue("no way to create a transaction provided.");}};function Wf(a,b,c){if(a&&a instanceof Y)this.ab=a,this.ka=null;else if(a&&a.db)if(this.ab=null,a.db)this.ka=new Sf(a,this.a,this.Ia,la(this.ga,this));else throw new M("Invalid IndexedDB Transaction.");else throw new M("ydn.db.Streamer: First argument requires storage or transaction instance required.");if(!x(b))throw new M("a store name required.");this.a=b;if(u(c)&&!x(c))throw new M("index name must be a string.");this.Ia=c;this.ka=null;this.ba=[];this.qa=[];this.Sa=!1}q=Wf.prototype;q.ab=null;
q.i=null;q.gc=null;q.qa=[];q.ba=[];q.ka=null;q.ad=function(a){this.gc=a};function Xf(a){var b=0<a.ba.length;if(b&&!a.Sa&&fa(a.gc)){var c=function(){Xf(a)},d=a.qa.shift(),e=a.ba.shift(),b=0<a.ba.length,c=a.gc(d,e,b?c:null);b&&!c&&Xf(a)}}q.Sa=!1;q.fa=function(a){if(this.ka){this.Sa=!0;var b=this;Uf(this.ka,function(){a(b.qa,b.ba);b.qa=[];b.ba=[];b.Sa=!1})}else a(this.qa,this.ba),this.qa=[],this.ba=[]};q.ga=function(a,b){this.qa.push(a);this.ba.push(b);Xf(this)};
q.push=function(a,b){if(this.Sa)throw new we("push not allowed after a collection is started");if(2<=arguments.length)this.ga(a,b);else{if(!this.ka){if(!this.ab)throw new we("Database is not setup.");var c=this.ab.j();if(c)if("indexeddb"===c)this.ka=new Sf(this.ab,this.a,this.Ia,la(this.ga,this));else throw new te(c);else throw new we("Database is not connected.");}c=this.ka;c.d.push(a);Vf(c)}};q.W=l("Ia");q.toString=function(){return"Streamer:"+this.a+(this.Ia||"")};function Yf(a,b,c,d,e,f,g,h){Ac.call(this);this.Fb=c;this.g=d;this.b=x(this.g);this.n=e||null;this.c=a;this.R=b;this.o="prev"==f||"prevunique"==f;this.unique="nextunique"==f||"prevunique"==f;this.V=f;this.Ta=g;this.h=h}D(Yf,Ac);q=Yf.prototype;q.Fb="";q.V="";q.n=null;q.unique=!1;q.o=!1;q.Ta=!0;q.eb=function(){throw new Ed;};q.J=function(){throw new Ed;};q.Ba=function(){this.c=null};q.toString=function(){return"Cursor:"+this.Fb+(u(this.g)?":"+this.g:"")+"["+(this.c?"":"~")+this.R+"]"};function Zf(a,b){if(null!=a&&!("push"in a))throw new se;this.a=a||null;this.g=b;this.e=0}Zf.prototype.h=H("ydn.db.algo.AbstractSolver");Zf.prototype.a=null;Zf.prototype.b=function(a){if(!v(a))throw new TypeError("iterators must be array");if(2>a.length)throw new RangeError("ZigzagMerge require at least 2 iterators, but  only "+a.length+" found.");for(var b=0;b<a.length;b++)if(!(a[b]instanceof X))throw new TypeError("item at iterators "+b+" is not an iterator.");return!1};
function $f(a,b,c){var d,e=null!=d;if(!u(d)){d=c[0];for(var e=null!=d,f=1;e&&f<c.length;f++)null!=c[f]&&0==N(c[f],d)||(e=!1)}return e&&(a.e++,a.a&&a.a.push(d),u(a.g)&&a.e>=a.g)?[]:b}Zf.prototype.c=function(){return[]};function ag(a,b,c,d,e,f,g,h){Yf.call(this,a,b,c,d,e,f,g,h);this.A=null}D(ag,Yf);q=ag.prototype;q.Fc=H("ydn.db.core.req.IDBCursor");q.lb=function(a){(a=a.target.result)?this.J(a.key,this.b?a.primaryKey:void 0,a.value):this.J()};q.A=null;
q.Ka=function(a,b){function c(a,b,c){h.A=g;h.J(a,h.b?b:void 0,c);h.A&&(h.A.onsuccess=la(h.lb,h));g=null}var d=this+" opening ";null!=a&&(d+="{"+a,d=null!=b?d+(";"+b+"}"):d+"}");G(this.Fc,d);var d=this.n,e=this.c.objectStore(this.Fb),f=x(this.g)?e.index(this.g):null,g;g=this.Ta?f?null!=this.V?f.openKeyCursor(d,this.V):null!=d?f.openKeyCursor(d):f.openKeyCursor():null!=this.V?e.openCursor(d,this.V):null!=d?e.openCursor(d):e.openCursor():f?null!=this.V?f.openCursor(d,this.V):null!=d?f.openCursor(d):
f.openCursor():null!=this.V?e.openCursor(d,this.V):null!=d?e.openCursor(d):e.openCursor();var h=this;g.onerror=function(a){var b=g.error;a.preventDefault();h.eb(b)};null!=a?g.onsuccess=function(d){if(d=d.target.result){var e=ze.cmp(d.key,a),f=h.o?-1:1;if(e==f)c(d.key,d.primaryKey,d.value);else if(e==-f)d["continue"](a);else if(null!=b)if(ze.cmp(d.primaryKey,b)==f)c(d.key,d.primaryKey,d.value);else d["continue"]();else d["continue"]()}else c()}:(h.A=g,h.A.onsuccess=la(h.lb,h))};q.sb=function(){return!!this.A};
q.update=function(a){var b=this.A.result;if(b){var c=new I;a=b.update(a);a.onsuccess=function(a){c.v(a.target.result)};a.onerror=function(a){a.preventDefault();c.t(a)};return c}throw new De("cursor gone");};q.clear=function(){var a=this.A.result;if(a){var b=new I,a=a["delete"]();a.onsuccess=function(){b.v(1)};a.onerror=function(a){a.preventDefault();b.t(a)};return b}throw new De("cursor gone");};q.gb=function(a,b){G(this.Fc,this+" restarting.");this.Ka(b,a)};
q.advance=function(a){var b=this.A.result;if(1==a)b["continue"]();else b.advance(a)};
q.fb=function(a){var b=this.A.result,c=ze.cmp(a,b.primaryKey);if(1!=c)throw new Ed('continuing primary key "'+a+'" must higher than current primary key "'+b.primaryKey+'"');var d=this;this.A.onsuccess=function(e){if(b=e.target.result)if(c=ze.cmp(b.primaryKey,a),0==c||1==c&&!d.o||-1==c&&d.o)d.A.onsuccess=la(d.lb,d),d.J(b.key,d.b?b.primaryKey:void 0,b.value);else b["continue"]();else d.A.onsuccess=la(d.lb,d),d.J()};b["continue"]()};q.va=function(a){var b=this.A.result;if(null!=a)b["continue"](a);else b["continue"]()};
q.Ba=function(){ag.u.Ba.call(this);this.A=null};q.toString=function(){return"IDB"+ag.u.toString.call(this)};function bg(a,b){Rf.call(this,a,b)}D(bg,Rf);q=bg.prototype;q.f=H("ydn.db.crud.req.IndexedDb");q.kb=function(a,b){function c(e){var f=a.a.objectStore(b[e]).count();f.onsuccess=function(f){d[e]=f.target.result;e++;e==b.length?O(a,d):c(e)};f.onerror=function(b){b.preventDefault();O(a,f.error,!0)}}var d=[];0==b.length?O(a,[]):c(0)};
q.Kb=function(a,b,c,d){var e=a.a.objectStore(b);G(this.f,Q(a)+" addObject: "+b+" "+d);var f;f=u(d)?e.add(c,d):e.add(c);f.onsuccess=function(b){O(a,b.target.result)};f.onerror=function(b){b.preventDefault();O(a,f.error,!0)}};
q.ac=function(a,b,c,d){var e=a.a.objectStore(b);G(this.f,Q(a)+' putObject to store "'+b+'" '+(u(d)?" key: "+d:""));var f;f=u(d)?e.put(c,d):e.put(c);f.onsuccess=function(b){O(a,b.target.result)};f.onerror=function(d){"DataError"==d.name&&(d=T(c),d=new Fe(b+": "+d.substring(0,70)));d.preventDefault();O(a,f.error,!0)}};
q.Lb=function(a,b,c,d){function e(m){var t;t=null!=d?n.add(c[m],d[m]):n.add(c[m]);t.onsuccess=function(b){g++;f[m]=b.target.result;g==c.length?O(a,f,k):(b=m+10,b<c.length&&e(b))};t.onerror=function(d){g++;var n=t.error;E(h.f,Q(a)+' add request to "'+b+'" cause '+n.name+' for object "'+ke(c[m])+'" at index '+m+" of "+c.length+" objects.");f[m]=n;k=!0;d.preventDefault();g==c.length?O(a,f,k):(d=m+10,d<c.length&&e(d))}}var f=[],g=0,h=this,k=!1,n=a.a.objectStore(b);G(this.f,Q(a)+" addObjects: "+b+" "+
c.length+" objects");if(0<c.length)for(var m=0;10>m&&m<c.length;m++)e(m);else O(a,[])};
q.bc=function(a,b,c,d){function e(m){if(null==c[m])if(G(k.f,"empty object at "+m+" of "+c.length),g++,g==c.length)O(a,f,h);else{var t=m+10;t<c.length&&e(t)}var s;s=null!=d?n.put(c[m],d[m]):n.put(c[m]);s.onsuccess=function(b){g++;f[m]=b.target.result;g==c.length?O(a,f,h):(b=m+10,b<c.length&&e(b))};s.onerror=function(d){g++;var n=s.error;G(k.f,Q(a)+' put request to "'+b+'" cause '+n.name+' for object "'+ke(c[m])+'" at index '+m+" of "+c.length+" objects.");f[m]=n;h=!0;d.preventDefault();g==c.length?
O(a,f,h):(d=m+10,d<c.length&&e(d))}}var f=[],g=0,h=!1,k=this,n=a.a.objectStore(b);G(this.f,Q(a)+" put "+c.length+' objects to store "'+b+'"');if(0<c.length)for(var m=0;10>m&&m<c.length;m++)e(m);else O(a,[])};
q.$b=function(a,b,c){function d(k){var m=c[k],p=m.a,t=a.a.objectStore(p),s;s=null===t.keyPath?t.put(b[k],m.id):t.put(b[k]);s.onsuccess=function(c){f++;e[k]=c.target.result;f==b.length?O(a,e,g):(c=k+10,c<b.length&&d(c))};s.onerror=function(c){f++;E(h.f,"request result "+c.name+' error when put keys to "'+p+'" for object "'+ke(b[k])+'" at index '+k+" of "+b.length+" objects.");e[k]=s.error;g=!0;c.preventDefault();f==b.length?O(a,e,g):(c=k+10,c<b.length&&d(c))}}var e=[],f=0,g=!1,h=this;G(this.f,Q(a)+
" putByKeys: of "+b.length+" objects");if(0<b.length)for(var k=0;10>k&&k<b.length;k++)d(k);else O(a,e,g)};q.xb=function(a,b,c){var d=a.a.objectStore(b);G(this.f,Q(a)+" clearById: "+b+" "+c);var e=d.openCursor(od.only(c));e.onsuccess=function(b){if(b=b.target.result){var c=b["delete"]();c.onsuccess=function(){O(a,1)};c.onerror=function(){O(a,c.error,!0)}}else O(a,0)};e.onerror=function(b){b.preventDefault();O(a,e.error,!0)}};
q.dc=function(a,b){function c(h){h++;if(h>=b.length)0<g.length?O(a,g,!0):O(a,d);else{b[h].a!=e&&(e=b[h].a,f=a.a.objectStore(e));var k=f["delete"](b[h].id);k.onsuccess=function(){d++;c(h)};k.onerror=function(a){a.preventDefault();g[h]=k.error;c(h)}}}var d=0,e,f;G(this.f,Q(a)+" removeByKeys: "+b.length+" keys");var g=[];c(-1)};
q.yb=function(a,b,c){var d=a.a.objectStore(b),e=d.count(c);G(this.f,Q(a)+" clearByKeyRange: "+b+" "+c);e.onsuccess=function(b){var e=b.target.result,h=d["delete"](c);h.onsuccess=function(){O(a,e)};h.onerror=function(){O(a,h.error,!0)}};e.onerror=function(b){b.preventDefault();O(a,e.error,!0)}};q.Ob=function(a,b,c){var d=a.a.objectStore(b);G(this.f,Q(a)+" "+b+" "+c);var e=d["delete"](c);e.onsuccess=function(){O(a,void 0)};e.onerror=function(b){b.preventDefault();O(a,e.error,!0)}};
q.cc=function(a,b,c,d){var e=a.a.objectStore(b).index(c);G(this.f,Q(a)+" clearByIndexKeyRange: "+b+":"+c+" "+d);var f=[],g=e.openCursor(d),h=0;g.onsuccess=function(b){var c=b.target.result;if(c){var d=c["delete"]();d.onsuccess=function(){h++;c["continue"]()};d.onerror=function(a){f.push(d.error);a.preventDefault();c["continue"]()}}else 0<f.length?O(a,f,!0):O(a,h)};g.onerror=function(b){b.preventDefault();O(a,g.error,!0)}};
q.ib=function(a,b){var c=b.length,d=0;G(this.f,Q(a)+" clearByStores: "+b);for(var e=0;e<c;e++){var f=a.a.objectStore(b[e]).clear();f.onsuccess=function(){d++;d==c&&O(a,d)};f.onerror=function(b){d++;b.preventDefault();d==c&&O(a,f.error,!0)}}};
function cg(a,b,c,d,e,f,g,h,k){var n=[],m=b.a.objectStore(c),p=oc(f,k);c=Q(b)+" "+c+(d?":"+d:"")+(e?T(e):"");f&&(c+=" reverse");k&&(c+=" unique");G(a.f,c);var t;t=d?m.index(d).openCursor(e,p):m.openCursor(e,p);var s=!1;t.onsuccess=function(a){if(a=a.target.result)if(!s&&0<h)s=!0,a.advance(h);else if(n.push(a.value),n.length<g)a["continue"]();else O(b,n);else O(b,n)};t.onerror=function(a){a.preventDefault();O(b,t.error,!0)}}q.ub=function(a,b,c,d,e,f){cg(this,a,b,null,c,d,e,f)};
q.Ua=function(a,b,c,d,e,f,g,h){cg(this,a,b,c,d,e,f,g,h)};q.Ub=function(a,b,c,d,e,f){var g=[],h=a.a.objectStore(b);d=oc(d);G(this.f,Q(a)+" "+b+" "+c);var k=h.openCursor(c,d),n=!1;k.onsuccess=function(b){if(b=b.target.result)if(!n&&0<f)n=!0,b.advance(f);else if(g.push(b.key),g.length<e)b["continue"]();else O(a,g);else O(a,g)};k.onerror=function(b){b.preventDefault();O(a,k.error,!0)}};
q.Sb=function(a,b,c,d,e,f,g,h){var k=[],n=a.a.objectStore(b).index(c);G(this.f,Q(a)+" "+b+":"+c+" "+d);var m=n.openKeyCursor(d,oc(e,h)),p=!1;m.onsuccess=function(b){if(b=b.target.result)if(!p&&0<g)p=!0,b.advance(g);else if(k.push(b.primaryKey),k.length<f)b["continue"]();else O(a,k);else O(a,k)};m.onerror=function(b){b.preventDefault();O(a,m.error,!0)}};
q.ob=function(a,b,c){var d=this;G(this.f,Q(a)+b+":"+c);var e=a.a.objectStore(b).get(c);e.onsuccess=function(b){G(d.f,Q(a)+" record "+c+(null!=b.target.result?" ":" not ")+" exists.");O(a,b.target.result)};e.onerror=function(b){b.preventDefault();O(a,e.error,!0)}};
q.Vb=function(a,b,c){function d(b){if(null==c[b])if(f++,e[b]=void 0,f==h)O(a,e);else{var n=b+10;n<h&&d(n)}var m;m=g.get(c[b]);m.onsuccess=function(c){f++;e[b]=c.target.result;f==h?O(a,e):(c=b+10,c<h&&d(c))};m.onerror=function(b){f++;b.preventDefault();O(a,m.error,!0)}}var e=[];e.length=c.length;var f=0,g=a.a.objectStore(b),h=c.length;G(this.f,Q(a)+" "+b+":"+h+" ids");if(0<h)for(b=0;10>b&&b<h;b++)d(b);else O(a,[])};
q.Xb=function(a,b){function c(f){var h=b[f],k=a.a.objectStore(h.a).get(h.id);k.onsuccess=function(h){e++;d[f]=h.target.result;e==b.length?O(a,d):(h=f+10,h<b.length&&c(h))};k.onerror=function(b){e++;b.preventDefault();O(a,k.error,!0)}}var d=[];d.length=b.length;var e=0;G(this.f,Q(a)+" "+b.length+" ids");if(0<b.length)for(var f=0;10>f&&f<b.length;f++)c(f);else O(a,[])};
q.za=function(a,b,c,d){var e=a.a.objectStore(b);b=Q(a)+" "+b+(d?":"+d:"")+(c?":"+T(c):"");G(this.f,b);var f;null!=d?(d=e.index(d),f=null!=c?d.count(c):d.count()):f=null!=c?e.count(c):e.count();f.onsuccess=function(b){O(a,b.target.result)};f.onerror=function(b){b.preventDefault();O(a,f.error,!0)}};function dg(a,b){Rf.call(this,a,b)}D(dg,bg);q=dg.prototype;q.f=H("ydn.db.core.req.IndexedDb");q.Tb=function(a,b,c,d){eg(this,1,a,b,c,d)};
function eg(a,b,c,d,e,f){var g=[],h=c.a,k=Q(c),n=1==b,m=k+" "+b+"ByIterator "+d;0<e&&(m+=" limit "+e);F(a.f,m);var p=Qf(d,h,k,a,b);p.e=function(a){Kf(p);O(c,a,!0)};var t=0,s=!1,B=!1;p.d=function(h){B||(G(a.f,m+" starting"),B=!0);if(null!=h){var k=d.d?p.T():h;!s&&0<f?(p.advance(f),s=!0):(t++,n?g.push(h):g.push(d.b?k:p.ja()),3==b?(Kf(p),O(c,g[0])):!u(e)||t<e?p.a[0].va(void 0):(F(a.f,"success:"+m+" "+g.length+" records"),Kf(p),O(c,g)))}else F(a.f,"success:"+m+" "+g.length+" records"),Kf(p),O(c,3==b?
g[0]:g)}}q.Wb=function(a,b,c,d){eg(this,2,a,b,c,d)};q.Qb=function(a,b){eg(this,3,a,b,1,0)};q.pb=function(a,b,c,d,e,f,g,h){var k=V(this.a,c);u(d)&&(d=this.W(k,d));return new ag(a,b,c,d,e,f,g,h)};function fg(){this.a=!1}fg.prototype.a=!1;function gg(a,b,c,d,e,f,g,h,k){Yf.call(this,a,b,d,e,f,g,h,k);this.zb=this.Va=this.Fa=void 0;this.Zb=this.j=this.d=this.a=null;this.e=new fg}D(gg,Yf);q=gg.prototype;q.sb=function(){return!!this.c};q.update=function(){throw new Cd;};q.advance=function(a){function b(b){d++;if(!b||d>=a)return hg(c,b)}var c=this,d=this.a?-1:0;this.o?kf(this.d,b,this.a):jf(this.d,b,this.a)};
q.va=function(a){if(null!=a){var b=this,c=new W(a),d=function(c){b.a=c;if(!c)return hg(b,c);var d=N(c.value.key,a);if(b.o){if(1!=d)return hg(b,c)}else if(-1!=d)return hg(b,c)};this.o?kf(this.d,d,c):jf(this.d,d,c)}else this.advance(1)};function ig(a){hd(function(){a.e.a?(a.e.a=!1,this.J(this.Fa,this.Va,this.zb),ig(this)):(this.Zb(),this.Zb=null)},0,a)}
function hg(a,b){if(a.a=b){var c=b.value;if(a.n)if(a.o||null==a.n.upper)a.o&&null!=a.n.lower&&(d=N(c.key,a.n.lower),-1==d||0==d&&a.n.lowerOpen)&&(a.a=null);else{var d=N(c.key,a.n.upper);if(1==d||0==d&&a.n.upperOpen)a.a=null}if(a.a){if(a.unique&&(null!=a.Fa&&null!=c.key)&&0==N(a.Fa,c.key))return;a.Fa=c.key;a.Va=a.b?c.a:a.Fa;2==a.h&&(a.Ta?a.zb=a.Va:a.zb=tf(a.j,a.Va))}}a.a||(a.Fa=void 0,a.Va=void 0,a.zb=void 0);return a.e.a=!0}
q.Ka=function(a,b){var c=null;this.n&&(this.o?null!=this.n.upper&&(c=new W(this.n.upper)):null!=this.n.lower&&(c=new W(this.n.lower)));null!=a&&(c=this.b?new W(a,b):new W(a));this.Zb=xf(this.c,function(d){function e(c){var d=c.value,e=d.key;if(c&&null!=e)if(null!=a)if(null!=b){if(d=d.a,null!=d&&0==N(a,e)&&0==N(b,d))return}else{if(0==N(a,e))return}else if(this.n&&(!this.o&&(this.n.lowerOpen&&null!=this.n.lower)&&(d=N(e,this.n.lower),0==d)||this.o&&(this.n.upperOpen&&null!=this.n.upper)&&(d=N(e,this.n.upper),
0==d)))return;return hg(this,c)}this.j=Af(d,this.Fb);this.d=nf(this.j,this.g);this.o?kf(this.d,la(e,this),c):jf(this.d,la(e,this),c);ig(this)},this)};q.clear=function(){throw new Cd;};q.gb=function(){throw new Cd;};q.fb=function(){throw new Cd;};q.toString=function(){return"Simple"+gg.u.toString.call(this)};function jg(a,b){Rf.call(this,a,b)}D(jg,Rf);q=jg.prototype;q.f=H("ydn.db.crud.req.SimpleStore");q.Sb=function(a,b,c,d,e,f,g){var h=Q(a)+" "+b+":"+c+" "+(d?ke(d):"");G(this.f,h);var k=xf(a.a,function(h){h=Af(h,b).oa(c,d,e,f,g);O(a,h);k();k=null},this)};q.Ub=function(a,b,c,d,e,f){var g=Q(a)+" "+b+" "+(c?ke(c):"");G(this.f,g);var h=xf(a.a,function(g){g=Af(g,b).oa(null,c,d,e,f);O(a,g);h();h=null},this)};q.$b=function(a,b,c){kg(this,a,null,b,c,!0,!1)};
function kg(a,b,c,d,e,f,g){G(a.f,Q(b)+" "+(f?"put":"add")+"Object"+(g?"":"s "+d.length+" objects"));var h=xf(b.a,function(a){var n;if(g)n=Af(a,c),a=qf(n,e,d,!f),null!=a?O(b,a):(a=ke(a),a=new Ee(a),O(b,a,!0));else{for(var m=c,p=[],t=!1,s=e||{},B=0;B<d.length;B++){var C;c?C=s[B]:(m=e[B],C=m.id,m=m.a);n&&n.getName()==m||(n=Af(a,m));C=qf(n,C,d[B],!f);null!=C||(t=!0);p.push(C)}O(b,p,t)}h();h=null},a)}q.Kb=function(a,b,c,d){kg(this,a,b,c,d,!1,!0)};q.ac=function(a,b,c,d){kg(this,a,b,c,d,!0,!0)};
q.Lb=function(a,b,c,d){kg(this,a,b,c,d,!1,!1)};q.bc=function(a,b,c,d){kg(this,a,b,c,d,!0,!1)};q.ob=function(a,b,c){var d=xf(a.a,function(e){e=tf(Af(e,b),c);O(a,e);d();d=null},this)};function lg(a,b,c,d){var e=xf(b.a,function(a){for(var g=[],h=c,k,n=0;n<d.length;n++){var m=d[n];m instanceof id&&(h=m,m=h.id,h=h.a);k&&k.getName()==h||(k=Af(a,h));m=tf(k,m);g[n]=m}O(b,g,!1);e();e=null},a)}q.Vb=function(a,b,c){lg(this,a,b,c)};q.Xb=function(a,b){lg(this,a,null,b)};
q.ub=function(a,b,c,d,e,f){var g=Q(a)+" "+b+" "+(c?ke(c):"");G(this.f,g);var h=xf(a.a,function(k){k=Af(k,b);F(this.f,g+" getting records for "+b);k=vf(k,!1,null,c,d,e,f);F(this.f,g+" "+k.length+" records found.");O(a,k);h();h=null},this)};q.Ua=function(a,b,c,d,e,f,g,h){var k=Q(a)+" "+b+" "+(d?ke(d):"");G(this.f,k);var n=xf(a.a,function(m){m=vf(Af(m,b),!1,c,d,e,f,g,h);F(this.f,k+" "+m.length+" records found.");O(a,m);n();n=null},this)};
q.xb=function(a,b,c){var d=Q(a)+" removeById "+b+" "+c;G(this.f,d);var e=this,f=xf(a.a,function(g){g=rf(Af(g,b),c);F(e.f,"success "+d+(0==g?" [not found]":""));O(a,g);f();f=null},this)};q.dc=function(a,b){G(this.f,Q(a)+" removeByKeys "+b.length+" keys");var c,d=0,e=xf(a.a,function(f){for(var g=0;g<b.length;g++){var h=b[g].a,k=b[g].id;c&&c.getName()==h||(c=Af(f,h));d+=rf(c,k)}O(a,d);e();e=null},this)};q.Ob=function(a,b,c){this.yb(a,b,c)};
q.yb=function(a,b,c){var d=Q(a)+" removeByKeyRange "+(c?T(c):"");G(this.f,d);var e=this,f=xf(a.a,function(g){g=sf(Af(g,b),c);F(e.f,d+" deleted "+g+" records.");O(a,g);f();f=null},this)};q.cc=function(a,b,c,d){var e=Q(a)+" removeByIndexKeyRange "+(d?T(d):"");G(this.f,e);var f=xf(a.a,function(e){e=Af(e,b);for(var h=e.oa(c,d),k=h.length,n=0;n<k;n++)rf(e,h[n]);O(a,k);f();f=null},this)};
q.ib=function(a,b){var c=Q(a)+" clearByStores";G(this.f,c);var d=xf(a.a,function(e){for(var f=0;f<b.length;f++)Af(e,b[f]).clear();F(this.f,"success "+c);O(a,b.length);d();d=null},this)};q.kb=function(a,b){var c=xf(a.a,function(d){for(var e=[],f=0;f<b.length;f++){var g=Af(d,b[f]);e.push(uf(g))}O(a,e);c();c=null},this)};
q.za=function(a,b,c,d){var e=Q(a)+" count"+(null!=d?"Index":"")+(null!=c?"KeyRange":"Store");G(this.f,e);var f=xf(a.a,function(g){g=uf(Af(g,b),d,c);F(this.f,"success "+e);O(a,g);f();f=null},this)};function mg(a,b){Rf.call(this,a,b)}D(mg,jg);mg.prototype.Tb=function(a,b,c,d){var e=[],f=Q(a),g=a.a;G(this.f,f+" keysByIterator:"+b);var h=Qf(b,g,f,this);h.e=function(b){O(a,b,!0)};var k=0,n=!1;h.d=function(b){null!=b?!n&&0<d?(h.advance(d),n=!0):(k++,e.push(b),!u(c)||k<c?h.advance(1):(Kf(h),O(a,e))):(Kf(h),O(a,e))}};
function ng(a,b,c,d,e,f){var g=c.a,h=Q(c),k=[];G(a.f,h+" listByIterator"+d);var n=Qf(d,g,h,a);n.e=function(a){Kf(n);O(c,a,!0)};var m=0,p=!1;n.d=function(a){if(null!=a){a=d.d?n.T():a;var g=n.ja();!p&&0<f?(n.advance(f),p=!0):(m++,k.push(d.b?a:g),!u(e)||m<e?n.advance(1):(Kf(n),a=3==b?k[0]:k,O(c,a)))}else Kf(n),a=3==b?k[0]:k,O(c,a)}}mg.prototype.Wb=function(a,b,c,d){ng(this,2,a,b,c,d)};mg.prototype.Qb=function(a,b){ng(this,3,a,b,1,0)};
mg.prototype.pb=function(a,b,c,d,e,f,g,h){var k=V(this.a,c);u(d)&&(d=this.W(k,d));return new gg(a,b,0,c,d,e,f,g,h)};function og(a,b,c,d,e,f,g,h,k){Yf.call(this,a,b,d,e,f,g,h,k);this.a=c;this.j=x(e)?Ud(c,e):null;this.d=this.e=void 0}D(og,Yf);q=og.prototype;q.wa=H("ydn.db.core.req.WebsqlCursor");q.fa=function(a){this.w=this.d=this.e=void 0;if(u(a))if(z(a)){var b=Md(a[this.a.b],this.a.type);if(this.b){var c;c=Ud(this.a,this.g).type;this.d=b;this.e=Md(a[this.g],c)}else this.e=b;this.w=this.Ta?b:pg(a,this.a)}else this.w=a};
function qg(a,b,c){Ud(a.a,a.g);var d=[],e=a.g,f=a.n,g=a.e;if(null!=f){var h=f.lower,k=f.upper,n=f.lowerOpen,f=f.upperOpen;a.o?k=null!=k&&-1==N(k,g)?k:g:h=null!=h&&1==N(h,g)?h:g;f=null!=h&&null!=k?L.bound(h,k,!!n,!!f):null!=h?od.lowerBound(h,!!n):od.upperBound(k,!!f)}else f=a.o?od.upperBound(g):od.lowerBound(g);e=Td(a.a,d,a.h,e,f,a.o,a.unique);c=a.o?od.upperBound(c,!1):od.lowerBound(c,!1);c=Td(a.a,d,a.h,a.a.b,c,a.o,a.unique);e.p=e.p?e.p+(" AND "+c.p):c.p;c="SELECT "+e.select+" FROM "+e.Aa+(e.p?" WHERE "+
e.p:"")+(e.group?" GROUP BY "+e.group:"")+" ORDER BY "+e.$;c+=" LIMIT 1";G(a.wa,a+": continuePrimary:  SQL: "+c+" : "+T(d));a.c.executeSql(c,d,function(c,d){0<d.rows.length?a.fa(d.rows.item(0)):a.fa();b.call(a,a.e,a.d,a.w);b=null},function(c,d){E(a.wa,"get error: "+d.message);a.eb(d);a.fa();b.call(a,a.d,a.e,a.w);b=null;return!1})}
function rg(a,b,c,d,e){var f=a.j.c,g=a.j.b,h=a.a.a,k=a.o?" <":" >",k=d?k+" ":k+"= ";d=sd(c,a.j.type);e=sd(e,a.a.type);var n="";a.n?(a=Td(a.a,b,a.h,f,a.n,a.o,a.unique),a.p+=" AND ",n=g+k+"?",b.push(d)):(c=a.o?L.upperBound(c,!0):L.lowerBound(c,!0),a=Td(a.a,b,a.h,f,c,a.o,a.unique),n=a.p,a.p="");a.p+="("+n+" OR ("+g+" = ? AND "+h+k+"?))";b.push(d);b.push(e);return"SELECT "+a.select+" FROM "+a.Aa+" WHERE "+a.p+(a.group?" GROUP BY "+a.group:"")+" ORDER BY "+a.$}
function sg(a,b,c,d){var e,f,g,h;if(null!=a.n)if(e=a.n.lower,f=a.n.upper,g=a.n.lowerOpen,h=a.n.upperOpen,a.o)if(null!=f){var k=N(c,f);-1==k?(f=c,h=d):0==k&&(h=d||h)}else f=c,h=d;else null!=e?(k=N(c,e),1==k?(e=c,g=d):0==k&&(g=d||g)):(e=c,g=d);else a.o?(f=c,h=d):(e=c,g=d);c=new L(e,f,!!g,!!h);b=Td(a.a,b,a.h,a.j?a.j.c:a.a.b,c,a.o,a.unique);b="SELECT "+b.select+" FROM "+b.Aa+(b.p?" WHERE "+b.p:"")+(b.group?" GROUP BY "+b.group:"")+" ORDER BY "+b.$;a.b&&(b+=", "+a.a.a+(a.o?"DESC":"ASC"));return b}
function tg(a,b,c,d,e,f){var g=!d;d=[];null!=f?c=rg(a,d,c,g,f):null!=c?c=sg(a,d,c,g):(c=Sd(a.a,d,a.h,a.b?a.j.c:a.a.b,a.n,a.o,a.unique),a.b&&(c+=", "+a.a.a+" ASC"));c+=" LIMIT 1";0<e&&(c+=" OFFSET "+e);G(a.wa,a+": continue:  SQL: "+c+" : "+T(d));a.c.executeSql(c,d,function(c,d){0<d.rows.length?a.fa(d.rows.item(0)):a.fa();b.call(a,a.e,a.d,a.w);b=null},function(c,d){E(a.wa,"get error: "+d.message);a.eb(d);a.fa();b.call(a,a.d,a.e,a.w);b=null;return!1})}q.sb=function(){return!!this.c};
q.update=function(a){if(!this.sb())throw new De;var b=new I,c=this.d;a=Zd(this.a,a,c);var d="REPLACE INTO "+Vd(this.a)+" ("+a.lc.join(", ")+") VALUES ("+a.zc.join(", ")+") ON CONFLICT FAIL";G(this.wa,this+': clear "'+d+'" : '+T(a.G));this.c.executeSql(d,a.G,function(){b.v(c)},function(a,c){b.t(c);return!1});return b};
q.advance=function(a){var b=this.e,c=this.d,d=!0;null==this.e||this.b&&null==this.d||(a-=1,d=!1);tg(this,function(a,d,g){var h=null!=b&&null!=a&&0==N(b,a);if(this.b){var k=null!=d&&null!=c&&0==N(d,c);if(h&&k)throw new Ed("current: "+b+";"+c+" next: "+a+";"+d);}else if(h)throw new Ed("current: "+b+" next: "+a);this.J(a,d,g)},this.e,d,a,this.d)};q.va=function(a){null!=a?tg(this,this.J,a,!0):this.advance(1)};q.Ka=function(a,b){tg(this,this.J,a,!1,0,b)};
q.clear=function(){if(!this.sb())throw new De;var a=new I,b=this.a.b,b="DELETE FROM "+Vd(this.a)+" WHERE "+b+" = ?",c=[this.d];G(this.wa,this+': clear "'+b+'" : '+T(c));this.c.executeSql(b,c,function(b,c){a.v(c.rowsAffected)},function(b,c){a.t(c);return!1});return a};q.gb=function(a,b){G(this.wa,this+" restarting.");this.Ka(b,a)};
q.fb=function(a){var b=N(a,this.d);if(0==b||1==b&&this.o||-1==b&&!this.o)throw new we(this+" to continuePrimaryKey  from "+this.d+" to "+a+" on "+this.V+" direction is wrong");qg(this,this.J,a)};q.toString=function(){return"WebSql"+og.u.toString.call(this)};function ug(a,b){Rf.call(this,a,b)}D(ug,Rf);q=ug.prototype;q.f=H("ydn.db.crud.req.WebSql");function pg(a,b){var c=a._default_?je(a._default_):{};if(null!=b.keyPath){var d=Md(a[b.keyPath],b.type);null!=d&&Yd(b,c,d)}for(d=0;d<b.indexes.length;d++){var e=b.indexes[d],f=e.c;"_default_"==f||(e.e||e.multiEntry)||"DATE"!=e.type||(f=Md(a[f],e.type),u(f)&&Ld(e,c,f))}return c}q.Ub=function(a,b,c,d,e,f){vg(this,a,!0,b,void 0,c,d,e,f,!1)};q.Sb=function(a,b,c,d,e,f,g,h){vg(this,a,!0,b,c,d,e,f,g,h)};
function vg(a,b,c,d,e,f,g,h,k,n){var m=[],p=V(a.a,d),t=p.b;null!=e&&e!==t&&Ud(p,e);d=[];e=Sd(p,d,c?1:2,e||t,f,g,n);y(h)&&(e+=" LIMIT "+h);y(k)&&(e+=" OFFSET "+k);var s=Q(b)+" SQL: "+e+" ;params= "+T(d);G(a.f,s);b.a.executeSql(e,d,function(d,e){for(var f=e.rows.length,g=0;g<f;g++){var h=e.rows.item(g);c?m[g]=Md(h[t],p.type):null!=h&&(m[g]=pg(h,p))}F(a.f,"success "+s);O(b,m)},function(c,d){E(a.f,"error: "+s+d.message);O(b,d,!0);return!1})}q.Kb=function(a,b,c,d){wg(this,a,!0,!0,b,[c],[d])};
q.ac=function(a,b,c,d){wg(this,a,!1,!0,b,[c],[d])};q.Lb=function(a,b,c,d){wg(this,a,!0,!1,b,c,d)};
function wg(a,b,c,d,e,f,g){function h(c,e){if(null==f[c])if(G(a.f,"empty object at "+c+" of "+f.length),p++,p==f.length)F(a.f,"success "+t),O(b,m,s);else{var R=c+2;R<f.length&&h(R,e)}var U;U=u(g)?Zd(k,f[c],g[c]):Zd(k,f[c]);R=n+Vd(k)+" ("+U.lc.join(", ")+") VALUES ("+U.zc.join(", ")+");";G(a.f,Q(b)+" SQL: "+R+" PARAMS: "+U.G+" REQ: "+c+" of "+f.length);e.executeSql(R,U.G,function(g,t){function R(c,d){var f=n+Ea("ydn.db.me:"+k.getName()+":"+c.getName())+" ("+k.a+", "+c.b+") VALUES (?, ?)",g=[sd(S,k.type),
d];G(a.f,Q(b)+" multiEntry "+f+" "+g);e.executeSql(f,g,aa(),function(b,c){E(a.f,"multiEntry index insert error: "+c.message);return!1})}p++;var S=u(U.key)?U.key:t.insertId;1>t.rowsAffected&&(s=!0,S=new Ee(S+" no-op"));for(var va=0,ld=k.indexes.length;va<ld;va++){var qb=k.index(va);if(qb.multiEntry)for(var Gb=pc(f[c],qb.keyPath),Bh=(Gb?Gb.length:0)||0,Xe=0;Xe<Bh;Xe++)R(qb,Gb[Xe])}d?O(b,S):(m[c]=S,p==f.length?O(b,m,s):(va=c+2,va<f.length&&h(va,g)))},function(e,g){p++;s=!0;6==g.code?g.name="ConstraintError":
E(a.f,"error: "+g.message+" "+t);if(d)O(b,g,!0);else if(m[c]=g,p==f.length)G(a.f,"success "+t),O(b,m,s);else{var k=c+2;k<f.length&&h(k,e)}return!1})}var k=V(a.a,e),n=c?"INSERT INTO ":"INSERT OR REPLACE INTO ";c=b.a;var m=[],p=0,t=Q(b)+" inserting "+f.length+" objects.",s=!1;if(0<f.length)for(e=0;2>e&&e<f.length;e++)h(e,c);else F(a.f,"success"),O(b,[])}q.bc=function(a,b,c,d){wg(this,a,!1,!1,b,c,d)};
q.$b=function(a,b,c){if(0==c.length)O(a,[]);else{for(var d=0,e=this,f=function(d,f){var g=[];G(e.f,"put "+f.length+" objects to "+d);for(var h,k=(h=!!V(e.a,d).keyPath)?void 0:[],m=0;m<f.length;m++)g.push(b[f[m]]),h||k.push(c[f[m]].id);wg(e,a,!1,!1,d,g,k)},g="",h=[],k=[],n=0;n<c.length;n++){var m=c[n].a,p=c[n].id;m!=g?(d++,0<h.length&&f(g,h),h=[n],k=[p],g=m):(h.push(n),k.push(p))}0<h.length&&f(g,h)}};
q.ob=function(a,b,c){var d=a.a,e=V(this.a,b),f=this;b=e.a;c=[sd(c,e.type)];b="SELECT * FROM "+Vd(e)+" WHERE "+b+" = ?";var g=Q(a)+" SQL: "+b+" PARAMS: "+c;G(this.f,g);d.executeSql(b,c,function(b,c){if(0<c.rows.length){var d=c.rows.item(0);null!=d?(d=pg(d,e),O(a,d)):(F(f.f,"success no result: "+g),O(a,void 0))}else F(f.f,"success no result: "+g),O(a,void 0)},function(b,c){E(f.f,"error: "+g+" "+c.message);O(a,c,!0);return!1})};
q.Vb=function(a,b,c){function d(b,e){var p=k.a,t=[sd(c[b],k.type)],s="SELECT * FROM "+Vd(k)+" WHERE "+p+" = ?";G(f.f,"SQL: "+s+" PARAMS: "+t);e.executeSql(s,t,function(e,f){h++;if(0<f.rows.length){var m=f.rows.item(0);null!=m&&(g[b]=pg(m,k))}else g[b]=void 0;h==c.length?O(a,g):(m=b+10,m<c.length&&d(m,e))},function(e,k){h++;E(f.f,"error: "+s+" "+k.message);if(h==c.length)O(a,g);else{var m=b+10;m<c.length&&d(m,e)}return!1})}var e=a.a,f=this,g=[],h=0,k=V(this.a,b);if(0<c.length)for(b=0;10>b&&b<c.length;b++)d(b,
e);else F(f.f,"success"),O(a,[])};q.ub=function(a,b,c,d,e,f){vg(this,a,!1,b,void 0,c,d,e,f,!1)};q.Ua=function(a,b,c,d,e,f,g,h){vg(this,a,!1,b,c,d,e,f,g,h)};
q.Xb=function(a,b){function c(d,h){var m=b[d],p=V(e.a,m.a),t=v(m.id)?m.id.join("^|"):m.id instanceof Date?+m.id:m.id,m=p.a,t=[sd(t,p.type)],s="SELECT * FROM "+Vd(p)+" WHERE "+m+" = ?";G(e.f,"SQL: "+s+" PARAMS: "+t);h.executeSql(s,t,function(h,m){g++;if(0<m.rows.length){var n=m.rows.item(0);null!=n&&(f[d]=pg(n,p))}else f[d]=void 0;g==b.length?(G(e.f,"success "+s),O(a,f)):(n=d+10,n<b.length&&c(n,h))},function(b,c){O(a,c,!0);return!1})}var d=a.a,e=this,f=[],g=0;if(0<b.length)for(var h=0;10>h&&h<b.length;h++)c(h,
d);else G(this.f,"success"),O(a,[])};
q.ib=function(a,b){function c(d,g){function h(a){a="DELETE FROM  "+Ea("ydn.db.me:"+k.getName()+":"+a.getName());G(e.f,"SQL: "+a);g.executeSql(a,[])}var k=V(e.a,b[d]),n="DELETE FROM  "+Vd(k);G(e.f,"SQL: "+n+" PARAMS: []");g.executeSql(n,[],function(g){d==b.length-1?(G(e.f,"success "+n),O(a,b.length)):c(d+1,g)},function(b,c){O(a,c,!0);return!1});for(var m=0,p=k.indexes.length;m<p;m++){var t=k.index(m);t.multiEntry&&h(t)}}var d=a.a,e=this;0<b.length?c(0,d):(G(this.f,"success"),O(a,0))};
q.dc=function(a,b){function c(h){if(h>=b.length)O(a,f,g);else{var k=V(e.a,b[h].a),n=sd(b[h].id,k.type),m=" WHERE "+k.a+" = ?",p="DELETE FROM "+Vd(k)+m,t=Q(a)+" SQL: "+p+" PARAMS: "+[n];d.executeSql(p,[n],function(){f++;c(h)},function(a,b){E(e.f,"error: "+t+b.message);g=!0;c(h);return!1});h++;for(var p=function(b){b="DELETE FROM  "+Ea("ydn.db.me:"+k.getName()+":"+b.getName())+m;G(e.f,Q(a)+NaN+b);d.executeSql(b,[n])},s=0,B=k.indexes.length;s<B;s++){var C=k.index(s);C.multiEntry&&p(C)}}}var d=a.a,e=
this,f=0,g=!1;G(this.f,Q(a)+" removeByKeys: "+b.length+" keys");c(0)};q.xb=function(a,b,c){function d(b){b="DELETE FROM  "+Ea("ydn.db.me:"+f.getName()+":"+b.getName())+k;G(h.f,Q(a)+NaN+b);e.executeSql(b,[g])}var e=a.a,f=V(this.a,b),g=sd(c,f.type),h=this,k=" WHERE "+f.a+" = ?";b="DELETE FROM "+Vd(f)+k;G(this.f,Q(a)+" SQL: "+b+" PARAMS: "+[g]);e.executeSql(b,[g],function(b,c){O(a,c.rowsAffected)},function(b,c){O(a,c,!0);return!1});b=0;for(c=f.indexes.length;b<c;b++){var n=f.index(b);n.multiEntry&&d(n)}};
q.Ob=function(a,b,c){xg(this,a,b,void 0,c)};q.yb=function(a,b,c){xg(this,a,b,void 0,c)};q.cc=function(a,b,c,d){xg(this,a,b,c,d)};
function xg(a,b,c,d,e){function f(c){c="DELETE FROM  "+Ea("ydn.db.me:"+h.getName()+":"+c.getName())+m;G(a.f,Q(b)+NaN+c);g.executeSql(c,n)}var g=b.a,h=V(a.a,c);c="DELETE FROM "+Vd(h);var k=[],n=[],m="";null!=e&&(u(d)?(d=Ud(h,d),rd(d.b,d.type,e,n,k)):rd(h.a,h.type,e,n,k),m=" WHERE "+n.join(" AND "));c+=m;var p=Q(b)+" SQL: "+c+" PARAMS: "+k;G(a.f,p);g.executeSql(c,k,function(c,d){G(a.f,"success "+p);O(b,d.rowsAffected)},function(c,d){E(a.f,"error: "+p+d.message);O(b,d,!0);return!1});e=0;for(d=h.indexes.length;e<
d;e++)c=h.index(e),c.multiEntry&&f(c)}q.kb=function(a,b){function c(g){var h="SELECT COUNT(*) FROM "+Ea(b[g]);G(e.f,"SQL: "+h+" PARAMS: []");d.executeSql(h,[],function(d,e){var h=e.rows.item(0);f[g]=parseInt(h["COUNT(*)"],10);g++;g==b.length?O(a,f):c(g)},function(b,c){O(a,c,!0);return!1})}var d=a.a,e=this,f=[];0==b.length?(G(this.f,"success"),O(a,0)):c(0)};
q.za=function(a,b,c,d,e){var f=[];b=Sd(V(this.a,b),f,4,d,c,!1,e);G(this.f,Q(a)+" SQL: "+b+" PARAMS: "+f);a.a.executeSql(b,f,function(b,c){var d=c.rows.item(0);O(a,yg(d))},function(b,c){O(a,c,!0);return!1})};function zg(a,b){Rf.call(this,a,b)}D(zg,ug);q=zg.prototype;q.f=H("ydn.db.core.req.WebSql");q.Tb=function(a,b,c,d){Ag(this,a,b,1,c,d)};q.Qb=function(a,b){Ag(this,a,b,3,1,0)};q.Wb=function(a,b,c,d){Ag(this,a,b,2,c,d)};
function Ag(a,b,c,d,e,f){var g=b.a,h=Q(b),k=[],n=h+" "+(1==d?"keys":2==d?"values":4==d?"count":"")+"ByIterator "+c;0<e&&(n+=" limit "+e);F(a.f,n);var m=Qf(c,g,h,a,d);m.e=function(a){Kf(m);O(b,a,!0)};var p=0,t=!1;m.d=function(g){if(u(g)){var h=m.T(),C=m.ja();!t&&0<f?(m.advance(f),t=!0):(p++,k.push(1==d?g:c.d&&c.b?h:C),!u(e)||p<e?m.a[0].va(void 0):(Kf(m),F(a.f,"success:"+n+" "+k.length+" records"),g=3==d?k[0]:k,O(b,g)))}else Kf(m),F(a.f,"success:"+n+" "+k.length+" records"),g=3==d?k[0]:k,O(b,g)}}
q.pb=function(a,b,c,d,e,f,g,h){var k=V(this.a,c);u(d)&&(d=this.W(k,d));return new og(a,b,k,c,d,e,f,g,h)};function Bg(a){this.d=a;this.a=null;this.b=0}Bg.prototype.e=H("ydn.db.tr.Mutex");Bg.prototype.O=null;Bg.prototype.K=null;Bg.prototype.toString=function(){return"Mutex:"+("B"+this.d+"T"+this.b)+(this.a?"*":"")};function Cg(a,b,c,d,e,f){this.i=a;this.c=0;this.j=d;this.g=c||"single";this.b=[];this.d=[];this.e=null;this.a=new Bg(b);this.Jb=f||0;this.h=!1}q=Cg.prototype;q.Jb=0;q.H=H("ydn.db.tr.Serial");q.hb=function(){return this.a.b};
function Dg(a,b,c){if("multi"==a.g)a:if(a=a.a,!a.O||!a.mode||c!=a.mode&&(a.mode!=K||c!=J)||b.length>a.O.length)b=!1;else{for(c=0;c<b.length;c++)if(-1==a.O.indexOf(b[c])){b=!1;break a}b=!0}else if("repeat"==a.g)a:if(a=a.a,a.O&&a.mode&&c==a.mode&&a.O.length==b.length){for(c=0;c<b.length;c++)if(-1==a.O.indexOf(b[c])){b=!1;break a}b=!0}else b=!1;else b="all"==a.g?!0:!1;return b}q.type=function(){return this.i.j()};
function Eg(a){var b=0<a.b.length?a.b[0].O:null,c=0<a.b.length?a.b[0].mode:null;return null!=b&&null!=c?Dg(a,b,c):!1}function Fg(a,b,c,d,e){G(a.H,"push tx queue["+a.b.length+"]");a.b.push({nb:b,O:c,mode:d,K:e})}
q.pa=function(a,b,c,d){var e=x(b)?[b]:b;if(w(e)){if(0==e.length)throw new M("number of store names must more than 0");for(var f=0;f<e.length;f++){if(!x(e[f]))throw new M("store name at "+f+" must be string but found "+e[f]+" of type "+typeof e[f]);if(this.j&&!(0<=Ia(this.j,e[f])))throw new M('store name "'+f+e[f]+'" in scope of '+this);}}else throw new M("store names must be an array");var g=u(c)?c:J,h=this;if(this.a.a||(!this.i.a||!this.i.a.bb())&&this.h)Fg(this,a,b,g,d);else{var k=this.F();d&&this.d.push(d);
if(this.Jb&&this.hb()>=this.Jb)throw new Dd("Exceed maximum number of transactions of "+this.Jb);this.h=!0;this.i.ua(function(c){var d=h.a;d.a=c;d.c=!1;d.O=b;d.mode=g;d.b++;d.K=null;k=h.F();$b(h.H,k+" BEGIN "+T(b)+" "+g);a(h);for(a=null;Eg(h);)c=h.b.shift(),c.K&&h.d.push(c.K),G(h.H,"pop tx queue"+(h.b.length+1)+" reusing T"+h.hb()),c.nb()},e,g,function(a,b){$b(h.H,k+" "+a);var c=h.a;c.a?(c.a=null,c.O=null,c.mode=null,fa(c.K)&&c.K(a,b),c.K=null):E(c.e,c+" has no TX to be unlocked for "+a);for(c=0;c<
h.d.length;c++)(0,h.d[c])(a,b);h.d.length=0;(c=h.b.shift())&&h.pa(c.nb,c.O,c.mode,c.K);h.c=0})}};q.F=function(){return"B"+this.a.d+"T"+this.a.b};q.l=function(a,b,c,d){var e=new ud(a);a=c||J;var f=this;this.a.a&&!this.a.c&&Dg(this,b,a)?(b=this.a.a,this.c++,vd(e,b,this.F()+"R"+this.c),d&&this.d.push(d)):f.pa(function(){var a=f.a.a;f.c++;vd(e,a,f.F()+"R"+f.c)},b,a,d);return e};
q.ca=function(a,b,c,d,e){d=d||J;var f=this,g;if(f.a.a&&!f.a.c&&Dg(this,c,d)){var h=f.a.a;f.c++;g=f.F()+"R"+f.c;F(f.H,g+" BEGIN");b(h,g,function(b,c){f.e=h;c?(F(f.H,g+" ERROR"),a.t(b)):(F(f.H,g+" SUCCESS"),a.v(b));f.e=null});F(f.H,g+" END");b=null}else f.pa(function(){var c=f.a.a;f.c++;g=f.F()+"R"+f.c;F(f.H,g+" BEGIN");b(c,g,function(b,d){f.e=c;d?(F(f.H,g+" ERROR"),a.t(b)):(F(f.H,g+" SUCCESS"),a.v(b));f.e=null});F(f.H,g+" END");b=null},c,d,e)};q.getName=function(){return this.i.getName()};
q.toString=function(){return"Serial:"+this.F()+(this.e?"*":"")};function Gg(a,b){Cg.call(this,a,b)}D(Gg,Cg);Gg.prototype.H=H("ydn.db.tr.AtomicSerial");Gg.prototype.l=function(a,b,c){var d,e,f,g=Gg.u.l.call(this,a,b,c,function(a,b){g.a=null;if(d)"complete"!=a&&(f=!0,e=b),d(e,f);else{var c=new Ce;O(g,c,!0)}});yd(g,function(a,b,c){f=b;e=a;d=c});return g};
Gg.prototype.ca=function(a,b,c,d,e){var f,g,h=new I;h.ea(function(a){g=!1;f=a},function(a){g=!0;f=a});Gg.u.ca.call(this,h,b,c,d,function(b,c){if("complete"!=b)a.t(c);else if(!0===g)a.t(f);else if(!1===g)a.v(f);else{var d=new Ce;a.t(d)}e&&(e(b,c),e=void 0)})};Gg.prototype.toString=function(){return"Atomic"+Gg.u.toString.call(this)};function Hg(a,b,c){this.i=a;this.b=b;this.a=c;this.c=null}Hg.prototype.k=H("ydn.db.tr.DbOperator");Hg.prototype.d=function(){return this.a.hb()};function Z(a){a.c||(a.c=a.i.Yb());return a.c}Hg.prototype.toString=function(){return"TxStorage:"+this.i.getName()};function Ig(a,b,c){Hg.call(this,a,b,c)}D(Ig,Hg);q=Ig.prototype;q.k=H("ydn.db.crud.DbOperator");
q.count=function(a,b,c,d){var e,f,g,h;if(null!=a)if(v(a)){if(u(c)||u(b))throw new M("too many arguments.");f=a;for(var k=0;k<f.length;k++)if(!qe(this.b,f[k]))throw new M('store name "'+f[k]+'" at '+k+" not found.");F(this.k,"countStores: "+T(f));e=this.a.l("count",f);P(e,function(){Z(this).kb(e,f)},this)}else if(x(a)){k=V(this.b,a);if(!k)throw new M('store name "'+a+'" not found.');if(u(d)&&!ea(d))throw new TypeError('unique value "'+d+'" must be boolean, but found '+typeof d+".");f=[a];if(x(b))if(g=
b,z(c)){var n=pd(c);if(n)throw new M("invalid key range: "+ke(c)+" "+n);h=nd(c)}else{if(null!=c)throw new M("invalid key range: "+ke(c)+" of type "+typeof c);h=null}else if(z(b)||!u(b))if(z(b)){if(n=pd(b))throw new M("invalid key range: "+ke(b)+" "+n);h=nd(b)}else{if(null!=b)throw new M("key range must be  an object but found "+ke(b)+" of type "+typeof b);h=null}else throw new M("key range must be an object, but "+ke(c)+" of type "+typeof b+" found.");F(this.k,"countKeyRange: "+a+" "+(g?g:"")+T(h));
e=this.a.l("count",f);be(k,e,arguments);P(e,function(){Z(this).za(e,f[0],h,g,!!d)},this)}else throw new M("Invalid store name or store names.");else E(this.k,"count method requires store name(s)"),k=pe(this.b),e=this.a.l("count",k),yd(e,function(a,b,c){if(b)c(a,!0);else{for(var d=b=0;d<a.length;d++)b+=a[d];c(b,!1)}},this),P(e,function(){Z(this).kb(e,f)},this);return e};
q.La=function(a,b){var c;if(a instanceof id){var d=a,e=d.a,f=V(this.b,e);if(!f){if(this.b.Q())return Ad("get",void 0);throw new M("Store: "+e+" not found.");}var g=d.id;F(this.k,"getByKey: "+e+":"+g);c=this.a.l("get",[e]);be(f,c,arguments);P(c,function(){Z(this).ob(c,e,g)},this)}else if(x(a)&&u(b)){var h=a,f=V(this.b,h);if(!f){if(this.b.Q())return Ad("get",void 0);throw new M('Store name "'+h+'" not found.');}var k=b;F(this.k,"getById: "+h+":"+k);c=this.a.l("get",[h]);be(f,c,arguments);P(c,function(){Z(this).ob(c,
h,k)},this)}else throw new M("get require valid input arguments.");return c};
q.keys=function(a,b,c,d,e,f){var g,h,k=null,n=!1,m=V(this.b,a);if(!x(a))throw new M("store name must be a string, but "+a+" of type "+typeof a+" is not.");if(!this.b.Q()){if(!m)throw new M('store name "'+a+'" not found.');if(x(b)&&!Ud(m,b))throw new M('index "'+b+'" not found in store "'+a+'".');}if(this.b.Q()&&!m)return Ad("keys",[]);var p;if(x(b)){if(m=pd(c))throw new M("invalid key range: "+c+" "+m);k=nd(c);if(y(d))g=d;else{if(u(d))throw new M("limit must be a number");g=100}if(y(e))h=e;else{if(u(e))throw new M("offset must be a number");
h=0}if(u(f))if(ea)n=f;else throw new M("reverse must be a boolean");F(this.k,"keysByIndexKeyRange: "+a);p=this.a.l("keys:iter:index",[a]);P(p,function(){Z(this).Sb(p,a,b,k,n,g,h,!1)},this)}else{if(z(b)){if(m=pd(b))throw new M("invalid key range: "+ke(b)+" "+m);k=nd(b)}else{if(null!=b)throw new TypeError("invalid key range: "+ke(b)+" of type "+typeof b);k=null}if(y(c))g=c;else{if(u(c))throw new M("limit must be a number");g=100}if(y(d))h=d;else{if(u(d))throw new M("offset must be a number");h=0}if(u(e))if(ea(e))n=
e;else throw new M("reverse must be a boolean");F(this.k,"keysByKeyRange: "+a);p=this.a.l("keys",[a]);P(p,function(){Z(this).Ub(p,a,k,n,g,h)},this)}return p};
q.G=function(a,b,c,d,e,f){var g,h,k,n=!1;if(x(a)){var m=a,p=V(this.b,m);if(!p){if(this.b.Q())return Ad("get",[]);throw new Ie(m);}if(v(b)){if(u(c)||u(d))throw new M("too many input arguments");var t=b;F(this.k,"listByIds: "+m+" "+t.length+" ids");g=this.a.l("values:array",[m]);be(p,g,arguments);P(g,function(){Z(this).Vb(g,m,t)},this)}else if(x(b)){var s=b;if(!Wd(p,s))throw new M('index "'+s+'" not found in store "'+m+'"');var B=pd(c);if(B)throw new M("invalid key range: "+c+" "+B);var C=nd(c);if(u(d))if(y(d))h=
d;else throw new M("limit must be a number.");else h=100;if(u(e))if(y(e))k=e;else throw new M("offset must be a number.");else k=0;if(ea(f))n=f;else if(u(f))throw new M("reverse must be a boolean, but "+f);F(this.k,"listByIndexKeyRange: "+m+":"+s);g=this.a.l("values:iter:index",[m]);be(p,g,arguments);P(g,function(){Z(this).Ua(g,m,s,C,n,h,k,!1)},this)}else{C=null;if(z(b)){if(B=pd(b))throw new M("invalid key range: "+b+" "+B);C=nd(b)}else if(null!=b)throw new TypeError('expect key range object, but found "'+
ke(b)+'" of type '+typeof b);if(u(c))if(y(c))h=c;else throw new M("limit must be a number, but "+c+" is "+typeof c);else h=100;if(u(d))if(y(d))k=d;else throw new M("offset must be a number, but "+d+" is "+typeof d);else k=0;if(u(e))if(ea(e))n=e;else throw new M("reverse must be a boolean, but "+e+" is "+typeof e);F(this.k,(C?"listByKeyRange: ":"listByStore: ")+m);g=this.a.l("values",[m]);be(p,g,arguments);P(g,function(){Z(this).ub(g,m,C,n,h,k)},this)}}else if(v(a))if(a[0]instanceof id){for(var p=
[],R=a,B=0;B<R.length;B++){var U=R[B].a;if(!qe(this.b,U)){if(this.b.Q())return p=[],p[R.length-1]=void 0,Ad("get",p);throw new M("Store: "+U+" not found.");}0<=Ia(p,U)||p.push(U)}F(this.k,"listByKeys: "+T(p)+" "+R.length+" keys");g=this.a.l("values:keys",p);P(g,function(){Z(this).Xb(g,R)},this)}else throw new M("first argumentmust be array of ydn.db.Key, but "+a[0]+" of "+typeof a[0]+" found.");else throw new M("first argument "+a+" is invalid.");return g};
q.Gb=function(a,b,c){var d=x(a)?a:z(a)?a.name:void 0;if(!x(d))throw new M("store name "+d+" must be a string, but "+typeof d);var e=V(this.b,d);if(!e){if(!this.b.Q())throw new M('store name "'+d+'" not found.');e=Rd(z(a)?a:{name:d});F(this.k,"Adding object store: "+d);Jg(this.i,e)}else if(this.b.Q()&&z(a)&&(a=Rd(a),a=$d(e,a)))throw new wd(a);var f;if(!e)throw new M('store name "'+d+'" not found.');if(x(e.keyPath)&&u(c))throw new M("key must not be provided while the store uses in-line key.");if(!e.keyPath&&
!e.autoIncrement&&!u(c))throw new M("out-of-line key must be provided.");if(v(b)){F(this.k,"addObjects: "+d+" "+b.length+" objects");for(a=0;a<b.length;a++)ae(e,b[a]);f=this.a.l("add:array",[d],K);P(f,function(){Z(this).Lb(f,d,b,c)},this);e.na&&f.da(function(a){fd(this.i,new Kg(Lg,this.i,e.getName(),a,b))},this)}else if(z(b))a="store: "+d+" key: "+Xd(e,b,c),F(this.k,"addObject: "+a),ae(e,b),f=this.a.l("add",[d],K),P(f,function(){Z(this).Kb(f,d,b,c)},this),e.na&&f.da(function(a){fd(this.i,new Mg(Lg,
this.i,e.getName(),a,b))},this);else throw new M("record must be an object or array list of objects, but "+b+" of type "+typeof b+" found.");return f};function Ng(a,b){var c=x(b)?b:z(b)?b.name:void 0;if(!x(c))throw new M("store name must be a string");var d=V(a.b,c);if(!d){if(!a.b.Q())throw new Ie(c);d=Rd(z(b)?b:{name:c});F(a.k,"Adding object store: "+c);Jg(a.i,d)}else if(a.b.Q()&&z(b)){var e=Rd(b);if(e=$d(d,e))throw new wd(e);}if(!d)throw new Ie(c);return d}
q.Ma=function(a,b,c){var d,e=this;if(a instanceof id){var f=a,g=f.a,h=V(this.b,g);if(!h)throw new M('store "'+g+'" not found.');if(h.keyPath){var k=Xd(h,b);if(null!=k){if(0!=N(k,f.id))throw new M("Inline key must be "+f+" but "+k+" found.");}else Yd(h,b,f.id);return this.Ma(g,b)}return this.Ma(g,b,f.id)}if(v(a)){if(u(c))throw new M("too many arguments");var n=a;if(!u(b))throw new M("record values required");for(var m=b,f=[],g=0,h=n.length;g<h;g++){k=n[g].a;-1==Ia(f,k)&&f.push(k);var p=V(this.b,k);
if(!p)throw new M('store "'+k+'" not found.');p.keyPath&&Yd(p,m[g],n[g].id)}F(this.k,"putByKeys: to "+T(f)+" "+m.length+" objects");for(g=0;g<m.length;g++)ae(p,m[g]);d=this.a.l("put:keys",f,K);be(p,d,arguments);P(d,function(){Z(e).$b(d,m,n)},this)}else if(x(a)||z(a)){var p=Ng(this,a),t=p.getName();if(p.keyPath&&u(c))throw new M("key must not be provided while the store uses in-line key.");if(!p.keyPath&&!p.autoIncrement&&!u(c))throw new M("out-of-line key must be provided.");if(v(b)){var s=b,B=c;
F(this.k,"putObjects: "+t+" "+s.length+" objects");for(g=0;g<s.length;g++)ae(p,s[g]);d=this.a.l("put:array",[t],K);be(p,d,arguments);P(d,function(){Z(this).bc(d,t,s,B)},this);p.na&&d.da(function(a){fd(this.i,new Kg(Og,this.i,t,a,s))},this)}else if(z(b)){var C=b,R=c;F(this.k,"putObject: "+t+" "+R);ae(p,C);d=this.a.l("put",[t],K);be(p,d,arguments);P(d,function(){Z(e).ac(d,t,C,R)},this);p.na&&d.da(function(a){fd(this.i,new Mg(Og,this.i,t,a,C))},this)}else throw new M("put record value must be Object or array of Objects");
}else throw new M("the first argument of put must be store name, store schema or array of keys.");return d};
q.clear=function(a,b,c){if(u(c))throw new M("too many input arguments");var d;if(x(a)){if(!V(this.b,a))throw new M('store name "'+a+'" not found.');if(z(b)){var e=nd(b);if(null===e)throw new M("clear method requires a valid non-null KeyRange object.");F(this.k,"clearByKeyRange: "+a+":"+T(e));d=this.a.l("clear",[a],K);P(d,function(){Z(this).Ob(d,a,e)},this)}else{if(u(b))throw new M("clear method requires a valid KeyRange object as second argument, but found "+b+" of type "+typeof b);F(this.k,"clearByStore: "+
a);d=this.a.l("clear",[a],K);P(d,function(){Z(this).ib(d,[a])},this)}}else if(!u(a)||v(a)&&x(a[0])){var f=a||pe(this.b);F(this.k,"clearByStores: "+T(f));d=this.a.l("clear",f,K);P(d,function(){Z(this).ib(d,f)},this)}else throw new M('first argument "'+a+'" is invalid.');return d};
q.Hb=function(a,b,c){var d;if(x(a)){var e=V(this.b,a);if(!e)throw new M('store name "'+a+'" not found.');if(u(c))if(x(b)){var f=Ud(e,b);if(!f)throw new M("index: "+b+" not found in "+a);if(z(c)||null===c){var g=nd(c);F(this.k,"removeByIndexKeyRange: "+a+":"+f.getName()+" "+a);d=this.a.l("rm:iter:index",[a],K);P(d,function(){Z(this).cc(d,a,f.getName(),g)},this)}else throw new M("key range "+c+' is invalid type "'+typeof c+'".');}else throw new M('index name "'+b+'" must be a string, but '+typeof b+
" found.");else if(x(b)||y(b)||w(b)||b instanceof Date)F(this.k,"removeById: "+a+":"+b),d=this.a.l("rm",[a],K),P(d,function(){Z(this).xb(d,a,b)},this),e.na&&d.da(function(b){fd(this.i,new Mg(Pg,this.i,a,b,void 0))},this);else if(z(b))g=nd(b),F(this.k,"removeByKeyRange: "+a+":"+T(g)),d=this.a.l("rm:iter",[a],K),P(d,function(){Z(this).yb(d,a,g)},this),e.na&&d.da(function(b){fd(this.i,new Kg(Pg,this.i,a,b,void 0))},this);else throw new M('Invalid key or key range "'+b+'" of type '+typeof b);}else if(a instanceof
id)d=this.a.l("rm",[a.a],K),P(d,function(){Z(this).xb(d,a.a,a.id)},this);else if(v(a)){c=[];for(var e=0,h=a.length;e<h;e++){if(!(a[e]instanceof id))throw new M("key list element at "+e+" of "+h+' must be yn.db.Key, but "'+ke(a[e])+'" ('+da(a[e])+") is not ydn.db.Key.");var k=a[e].a;-1==Ia(c,k)&&c.push(k)}if(1>c.length)throw new M('at least one valid key required in key list "'+ke(a)+'"');d=this.a.l("rm:keys",c,K);P(d,function(){Z(this).dc(d,a)},this)}else throw new M('first argument requires store name, key (ydn.db.Key) or list of keys (array) , but "'+
ke(a)+'" ('+da(a)+") found.");return d};q.toString=function(){return"DbOperator:"+this.i.getName()};function Qg(a,b,c){Hg.call(this,a,b,c)}D(Qg,Ig);q=Qg.prototype;q.k=H("ydn.db.core.DbOperator");q.La=function(a,b){if(a instanceof X){var c=a.M,d=V(this.b,c);if(!d)throw new M('store "'+c+'" not found.');var e=a.W();if(u(e)&&!Wd(d,e))throw new M('index "'+e+'" not found in store "'+c+'".');F(this.k,"getByIterator:"+a);var f=this.a.l("get:iter",[c]);P(f,function(){Z(this).Qb(f,a)},this);return f}return Qg.u.La.call(this,a,b)};
q.keys=function(a,b,c,d,e){if(a instanceof X){var f=100;if(y(b)){if(f=b,1>f)throw new M("limit must be a positive value, but "+b);}else if(u(b))throw new M("limit must be a number,  but "+b);if(u(c))throw new M("offset must not be specified");F(this.k,"keysByIterator:"+a);var g=this.a.l("keys:iter",a.stores());P(g,function(){Z(this).Tb(g,a,f)},this);return g}return Qg.u.keys.call(this,a,b,c,d,e)};
q.count=function(a,b,c){if(a instanceof X){if(u(b)||u(c))throw new M("too many arguments.");F(this.k,"countKeyRange:"+a);var d=this.a.l("count",a.stores());P(d,function(){Z(this).za(d,a.M,a.Tc(),a.W(),a.Xa())},this);return d}return Qg.u.count.call(this,a,b,c)};
q.G=function(a,b,c,d,e,f){if(a instanceof X){var g;if(y(b)){if(g=b,1>g)throw new M("limit must be a positive value, but "+g);}else if(u(b))throw new M("limit must be a number, but "+b);if(u(c))throw new M("offset must not be specified");F(this.k,"listByIterator:"+a);var h=this.a.l("values:iter",a.stores());P(h,function(){Z(this).Wb(h,a,g)},this);return h}return Qg.u.G.call(this,a,b,c,d,e,f)};
q.Ec=function(a,b){var c=new I;if(u(b)){if(!v(b))throw new TypeError("Iterator argument must be an array.");for(var d=0;d<b.length;d++)if(!(b[d]instanceof X))throw new TypeError("Iterator at "+d+" must be cursor range iterator.");}var e;e=b?b:null;for(var f=[],d=0;d<e.length;d++)for(var g=e[d].stores(),h=0;h<g.length;h++)0<=Ia(f,g[h])||f.push(g[h]);G(this.k,this+": scan for "+e.length+" iterators on "+f);var k=this;this.a.ca(c,function(b,c,d){function f(){for(var a=0,d=0;d<e.length;d++){var p=Qf(e[d],
b,c,Z(k));p.e=g;p.d=ma(h,a);S[d]=p;qa[a]=d;a++}U=e.length}function g(a){for(var b=0;b<S.length;b++)Kf(S[b]);Qa(S);F(k.k,C+" error");d(a,!0)}function h(b,c){if(R)throw new ue;va++;var f=va===U,g=qa[b],m=e[g],n=S[g],g=n.T(),n=n.ja();La[b]=c;Ma[b]=m.d?m.b?g:n:m.b?c:n;if(f){var t;t=a instanceof Zf?a.c(La,Ma):a(La,Ma);f=[];m=[];g=[];n=[];if(v(t))for(var s=0;s<t.length;s++)!0===t[s]?g[s]=1:!1===t[s]?n[s]=!0:m[s]=t[s];else if(null===t)f=[];else if(u(t))if(z(t)){f=["advance","continue","continuePrimary",
"restart"];for(s in t)if(!(0<=Ia(f,s)))throw new Dd('Unknown attribute "'+s+'" in cursor advancement object');f=t.continuePrimary||[];m=t["continue"]||[];g=t.advance||[];n=t.restart||[]}else throw new ve("scan callback output");else for(f=[],s=0;s<e.length;s++)u(qa[s])&&(g[s]=1);for(s=va=t=0;s<e.length;s++)null!=f[s]||(u(m[s])||null!=n[s]||null!=g[s])||va++;for(s=0;s<e.length;s++)if(null!=f[s]||u(m[s])||null!=n[s]||null!=g[s]){var B=qa[s];if(!u(B))throw new ve(s+" is not an iterator.");var B=e[B],
Ib=S[s];if(null==La[s]){var We=s+"/"+e.length;if(null!=g[s])throw new we(Ib+" "+We+" must not advance "+g[s]+" steps");if(u(m[s]))throw new we(Ib+" "+We+" must not continue to key "+m[s]);if(null!=f[s])throw new we(Ib+" "+We+" must not continue to primary key "+f[s]);}La[s]=void 0;Ma[s]=void 0;if(null!=n[s])B=Ib,B.N=!1,B.a[0].gb(void 0,void 0);else if(u(m[s]))Ib.a[0].va(m[s]);else if(null!=f[s])Ib.a[0].fb(f[s]);else if(null!=g[s])Ib.advance(1);else throw new ue(B+": has no action");t++}if(0==t){for(f=
0;f<S.length;f++)Kf(S[f]);R=!0;Qa(S);F(k.k,"success "+C);d(void 0)}}}var C=c+" "+k+" scanning";G(k.k,C);var R=!1,U,qa=[],La=[],Ma=[],S=[],va=0;a instanceof Zf?a.b(e,function(){f()})||f():f()},f,J);return c};
q.Dc=function(a,b,c){if(!(b instanceof X))throw new M("Second argument must be cursor range iterator.");if(!V(this.b,b.M))throw new M('Store "'+b.M+'" not found.');c=c||J;var d=this,e=new I;F(this.k,"open:"+c+" "+b);this.a.ca(e,function(c,e,h){G(d.k,e+" iterating "+b);var k=Qf(b,c,e,Z(d));k.e=function(a){h(a,!0)};k.d=function(b){if(null!=b){var c=a(k);!0===c?(k.N=!1,k.a[0].gb(void 0,void 0)):z(c)?!0===c.restart?(b=c["continue"],c=c.continuePrimary,k.N=!1,k.a[0].gb(c,b)):null!=c["continue"]?k.a[0].va(c["continue"]):
null!=c.continuePrimary?k.a[0].fb(c.continuePrimary):(Kf(k),h(void 0)):k.advance(1)}else Kf(k),h(void 0)}},b.stores(),c);return e};q.map=function(a,b){for(var c=this,d=a.stores(),e,f=0;e=d[f];f++)if(!e)throw new M('Store "'+e+'" not found.');e=new I;G(this.k,"map:"+a);this.a.ca(e,function(d,e,f){G(c.k,e+" iterating "+a);var n=Qf(a,d,e,Z(c));n.e=function(a){f(a,!1)};n.d=function(c){null!=c?(b(a.d?a.b?c:n.T():a.b?c:n.ja()),n.advance(1)):(f(void 0),b=null)}},d,J);return e};
q.Eb=function(a,b,c){for(var d=this,e=a.stores(),f,g=0;f=e[g];g++)if(!f)throw new M('Store "'+f+'" not found.');f=new I;var h=z(c)?je(T(c)):c;F(this.k,"reduce:"+a);this.a.ca(f,function(c,e,f){var g=Qf(a,c,e,Z(d));g.e=function(a){f(a,!0)};var t=0;g.d=function(c){null!=c?(h=b(h,a.d?a.b?c:g.T():a.b?c:g.ja(),t++),g.advance(1)):f(h)}},e,J);return f};var Lg="created",Pg="deleted",Og="updated";function Rg(a,b){Fc.call(this,a,b)}D(Rg,Fc);Rg.prototype.e=l("c");function Sg(a,b,c,d,e){Fc.call(this,a,b);this.version=c;this.Gc=d;this.wc=e}D(Sg,Rg);q=Sg.prototype;q.name="ReadyEvent";q.version=NaN;q.Gc=NaN;q.wc=null;q.sd=l("version");q.Rc=l("Gc");q.Qc=l("wc");function Tg(a,b,c){Fc.call(this,c||"error",a);this.error=b}D(Tg,Rg);Tg.prototype.name="ErrorEvent";Tg.prototype.error=null;Tg.prototype.g=l("error");function Ug(a,b){Tg.call(this,a,b,"fail")}
D(Ug,Tg);Ug.prototype.name="FailEvent";function Mg(a,b,c,d,e){Fc.call(this,a,b);this.c=c;this.key=d;this.value=e}D(Mg,Rg);Mg.prototype.name="RecordEvent";Mg.prototype.g=l("key");Mg.prototype.h=l("value");function Kg(a,b,c,d,e){Fc.call(this,a,b);this.c=c;this.keys=d;this.G=e}D(Kg,Rg);Kg.prototype.name="StoreEvent";Kg.prototype.oa=l("keys");Kg.prototype.qb=l("G");function Ae(a,b){oe.call(this,a,b)}D(Ae,oe);Ae.prototype.Q=ba(!0);function Be(a,b){a.stores.push(b)};function Pd(a,b){var c;c=c||{};if(null!=a&&null!=b){if(w(a)&&w(b)){if(a.length!=b.length)return!1;for(var d=0;d<a.length;d++)if(-1==Oa(b,function(b){return Pd(b,a[d])}))return!1;return!0}if(w(a))return 1==a.length&&Pd(a[0],b);if(w(b))return 1==b.length&&Pd(b[0],a);if(z(a)&&z(a)){for(var e in a)if(a.hasOwnProperty(e)&&!c[e]){var f=Pd(a[e],b[e]);if(!f)return!1}for(e in b)if(b.hasOwnProperty(e)&&!c[e]&&(f=Pd(a[e],b[e]),!f))return!1;return!0}return a===b}return!1}
function yg(a){if(a)for(var b in a)if(a.hasOwnProperty(b))return a[b]};function Vg(){};function Wg(){}D(Wg,Vg);Wg.prototype.Qa=function(){var a=0;cb(this.xa(!0),function(){a++});return a};Wg.prototype.clear=function(){var a=db(this.xa(!0)),b=this;Ja(a,function(a){b.D.removeAttribute(Xg(a));Yg(b)})};function Zg(a,b){if(pb&&!(pb&&9<=Db)){$g||($g=new eb);var c=$g;this.D=Object.prototype.hasOwnProperty.call(c.b,a)?c.b[a]:void 0;this.D||(b?this.D=document.getElementById(b):(this.D=document.createElement("userdata"),this.D.addBehavior("#default#userData"),document.body.appendChild(this.D)),fb($g,a,this.D));this.ec=a;try{this.D.load(this.ec)}catch(d){this.D=null}}}D(Zg,Wg);var ah={".":".2E","!":".21","~":".7E","*":".2A","'":".27","(":".28",")":".29","%":"."},$g=null;q=Zg.prototype;q.D=null;q.ec=null;
function Xg(a){return"_"+encodeURIComponent(a).replace(/[.!~*'()%]/g,function(a){return ah[a]})}q.Qa=function(){return bh(this).attributes.length};q.xa=function(a){var b=0,c=bh(this).attributes,d=new ab;d.a=function(){if(b>=c.length)throw $a;var d=c[b++];if(a)return decodeURIComponent(d.nodeName.replace(/\./g,"%")).substr(1);d=d.nodeValue;if(!x(d))throw"Storage mechanism: Invalid value was encountered";return d};return d};
q.clear=function(){for(var a=bh(this),b=a.attributes.length;0<b;b--)a.removeAttribute(a.attributes[b-1].nodeName);Yg(this)};function Yg(a){try{a.D.save(a.ec)}catch(b){throw"Storage mechanism: Quota exceeded";}}function bh(a){return a.D.XMLDocument.documentElement};function ch(){zf.call(this,this)}D(ch,zf);ch.prototype.jb=function(a){return new dh(a)};ch.prototype.ta=ba("userdata");function dh(a){this.i=new Zg(a);this.length=this.keys().length}q=dh.prototype;q.length=0;q.clear=function(){this.i.clear();this.a=[]};q.keys=function(){this.a||(this.a=[],cb(this.i,function(a){this.a.push(a)},this));return this.a};q.key=function(a){return this.keys()[a]};q.setItem=function(a,b){this.a&&this.a.push(a);var c=this.i;c.D.setAttribute(Xg(a),b);Yg(c)};
q.getItem=function(a){a=this.i.D.getAttribute(Xg(a));if(!x(a)&&null!==a)throw"Storage mechanism: Invalid value was encountered";return u(a)?a:null};q.removeItem=function(a){this.a=null;var b=this.i;b.D.removeAttribute(Xg(a));Yg(b)};/*
 Copyright 2012 YDN Authors, Yathit. All Rights Reserved.
 Licensed under the Apache License, Version 2.0 (the "License");.
*/
function Y(a,b,c){ed.call(this);c=c||{};var d="autoSchema connectionTimeout size mechanisms policy isSerial".split(" "),e;for(e in c)if(c.hasOwnProperty(e)&&-1==Ia(d,e))throw new M('Unknown attribute "'+e+'" in options.');if(c.mechanisms){if(!v(c.mechanisms))throw new M("mechanisms attribute must be an array but "+da(c.mechanisms)+" found.");for(e=0;e<c.mechanisms.length;e++)if(!(0<=Ia(eh,c.mechanisms[e])))throw new M('Invalid mechanism "'+c.mechanisms[e]+'"');}this.Wc=c.mechanisms||eh;this.xc=c.size;
this.Zc=u(c.connectionTimeout)?c.connectionTimeout:3E4;this.Ac=u(c.Ac)?c.Ac:!1;this.a=null;this.h=[];this.tb=!1;if(b instanceof oe)c=b;else if(z(b))for(c=c.autoSchema||!u(b.stores)?new Ae(b):new oe(b),d=b.stores?b.stores.length:0,e=0;e<d;e++){var f=V(c,b.stores[e].name);b.stores[e].Sync&&E(this.e,"Synchronization option for "+f.getName()+" ignored.")}else c=new Ae;this.b=c;u(a)&&this.R(a)}D(Y,ed);Y.prototype.e=H("ydn.db.con.Storage");
Y.prototype.bd=function(a){if(u(a)){var b=function(b){a(b.toJSON())};if(this.a)this.a.P(b);else{var c=this;this.ua(function(a){c.a.P(b,a)},null,J)}}return this.b?this.b.toJSON():null};function Jg(a,b){var c=b instanceof Qd?b:Rd(b),d=b.name,e=V(a.b,d);if(0==$d(c,e).length)(new I).v(!1);else if(e=e?"update":"add",a.b instanceof Ae)Be(a.b,c),a.a?(a.a.Bb(),a.a=null,fh(a)):(new I).v(!1);else throw new Gd("Cannot "+e+" store: "+d+". Not auto schema generation mode.");}
Y.prototype.R=function(a){if(this.a)throw new Dd("Already connected with "+this.d);this.d=a;fh(this)};A("ydn.db.con.Storage.prototype.setName",Y.prototype.R);Y.prototype.getName=l("d");var eh="indexeddb websql localstorage sessionstorage userdata memory".split(" ");function gh(a,b){return"indexeddb"==b?new xe(a.xc,a.Zc):"websql"==b?new Me(a.xc):"localstorage"==b?new Bf:"sessionstorage"==b?new Df:"memory"==b?new zf:"userdata"==b?new ch:null}
function fh(a){function b(b,e){b?(G(a.e,a+": ready."),a.Uc=NaN,d.cb=function(b){fd(a,new Tg(a,b))},d.Db=function(b){fd(a,new Ug(a,b));a.a=null},hd(function(){fd(a,e);hh(a)}),c.v(e)):(E(a.e,a+": database connection fail "+e.name),hd(function(){fd(a,new Ug(a,e));if(a.h){a.e.log(Rb,"Purging "+a.h.length+" transactions request.",void 0);for(var b;b=a.h.shift();)b.K&&b.K("error",e)}}),c.t(e))}for(var c=new I,d=null,e=a.Wc,f=0;f<e.length;f++){var g=e[f].toLowerCase();if("indexeddb"==g&&ze){d=gh(a,g);break}else if("websql"==
g&&fa(r.openDatabase)){d=gh(a,g);break}else if("localstorage"==g&&window.localStorage){d=gh(a,g);break}else if("sessionstorage"==g&&window.sessionStorage){d=gh(a,g);break}else if("memory"==g){d=gh(a,g);break}else if("userdata"==g){d=gh(a,g);break}}null===d?(e=new Fd("No storage mechanism found."),b(!1,new Sg("ready",a,NaN,NaN,e))):d.Ja(a.d,a.b).ea(function(a){this.a=d;b(!0,new Sg("ready",this,parseFloat(d.Cb()),parseFloat(a),null))},function(a){E(this.e,this+": opening fail");b(!1,a)},a)}
Y.prototype.j=function(){if(this.a)return this.a.ta()};A("ydn.db.con.Storage.prototype.getType",Y.prototype.j);Y.prototype.uc=function(){this.a&&(this.a.Bb(),this.a=null,G(this.e,this+" closed"))};A("ydn.db.con.Storage.prototype.close",Y.prototype.uc);q=Y.prototype;q.pd=function(){return this.a?this.a.hc():null};q.Uc=NaN;function hh(a){var b=a.h.shift();b&&(G(a.e,"pop tx queue["+(a.h.length+1)+"]"),a.ua(b.nb,b.$c,b.mode,b.K));na()}
function ih(a,b,c,d,e){G(a.e,"push tx queue["+a.h.length+"]");a.h.push({nb:b,$c:c,mode:d,K:e});100<a.h.length&&0==a.h.length%100&&E(a.e,"Transaction queue stack size is "+a.h.length+". It is too large, possibility due to incorrect usage.")}q.tb=!1;
q.ua=function(a,b,c,d){var e=b;if(x(b))e=[b];else if(null!=b)if(w(b)){if(0==b.length)throw new M("number of store names must more than 0");for(var f=0;f<b.length;f++)if(!x(b[f]))throw new M("store name at "+f+" must be string but found "+typeof b[f]);}else throw new M("store names must be an array");else e=null;if(this.a&&this.a.bb()&&!this.tb){var g=this,h=u(c)?c:J;h==nc&&(this.tb=!0);this.a.mb(function(b){a(b);a=null},e,h,function(a,b){fa(d)&&(d(a,b),d=void 0);h==nc&&(g.tb=!1);hh(g)})}else ih(this,
a,e,c,d)};q.Rb=function(a,b,c,d){if("ready"==a)Wc(this,a,b,c,d);else{var e="created error fail ready deleted updated".split(" "),f=function(a){if(!(0<=Ia(e,a)))throw new M('Invalid event type "'+a+'"');};if(w(a))for(var g=0;g<a.length;g++)f(a[g]);else f(a);Y.u.Rb.call(this,a,b,c,d)}};q.toString=function(){return"Storage:"+this.a};function jh(a,b,c,d){this.d=a;this.e=b;this.a=Sa(c);this.b=d;this.c=[]}jh.prototype.d=null;function kh(a,b,c){if(a.d)c&&a.c.push(c),b(a.d);else throw new Ed("tx committed on ParallelTxExecutor");}jh.prototype.toString=function(){return"ParallelTxExecutor: txNo:"+this.e+" mode:"+this.b+" scopes:"+T(this.a)};function lh(a,b,c,d,e,f){this.i=a;this.e=b;this.a=this.Na=0;this.wb=this.ha=null;this.c=d;this.d=e;this.b=c||"single";this.Ib=f||0}q=lh.prototype;q.Na=0;q.Ib=0;q.ha=null;q.wb=null;q.la=H("ydn.db.tr.Parallel");q.hb=l("Na");q.type=function(){return this.i.j()};
q.Jc=function(a,b){var c;if("multi"==this.b)a:if(c=this.ha,!c.a||!c.b||b!=c.b&&(c.b!=K||b!=J)||a.length>c.a.length)c=!1;else{for(var d=0;d<a.length;d++)if(-1==c.a.indexOf(a[d])){c=!1;break a}c=!0}else if("repeat"==this.b)a:if(c=this.ha,c.a&&c.b&&b==c.b&&c.a.length==a.length){for(d=0;d<a.length;d++)if(-1==c.a.indexOf(a[d])){c=!1;break a}c=!0}else c=!1;else c="all"==this.b?!0:!1;return c};
q.pa=function(a,b,c,d){function e(c){k.Na++;n=new jh(c,k.Na,b,h);g=k.F();$b(k.la,g+" BEGIN "+T(b)+" "+h);k.ha=n;kh(k.ha,a,d)}function f(a,b){$b(k.la,g+" "+a);if(n){for(var c=n,d=0;d<c.c.length;d++)c.c[d](a,b);c.c.length=0;c.d=null;c.a=null;c.c=null}k.a=0}var g;this.c&&(b=this.c);this.d&&(c=this.d);var h=u(c)?c:J,k=this,n;if(this.ha&&this.ha.d&&this.Jc(b,h))kh(this.ha,a,d);else{if(this.Ib&&this.Na>=this.Ib)throw new Dd("Exceed maximum number of transactions of "+this.Ib);this.i.ua(e,b,h,f)}};
q.l=function(a,b,c,d){var e=new ud(a),f=this;this.pa(function(a){f.a++;vd(e,a,f.F()+"R"+f.a)},b,c||J,d);return e};q.ca=function(a,b,c,d,e){var f=this,g;this.pa(function(c){f.a++;g=f.F()+"R"+f.a;F(f.la,g+" BEGIN");b(c,g,function(b,d){f.wb=c;g=f.F()+"R"+f.a;d?(F(f.la,g+" ERROR"),a.t(b)):(F(f.la,g+" SUCCESS"),a.v(b));f.wb=null});b=null;F(f.la,g+" END")},c,d,e)};q.F=function(){return"B"+this.e+"T"+this.Na};q.toString=function(){return"Parallel:"+this.b+":"+this.F()+(this.wb?"*":"")};function mh(a,b){lh.call(this,a,b,"single")}D(mh,lh);q=mh.prototype;q.la=H("ydn.db.tr.AtomicParallel");q.Jc=ba(!1);q.l=function(a,b,c){var d,e,f,g=this,h=mh.u.l.call(this,a,b,c,function(a,b){h.a=null;F(g.la,"transaction "+a);if(d)"complete"!=a&&(f=!0,e=b),d(e,f);else{var c=new Ce;O(h,c,!0)}});yd(h,function(a,b,c){f=b;e=a;d=c});return h};
q.ca=function(a,b,c,d,e){var f,g,h=new I;h.ea(function(a){g=!1;f=a},function(a){g=!0;f=a});mh.u.ca.call(this,h,b,c,d,function(b,c){if("complete"!=b)a.t(c);else if(!0===g)a.t(f);else if(!1===g)a.v(f);else{var d=new Ce;a.t(d)}e&&(e(b,c),e=void 0)})};q.toString=function(){return"Atomic"+mh.u.toString.call(this)};function nh(a,b,c){Y.call(this,a,b,c);this.Ha=0;a=!0;b="single";c&&(u(c.isSerial)&&(a=!!c.isSerial),c.policy&&(b=c.policy));c=oh(this,b,a);this.Ea=oh(this,"atomic",!1);this.c=this.Ga(c,this.Ea)}D(nh,Y);q=nh.prototype;q.Ha=0;q.Kc=function(a,b,c,d,e){var f;"readonly"==d?f=J:"readwrite"==d&&(f=K);a=oh(this,a,b,c,f,e);return this.Ga(a,this.Ea)};q.Ga=function(a){return new Hg(this,this.b,a)};
function oh(a,b,c,d,e,f){if(c){if("multi"==b||"repeat"==b||"all"==b||"single"==b)return new Cg(a,a.Ha++,b,d,0,f);if("atomic"==b)return new Gg(a,a.Ha++);throw new M('Invalid requestType "'+b+'"');}if("multi"==b||"repeat"==b||"all"==b||"single"==b)return new lh(a,a.Ha++,b,d,e,f);if("atomic"==b)return new mh(a,a.Ha++);throw new M('Invalid requestType "'+b+'"');}
q.Yc=function(a,b,c){if(3<arguments.length)throw new M("too many input arguments, run accept not more than 3 input arguments, but "+arguments.length+" found.");this.Ha++;var d=b||pe(this.b),e=J;if(c)if("readwrite"==c)e=K;else if("readonly"!=c)throw new M('Invalid transaction mode "'+c+'"');var f=oh(this,"all",!1,d,e,1),g=this.Ga(f,this.Ea),h=new ud("run"),k=this;f.pa(function(b){G(k.e,"executing run in transaction on "+f);vd(h,b,f.F()+"R0");a(g)},d,e,function(a){h.a=null;O(h,f.hb(),"complete"!==a)});
return h};q.td=function(){return this.c?this.c.d():NaN};function $(a,b,c){nh.call(this,a,b,c);a=this.b;for(b=0;b<a.a.length;b++){c=a.a[b];var d=V(a,c.getName());if(d){if(!Wd(d,"keyword"))throw new M('full text index store "'+d.getName()+'" must have "keyword" index');if(!Wd(d,"value"))throw new M('full text index store "'+d.getName()+'" must have "keyword" index');if("id"!=d.keyPath)throw new M('full text index store "'+d.getName()+'" must use "id" as key path.');}else throw new M('full text index store "'+c.getName()+'" required.');for(d=0;d<c.count();d++){var e=
c.index(d),f=V(a,e.a);if(f)E(this.e,"Full text indexer option for "+f.getName()+" ignored.");else throw new M('full text source store "'+e.a+'" does not exist for full text index "'+c.getName()+'"');}}}D($,nh);q=$.prototype;q.Ga=function(a){return new Ig(this,this.b,a)};
q.Yb=function(){var a=this.j();if("indexeddb"==a)return new bg(this.d,this.b);if("websql"==a)return new ug(this.d,this.b);if("memory"==a||"localstorage"==a||"userdata"==a||"sessionstorage"==a)return new jg(this.d,this.b);throw new He("No executor for "+a);};q.Gb=function(a,b,c){return this.c.Gb(a,b,c)};q.count=function(a,b,c,d){return this.c.count(a,b,c,d)};q.La=function(a,b){return this.c.La(a,b)};q.keys=function(a,b,c,d,e,f){return this.c.keys(a,b,c,d,e,f)};
q.G=function(a,b,c,d,e,f){return this.c.G(a,b,c,d,e,f)};q.Ma=function(a,b,c){return this.c.Ma(a,b,c)};q.clear=function(a,b,c){return this.c.clear(a,b,c)};q.Hb=function(a,b,c){return this.c.Hb(a,b,c)};q.toString=function(){var a="Storage:"+this.getName();this.a&&this.a.bb()&&(a+=" ["+this.j()+"]");return a};function ph(a,b,c){$.call(this,a,b,c)}D(ph,$);q=ph.prototype;q.Yb=function(){var a=this.j();if("indexeddb"==a)return new dg(this.d,this.b);if("websql"==a)return new zg(this.d,this.b);if("memory"==a||"userdata"==a||"localstorage"==a||"sessionstorage"==a)return new mg(this.d,this.b);throw new He("No executor for "+a);};q.Ga=function(a){return new Qg(this,this.b,a)};q.qd=function(a,b,c){return this.c.Dc(a,b,c)};q.rd=function(a,b){return this.c.Ec(a,b)};q.map=function(a,b){return this.c.map(a,b)};
q.Eb=function(a,b,c){return this.c.Eb(a,b,c)};function qh(a){this.a=a}qh.prototype.a=[];
qh.prototype.b=function(a,b){for(var c=[],d=0;d<this.a.length;d++){var e=this.a[d],f="'"===e[0]&&"'"===e[e.length-1];if('"'===e[0]&&'"'===e[e.length-1])e=Xa(a,Ba(e,'"').split(".")),c.push(e);else if(f)c.push(Ba(e,"'"));else if(x(e))if("true"===e)c.push(!0);else if("false"===e)c.push(!1);else if("Date"===e)c.push(new Date(parseInt(c.pop(),10)));else if("now"===e)c.push(new Date);else if("!"===e)c[c.length-1]=!c[c.length-1];else if("=="===e)c.push(c.pop()==c.pop());else if("==="===e)c.push(c.pop()===
c.pop());else if("!="===e)c.push(c.pop()!=c.pop());else if("!=="===e)c.push(c.pop()!==c.pop());else if("<="===e)c.push(c.pop()<=c.pop());else if("<"===e)c.push(c.pop()<c.pop());else if(">="===e)c.push(c.pop()>=c.pop());else if(">"===e)c.push(c.pop()>c.pop());else if("&"===e)c.push(c.pop()&c.pop());else if("|"===e)c.push(c.pop()|c.pop());else if("?"===e){var e=!!c.pop(),f=c.pop(),g=c.pop(),e=e?f:g;c.push(e)}else"+"===e?c.push(c.pop()+c.pop()):"-"===e?c.push(c.pop()-c.pop()):"*"===e?c.push(c.pop()*
c.pop()):"/"===e?c.push(c.pop()/c.pop()):"%"===e?c.push(c.pop()%c.pop()):"at"===e?(f=c.pop(),e=c.pop(),c.push(e[f])):"of"===e?(f=c.pop(),e=c.pop(),e=v(e)?e.indexOf(f):-1,c.push(e)):"in"===e?(f=c.pop(),e=c.pop(),e=v(e)?0<=e.indexOf(f):!1,c.push(e)):"abs"===e?c[c.length-1]=Math.abs(c[c.length-1]):"$"==e[0]&&/^\$\d$/.test(e)?(e=parseInt(e.match(/^\$(\d)$/)[1],10),c.push(arguments[e])):c.push(parseFloat(e));else c.push(e)}return c[0]};
qh.prototype.c=function(){return function(){var a=2<arguments.length?Array.prototype.slice(arguments,2):void 0;return qh.prototype.b.apply(null,a)}};qh.prototype.toJSON=function(){return{Tokens:je(T(this.a))}};function rh(a){if(!x(a))throw new se;this.L=a;sh(this,a);this.Za=""}q=rh.prototype;q.L="";q.$a=J;q.qc=NaN;q.vc=NaN;q.fc=!1;q.Za="";
function sh(a,b){var c=b.split(/\sFROM\s/i);if(2!=c.length)throw new Le("FROM required.");var d=c[1],c=c[0].match(/\s*?(SELECT|INSERT|UPDATE|DELETE)\s+(.*)/i);if(3!=c.length)throw new Le("Unable to parse: "+b);a.c=c[1].toUpperCase();if("SELECT"==a.c)a.$a=J;else if("INSERT"==a.c)a.$a=K;else if("UPDATE"==a.c)a.$a=K;else if("DELETE"==a.c)a.$a=K;else throw new Le("Unknown SQL verb: "+a.c);var c=c[2].trim(),e=c.match(/^(MIN|MAX|COUNT|AVG|SUM)/i);e?(a.d=e[0].toUpperCase(),c=c.replace(/^(MIN|MAX|COUNT|AVG|SUM)/i,
"").trim()):a.d=void 0;"("==c.charAt(0)&&(")"==c.charAt(c.length-1)?c=c.substring(1,c.length-1):new Le("missing closing parentheses"));a.j=c;c=d.search(/(ORDER BY|LIMIT|OFFSET)/i);0<c?(a.a=d.substring(c),d=d.substring(0,c)):a.a="";c=d.search(/WHERE/i);0<c?(a.e=d.substring(c+6).trim(),d=d.substring(0,c)):a.e="";a.b=d.trim().split(",").map(function(a){a=Ba(a,'"');a=Ba(a,"'");return a.trim()})}
function th(a,b){if(b){for(var c=0;c<b.length;c++)a.L=a.L.replace("?",b[c]);sh(a,a.L)}a.g=uh(a);if(!a.g)return a.Za;var c=a.a.length,d=/OFFSET\s+(\d+)/i.exec(a.a);d&&(a.vc=parseInt(d[1],10),c=a.a.search(/OFFSET/i));if(d=/LIMIT\s+(\d+)/i.exec(a.a))a.qc=parseInt(d[1],10),d=a.a.search(/LIMIT/i),d<c&&(c=d);(c=/ORDER BY\s+(.+)/i.exec(a.a.substr(0,c)))?(c=c[1].trim(),(d=c.match(/(ASC|DESC)/i))?(a.fc="DESC"==d[0].toUpperCase(),c=c.replace(/\s+(ASC|DESC)/i,"")):a.fc=!1,a.h=Ba(Ba(c,'"'),"'")):a.h=void 0;return""}
function vh(a){if("*"==a.j)return null;a=a.j.split(",");return a=a.map(function(a){return Ba(a.trim(),'"')})}q.toJSON=function(){return{sql:this.L}};
function uh(a){function b(a){return Pa(c,function(b){return b.sa==a})}var c=[],d=/(.+?)(<=|>=|=|>|<)(.+)/i;if(0<a.e.length)for(var e=a.e.split("AND"),f=0;f<e.length;f++){var g=e[f],h=d.exec(g);if(h){var k=h[1].trim(),k=Ba(k,'"'),k=Ba(k,"'");if(0<k.length){var n=h[3].trim(),n=0==n.lastIndexOf('"',0)?Ba(n,'"'):0==n.lastIndexOf("'",0)?Ba(n,"'"):parseFloat(n),h=new Lf(k,h[2],n),k=b(k);if(0<=k){if(c[k]=c[k].Mb(h),!c[k])return a.Za='where clause "'+g+'" conflict',null}else c.push(h)}else return a.Za='Invalid clause "'+
g+'"',null}else return a.Za='Invalid clause "'+g+'"',null}return c}q.toString=function(){return"query:"+this.L};function wh(a,b){this.sql=b;this.a=a}wh.prototype.b=H("ydn.db.sql.req.nosql.Node");wh.prototype.toJSON=function(){return{sql:this.sql}};wh.prototype.toString=ba("idb.Node:");
wh.prototype.jc=function(a,b){var c=Sa(this.sql.b)[0],d=this.sql.g,e=this.sql.qc,e=isNaN(e)?100:e,f=this.sql.vc,f=isNaN(f)?0:f,g=this.sql.h,h=vh(this.sql),k=null,n=this.sql.fc;if(0==d.length)k=null;else if(1==d.length)k=nd(d[0].a);else throw new Bd("too many conditions.");null===h||yd(a,function(a,b,c){var d=a;b||(d=a.map(function(a){var b=h.length;if(1==b)return pc(a,h[0]);for(var c={},d=0;d<b;d++)c[h[d]]=pc(a,h[d]);return c}));c(d,b)});var d=0<d.length?d[0].sa:void 0,m=Q(a)+" executing on"+c;d&&
(m+=":"+d);m+=" "+qd(k);F(this.b,m);g&&g!=this.a.keyPath?b.Ua(a,c,g,k,n,e,f,!1):u(d)&&d!=this.a.keyPath?b.Ua(a,c,d,k,n,e,f,!1):b.ub(a,c,k,n,e,f)};function xh(a,b){wh.call(this,a,b)}D(xh,wh);
xh.prototype.jc=function(a,b){var c,d=Sa(this.sql.b)[0],e=this.sql.g,f=null;if(0==e.length)f=null;else if(1==e.length)f=nd(e[0].a);else throw new Bd("too many conditions.");var g=this.sql.d,e=0<e.length?e[0].sa:void 0,h=Q(a)+" executing "+g+" on "+d;e&&(h+=":"+e);h+=" "+qd(f);F(this.b,h);if("COUNT"==g)f?b.za(a,d,f,e,!1):b.za(a,d,null,void 0,!1);else{var k,h=vh(this.sql);if(!h||0==h.length)throw new we("field name require for reduce operation: "+g);h=h[0];if("MIN"==g)k=yh(h);else if("MAX"==g)k=zh(h);
else if("AVG"==g)c=0,k=Ah(h);else if("SUM"==g)c=0,k=Ch(h);else throw new wd(g);var n;n=u(e)?new Pf(d,e,f):new Of(d,f);var m=Qf(n,a.a,Q(a),b);m.e=function(b){O(a,b,!0)};var p=0;m.d=function(b){null!=b?(c=k(n.b?m.T():m.ja(),c,p),m.advance(1),p++):O(a,c)}}};function Ah(a){return function(b,c,d){u(c)||(c=0);return(c*d+b[a])/(d+1)}}function Ch(a){return function(b,c){return c+b[a]}}function yh(a){return function(b,c){var d=b[a];return u(c)?c<d?c:d:d}}
function zh(a){return function(b,c){var d=b[a];return u(c)?c>d?c:d:d}};function Dh(a,b){Rf.call(this,a,b)}D(Dh,dg);Dh.prototype.f=H("ydn.db.sql.req.IndexedDb");Dh.prototype.executeSql=function(a,b,c){if(c=th(b,c))throw new Le(c);c=Sa(b.b);if(1==c.length){var d=V(this.a,c[0]);if(!d)throw new Ie(c[0]);var e=vh(b);if(e)for(var f=0;f<e.length;f++)if(!Wd(d,e[f]))throw new Ie('Index "'+e[f]+'" not found in '+c[0]);(b.d?new xh(d,b):new wh(d,b)).jc(a,this)}else throw new wd(b.L);};function Eh(a,b){this.sql=b;this.c=a;this.a=vh(b)}Eh.prototype.b=H("ydn.db.sql.req.websql.Node");Eh.prototype.toJSON=function(){return{sql:this.sql.L}};Eh.prototype.toString=ba("websql.Node:");function Fh(a,b){if(a.a){if(1==a.a.length){if(z(b))return Xa(b,a.a[0]);return}for(var c={},d=0;d<a.a.length;d++)c[a.a[d]]=Xa(b,a.a[d]);return c}return pg(b,a.c)}
Eh.prototype.Ic=function(a,b,c){var d=this,e=[];b.executeSql(this.sql.L,c,function(b,c){for(var h=c.rows.length,k=0;k<h;k++){var n=c.rows.item(k);if(z(n))var m=Fh(d,n);e.push(m)}a(e)},function(b,c){E(d.b,"Sqlite error: "+c.message);a(c,!0);return!0})};function Gh(a,b){Eh.call(this,a,b)}D(Gh,Eh);Gh.prototype.Ic=function(a,b,c){var d=this;b.executeSql(this.sql.L,c,function(b,c){var d=c.rows.length;if(1==d)d=yg(c.rows.item(0)),a(d);else if(0==d)a(void 0);else throw new He;},function(b,c){E(d.b,"Sqlite error: "+c.message);a(c,!0);return!0})};function Hh(a,b){Rf.call(this,a,b)}D(Hh,zg);Hh.prototype.f=H("ydn.db.sql.req.WebSql");Hh.prototype.executeSql=function(a,b,c){var d=Sa(b.b);if(1==d.length){var e=V(this.a,d[0]);if(!e)throw new Ie(d[0]);var f=vh(b);if(f)for(var g=0;g<f.length;g++)if(!Wd(e,f[g]))throw new Ie('Index "'+f[g]+'" not found in '+d[0]);(b.d?new Gh(e,b):new Eh(e,b)).Ic(function(b,c){O(a,b,c)},a.a,c)}else throw new wd(b.L);};function Ih(a,b){Rf.call(this,a,b)}D(Ih,mg);Ih.prototype.f=H("ydn.db.sql.req.SimpleStore");Ih.prototype.executeSql=function(a,b,c){if(c=th(b,c))throw new Le(c);c=Sa(b.b);if(1==c.length){var d=V(this.a,c[0]);if(!d)throw new Ie(c[0]);var e=vh(b);if(e)for(var f=0;f<e.length;f++)if(!Wd(d,e[f]))throw new M('Index "'+e[f]+'" not found in '+c[0]);(b.d?new xh(d,b):new wh(d,b)).jc(a,this)}else throw new Bd(b.L);};function Jh(a,b,c){Hg.call(this,a,b,c)}D(Jh,Qg);Jh.prototype.executeSql=function(a,b){for(var c=new rh(a),d=Sa(c.b),e=0;e<d.length;e++){var f=V(this.b,d[e]);if(!f)throw new M("store: "+f+" not exists.");}F(this.k,"executeSql: "+a+" params: "+b);var g=this.a.l("sql",Sa(c.b),c.$a);P(g,function(){Z(this).executeSql(g,c,b||[])},this);return g};function Kh(a,b,c){$.call(this,a,b,c)}D(Kh,ph);Kh.prototype.Yb=function(){var a=this.j();if("indexeddb"==a)return new Dh(this.d,this.b);if("websql"==a)return new Hh(this.d,this.b);if("memory"==a||"localstorage"==a||"userdata"==a||"sessionstorage"==a)return new Ih(this.d,this.b);throw new He("No executor for "+a);};Kh.prototype.Ga=function(a){return new Jh(this,this.b,a)};Kh.prototype.executeSql=function(a,b){return this.c.executeSql(a,b)};function Lh(a,b,c){$.call(this,a,b,c)}D(Lh,Kh);function Mh(a,b){Zf.call(this,a,b)}D(Mh,Zf);Mh.prototype.b=ba(!1);Mh.prototype.c=function(a,b){function c(b){u(a[b])?(e=!1,d[b]=!0):(d[b]=!1,0<=b-1&&c(b-1))}var d=[],e=!0;c(a.length-1);e&&(d=[]);return $f(this,d,b)};function Nh(a,b){Zf.call(this,a,b);this.d=a instanceof Wf&&!!a.Ia}D(Nh,Zf);Nh.prototype.h=H("ydn.db.algo.ZigzagMerge");Nh.prototype.d=!1;Nh.prototype.b=function(a,b){var c=Nh.u.b.call(this,a,b);if(this.d){var d=a[0].W().split(", ");if(1<d.length){if(d[d.length-1]!=this.a.Ia)throw new we("Output streamer projection field must be same as postfix field in the iterator");}else E(this.h,"Unable to check correctness of output streamer.")}return c};
Nh.prototype.c=function(a,b){function c(a,b){var c=a.slice(0,a.length-1);c.push(b);return c}var d=[];if(0==a.length||null==a[0]||null==a[0])return[];for(var e=!0,f=0,g=a[f][a[f].length-1],h=[],k=1;k<a.length;k++)if(null!=a[k]){var n=a[k][a[k].length-1],m=N(g,n);h[k]=m;1===m?e=!1:-1===m&&(e=!1,g=n,f=1)}else return[];if(e){for(e=0;e<a.length;e++)null!=a[e]&&(d[e]=!0);this.a&&(this.d?this.a.push(b[0],g):this.a.push(b[0]));return d}if(0==f)for(e=1;e<a.length;e++)1===h[e]&&(d[e]=c(a[e],g));else for(e=
0;e<a.length;e++)e!=f&&null!=a[e]&&1===N(g,a[e][a[e].length-1])&&(d[e]=c(a[e],g));return{"continue":d}};function Oh(a,b){Zf.call(this,a,b)}D(Oh,Zf);Oh.prototype.b=ba(!1);Oh.prototype.c=function(a,b){var c=[],d=b[0];if(null==d)return[];for(var e=!0,f=!1,g=d,h=[],k=1;k<a.length;k++)if(null!=b[k]){var n=N(d,b[k]);h[k]=n;1===n?e=!1:-1===n&&(e=!1,f=!0,1===N(b[k],g)&&(g=b[k]))}else e=!1,f=!0;if(e)for(f=0;f<a.length;f++)null!=b[f]&&(c[f]=!0);else if(f)for(f=0;f<a.length;f++)null!=b[f]&&1===N(g,b[f])&&(c[f]=g);else for(f=1;f<a.length;f++)1===h[f]&&(c[f]=d);return e?(this.e++,this.a&&this.a.push(g),c):{continuePrimary:c}};A("ydn.db.Storage",Lh);A("ydn.db.algo.NestedLoop",Mh);A("ydn.db.algo.ZigzagMerge",Nh);A("ydn.db.algo.SortedMerge",Oh);I.prototype.done=I.prototype.da;I.prototype.fail=I.prototype.kc;I.prototype.then=I.prototype.ea;I.prototype.always=I.prototype.Lc;ed.prototype.addEventListener=ed.prototype.Rb;A("ydn.db.con.Storage",Y);Y.prototype.getType=Y.prototype.j;Y.prototype.setName=Y.prototype.R;Y.prototype.getName=Y.prototype.getName;Y.prototype.getSchema=Y.prototype.bd;Y.prototype.transaction=Y.prototype.ua;Y.prototype.close=Y.prototype.uc;A("ydn.db.version","0.7.8");A("ydn.db.deleteDatabase",function(a,b){ze&&((!b||"indexeddb"==b)&&ze&&"deleteDatabase"in ze)&&ze.deleteDatabase(a);!fa(r.openDatabase)||b&&"websql"!=b||Pe(a);b&&"localstorage"!=b||Cf(a);b&&"sessionstorage"!=b||Ef(a)});
Sg.prototype.name=Sg.prototype.name;Sg.prototype.getVersion=Sg.prototype.sd;Sg.prototype.getOldVersion=Sg.prototype.Rc;Sg.prototype.getOldSchema=Sg.prototype.Qc;Tg.prototype.getError=Tg.prototype.g;ud.prototype.abort=ud.prototype.nd;ud.prototype.canAbort=ud.prototype.Oc;ud.prototype.progress=ud.prototype.od;nh.prototype.branch=nh.prototype.Kc;nh.prototype.run=nh.prototype.Yc;nh.prototype.getTxNo=nh.prototype.td;Hg.prototype.getTxNo=Hg.prototype.d;$.prototype.branch=$.prototype.Kc;$.prototype.add=$.prototype.Gb;$.prototype.get=$.prototype.La;$.prototype.values=$.prototype.G;$.prototype.put=$.prototype.Ma;$.prototype.clear=$.prototype.clear;$.prototype.remove=$.prototype.Hb;$.prototype.count=$.prototype.count;Ig.prototype.add=Ig.prototype.Gb;Ig.prototype.get=Ig.prototype.La;Ig.prototype.values=Ig.prototype.G;Ig.prototype.put=Ig.prototype.Ma;Ig.prototype.clear=Ig.prototype.clear;Ig.prototype.remove=Ig.prototype.Hb;Ig.prototype.count=Ig.prototype.count;
A("ydn.db.cmp",N);A("ydn.db.Key",id);id.prototype.id=id.prototype.Pc;id.prototype.parent=id.prototype.ld;id.prototype.storeName=id.prototype.md;A("ydn.db.KeyRange",L);L.upperBound=L.upperBound;L.lowerBound=L.lowerBound;L.bound=L.bound;L.only=L.only;L.starts=md;Rg.prototype.store_name=Rg.prototype.c;Rg.prototype.getStoreName=Rg.prototype.e;Mg.prototype.name=Mg.prototype.name;Mg.prototype.getKey=Mg.prototype.g;Mg.prototype.getValue=Mg.prototype.h;Kg.prototype.name=Kg.prototype.name;
Kg.prototype.getKeys=Kg.prototype.oa;Kg.prototype.getValues=Kg.prototype.qb;ph.prototype.scan=ph.prototype.rd;ph.prototype.map=ph.prototype.map;ph.prototype.reduce=ph.prototype.Eb;ph.prototype.open=ph.prototype.qd;Qg.prototype.scan=Qg.prototype.Ec;Qg.prototype.map=Qg.prototype.map;Qg.prototype.reduce=Qg.prototype.Eb;Qg.prototype.open=Qg.prototype.Dc;Ff.prototype.getKey=Ff.prototype.Bc;Ff.prototype.getPrimaryKey=Ff.prototype.T;Ff.prototype.getValue=Ff.prototype.ja;Ff.prototype.update=Ff.prototype.update;Ff.prototype.clear=Ff.prototype.clear;A("ydn.math.Expression",qh);
qh.prototype.evaluate=qh.prototype.b;qh.prototype.compile=qh.prototype.c;qh.parseRpn=function(a){return new qh(a.match(/[^\s"']+|"[^"]*"|'[^']*'/g))};qh.parseInfix=function(){throw new te("Too lazy to learn Dutch in Shunting Yard station, we speak Polish here.");};A("ydn.db.Iterator",X);A("ydn.db.KeyCursors",Mf);A("ydn.db.ValueCursors",Of);A("ydn.db.Cursors",Nf);A("ydn.db.IndexValueCursors",Pf);X.prototype.count=X.prototype.count;X.prototype.getState=X.prototype.oc;X.prototype.getKeyRange=X.prototype.dd;
X.prototype.getIndexName=X.prototype.W;X.prototype.getStoreName=X.prototype.fd;X.prototype.isReversed=X.prototype.Ab;X.prototype.isUnique=X.prototype.Xa;X.prototype.isKeyIterator=X.prototype.gd;X.prototype.isIndexIterator=X.prototype.Sc;X.prototype.getPrimaryKey=X.prototype.ed;X.prototype.getKey=X.prototype.cd;X.prototype.resume=X.prototype.Xc;X.prototype.reset=X.prototype.jd;X.prototype.reverse=X.prototype.kd;Mf.where=function(a,b,c,d,e){return new Mf(a,td(b,c,d,e))};
Of.where=function(a,b,c,d,e){return new Of(a,td(b,c,d,e))};Nf.where=function(a,b,c,d,e,f){return new Nf(a,b,td(c,d,e,f))};Pf.where=function(a,b,c,d,e,f){return new Pf(a,b,td(c,d,e,f))};A("ydn.db.Streamer",Wf);Wf.prototype.push=Wf.prototype.push;Wf.prototype.collect=Wf.prototype.fa;Wf.prototype.setSink=Wf.prototype.ad;var Ph=new function(){this.a=na()};function Qh(a){this.d=a||"";this.e=Ph}Qh.prototype.a=!0;Qh.prototype.b=!1;function Rh(a){a=new Date(a.g);return Sh(a.getFullYear()-2E3)+Sh(a.getMonth()+1)+Sh(a.getDate())+" "+Sh(a.getHours())+":"+Sh(a.getMinutes())+":"+Sh(a.getSeconds())+"."+Sh(Math.floor(a.getMilliseconds()/10))}function Sh(a){return 10>a?"0"+a:String(a)}function Th(a,b){var c=(a.g-b)/1E3,d=c.toFixed(3),e=0;if(1>c)e=2;else for(;100>c;)e++,c*=10;for(;0<e--;)d=" "+d;return d}function Uh(a){Qh.call(this,a)}D(Uh,Qh);Uh.prototype.b=!0;
Uh.prototype.c=function(a){var b;switch(a.e.value){case Ob.value:b="dbg-sh";break;case Pb.value:b="dbg-sev";break;case Qb.value:b="dbg-w";break;case Rb.value:b="dbg-i";break;default:b="dbg-f"}var c=[];c.push(this.d," ");this.a&&c.push("[",Rh(a),"] ");c.push("[",Aa(Th(a,this.e.a)),"s] ");c.push("[",ta(a.c),"] ");c.push('<span class="',b,'">',sa(Aa(ta(a.d))));this.b&&a.b&&c.push("<br>",sa(Aa(a.a||"")));c.push("</span><br>");return c.join("")};function Vh(a){Qh.call(this,a)}D(Vh,Qh);
Vh.prototype.c=function(a){var b=[];b.push(this.d," ");this.a&&b.push("[",Rh(a),"] ");b.push("[",Th(a,this.e.a),"s] ");b.push("[",a.c,"] ");b.push(a.d,"\n");this.b&&a.b&&b.push(a.a,"\n");return b.join("")};function Wh(){this.e=la(this.g,this);this.a=new Vh;this.a.a=!1;this.b=this.a.b=!1;this.c="";this.d={}}Wh.prototype.g=function(a){if(!this.d[a.c]){var b=this.a.c(a),c=Xh;if(c)switch(a.e){case Ob:Yh(c,"info",b);break;case Pb:Yh(c,"error",b);break;case Qb:Yh(c,"warn",b);break;default:Yh(c,"debug",b)}else window.opera?window.opera.postError(b):this.c+=b}};var Xh=window.console;function Yh(a,b,c){if(a[b])a[b](c);else a.log(c)};var Zh,$h=!pb||pb&&9<=Db;!rb&&!pb||pb&&pb&&9<=Db||rb&&Bb("1.9.1");pb&&Bb("9");function ai(a,b){var c;c=a.className;c=x(c)&&c.match(/\S+/g)||[];for(var d=Ta(arguments,1),e=c.length+d.length,f=c,g=0;g<d.length;g++)0<=Ia(f,d[g])||f.push(d[g]);a.className=c.join(" ");return c.length==e};function bi(a,b){Wa(b,function(b,d){"style"==d?a.style.cssText=b:"class"==d?a.className=b:"for"==d?a.htmlFor=b:d in ci?a.setAttribute(ci[d],b):0==d.lastIndexOf("aria-",0)||0==d.lastIndexOf("data-",0)?a.setAttribute(d,b):a[d]=b})}var ci={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};
function di(a,b,c){function d(c){c&&b.appendChild(x(c)?a.createTextNode(c):c)}for(var e=2;e<c.length;e++){var f=c[e];!w(f)||z(f)&&0<f.nodeType?d(f):Ja(ei(f)?Sa(f):f,d)}}function ei(a){if(a&&"number"==typeof a.length){if(z(a))return"function"==typeof a.item||"string"==typeof a.item;if(fa(a))return"function"==typeof a.item}return!1}function fi(a){this.a=a||r.document||document}
function gi(a,b){var c;c=a.a;var d=b&&"*"!=b?b.toUpperCase():"";c.querySelectorAll&&c.querySelector&&d?c=c.querySelectorAll(d+""):c=c.getElementsByTagName(d||"*");return c}
fi.prototype.b=function(a,b,c){var d=this.a,e=arguments,f=e[0],g=e[1];if(!$h&&g&&(g.name||g.type)){f=["<",f];g.name&&f.push(' name="',ta(g.name),'"');if(g.type){f.push(' type="',ta(g.type),'"');var h={};Za(h,g);delete h.type;g=h}f.push(">");f=f.join("")}f=d.createElement(f);g&&(x(g)?f.className=g:v(g)?ai.apply(null,[f].concat(g)):bi(f,g));2<e.length&&di(d,f,e);return f};
fi.prototype.contains=function(a,b){if(a.contains&&1==b.nodeType)return a==b||a.contains(b);if("undefined"!=typeof a.compareDocumentPosition)return a==b||Boolean(a.compareDocumentPosition(b)&16);for(;b&&a!=b;)b=b.parentNode;return b==a};function hi(a){this.e=la(this.g,this);this.b=new Uh;this.c=this.b.a=!1;this.a=a;this.d=this.a.ownerDocument||this.a.document;var b=(a=this.a)?new fi(9==a.nodeType?a:a.ownerDocument||a.document):Zh||(Zh=new fi),c=null;pb?(a=c=b.a.createStyleSheet(),pb?a.cssText=".dbg-sev{color:#F00}.dbg-w{color:#C40}.dbg-sh{font-weight:bold;color:#000}.dbg-i{color:#444}.dbg-f{color:#999}.dbg-ev{color:#0A0}.dbg-m{color:#990}.logmsg{border-bottom:1px solid #CCC;padding:2px}.logsep{background-color: #8C8;}.logdiv{border:1px solid #CCC;background-color:#FCFCFC;font:medium monospace}":
a.innerHTML=".dbg-sev{color:#F00}.dbg-w{color:#C40}.dbg-sh{font-weight:bold;color:#000}.dbg-i{color:#444}.dbg-f{color:#999}.dbg-ev{color:#0A0}.dbg-m{color:#990}.logmsg{border-bottom:1px solid #CCC;padding:2px}.logsep{background-color: #8C8;}.logdiv{border:1px solid #CCC;background-color:#FCFCFC;font:medium monospace}"):(a=gi(b,"head")[0],a||(c=gi(b,"body")[0],a=b.b("head"),c.parentNode.insertBefore(a,c)),b=c=b.b("style"),pb?b.cssText=".dbg-sev{color:#F00}.dbg-w{color:#C40}.dbg-sh{font-weight:bold;color:#000}.dbg-i{color:#444}.dbg-f{color:#999}.dbg-ev{color:#0A0}.dbg-m{color:#990}.logmsg{border-bottom:1px solid #CCC;padding:2px}.logsep{background-color: #8C8;}.logdiv{border:1px solid #CCC;background-color:#FCFCFC;font:medium monospace}":
b.innerHTML=".dbg-sev{color:#F00}.dbg-w{color:#C40}.dbg-sh{font-weight:bold;color:#000}.dbg-i{color:#444}.dbg-f{color:#999}.dbg-ev{color:#0A0}.dbg-m{color:#990}.logmsg{border-bottom:1px solid #CCC;padding:2px}.logsep{background-color: #8C8;}.logdiv{border:1px solid #CCC;background-color:#FCFCFC;font:medium monospace}",a.appendChild(c));this.a.className+=" logdiv"}
hi.prototype.g=function(a){var b=100>=this.a.scrollHeight-this.a.scrollTop-this.a.clientHeight,c=this.d.createElement("div");c.className="logmsg";c.innerHTML=this.b.c(a);this.a.appendChild(c);b&&(this.a.scrollTop=this.a.scrollHeight)};hi.prototype.clear=function(){this.a.innerHTML=""};var ii=null,ji=null;H("ydn.debug");A("ydn.debug.log",function(a,b,c){if(y(b))b=new Nb("log",b);else if(x(b)){b=b.toUpperCase();if(!Xb){Xb={};for(var d=0,e;e=Wb[d];d++)Xb[e.value]=e,Xb[e.name]=e}b=Xb[b]||null}else b=Tb;H(a||"ydn").b=b;u(c)?ji||(a=ji=new hi(c),!0!=a.c&&(c=dc(),b=a.e,c.a||(c.a=[]),c.a.push(b),a.c=!0),dc().b=Qb):ii||ji||(a=ii=new Wh,!0!=a.b&&(c=dc(),b=a.e,c.a||(c.a=[]),c.a.push(b),a.b=!0),dc().b=Qb)});Y.prototype.db=Y.prototype.pd;})();

            //# sourceMappingURL=ydn.db-dev.js.map
        