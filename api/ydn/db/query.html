
<!DOCTYPE html>
<html lang="en" class="no-js no-touch">
  <head>

<link type="text/css" rel="stylesheet" href="//fonts.googleapis.com/css?family=Source+Code+Pro">

    
<meta charset="utf-8" />


<title>
  
    Class ydn.db.Query
  
</title>







<meta name="description" content="Getting started with YDN-DB javascript module" />


<link rel="icon" href="/favicon.ico" />

<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta id="viewport" name="viewport" content="width=device-width, initial-scale=1" />

<meta name="twitter:card" content="summary">
<meta property="twitter:account_id" content="@yathit" />
<meta property="twitter:site" content="@yathit" />
<meta property="twitter:description" content="Getting started with YDN-DB javascript module" />
<meta property="twitter:creator" content="@yathit" />
<meta property="twitter:image:src" content="/ydn-db/imgs/logo.png" />



<link rel="publisher" href="https://plus.google.com/+KyawTun-Yathit">

<meta itemprop="name" content="
  
    Class ydn.db.Query
  
">
<link itemprop="image" href="/imgs/logo.png">
<meta itemprop="description" content="Getting started with YDN-DB javascript module">

<meta property="og:site_name" content="Yathit" />
<meta property="og:title" content="
  
    Class ydn.db.Query
  
" />
<meta property="og:type" content="website" />
<meta property="og:url" content="/ydn-db/" />
<meta property="og:image" content="/ydn-db/imgs/logo.png" />

<link rel="chrome-webstore-item" href="https://chrome.google.com/webstore/detail/iccdnijlhdogaccaiafdpjmbakdcdakk">
<link rel="chrome-webstore-item" href="https://chrome.google.com/webstore/detail/ldikiokclnbceabnlbkabmcacpiednop">

<link rel="stylesheet" media="screen" href="/css/styles.min.css" />

<script src="/js/analytics.js"></script>

  </head>

  <body class="page--article article--ydn.db theme--ydn.db" itemscope itemtype="http://schema.org/TechArticle">
    
      
    

    <header class="main-header">

  <div class="yathit-header">
  
    <div class="yathit-header__top">
      <div class="container">
        <span id="beta" class="beta">
  <i class="icon icon-cog"></i>
  <a name="view-source" href="https://github.com/yathit" target="_blank">View Source</a>&nbsp;&nbsp;|&nbsp;&nbsp;<a name="feedback-link" href="https://github.com/yathit/issues/new?title=Feedback%20for:%20/api/ydn/db/query.html" target="_blank">Submit Feedback</a>
</span>


        <a class="yathit-header__dev-logo" href="//dev.yathit.com/">
          <img src="/imgs/yathit-dev-network.svg" alt="Yathit Developers Homepage">
        </a>
      </div>
    </div>
  </div>

	























<nav class="main-nav">

  <header class="main-nav__header">
    <span class="main-nav__current-label">Class ydn.db.Query</span>
  </header>

  <ul class="main-nav__list clear">
  
    
    
    <li class="main-nav__item main-nav__item--<strong>ydn-db</strong>
                main-nav__item--home 
               
               
               ">
      <a class="main-nav__link main-nav__link--parent" href="/ydn-db/index.html" title="Go to <strong>YDN-DB</strong>">

        <strong>YDN-DB</strong>

        
        <i class="main-nav__icon icon icon-chevron-right"></i>
        
      </a>

      

    </li>
    
  
    
    
    <li class="main-nav__item main-nav__item--download
               
               
                 
               
               
               ">
      <a class="main-nav__link main-nav__link--parent" href="/ydn-db/downloads.html" title="Go to Download">

        Download

        
        <i class="main-nav__icon icon icon-chevron-right"></i>
        
      </a>

      

    </li>
    
  
    
    
    <li class="main-nav__item main-nav__item--documentation
               
               
                 
               
               
               ">
      <a class="main-nav__link main-nav__link--parent" href="/ydn-db/doc/index.html" title="Go to Documentation">

        Documentation

        
        <i class="main-nav__icon icon icon-chevron-right"></i>
        
      </a>

      

    </li>
    
  
    
    
    <li class="main-nav__item main-nav__item--api
               
               
                 
               
               
               ">
      <a class="main-nav__link main-nav__link--parent" href="/ydn-db/api/ydn/db/storage.html" title="Go to API">

        API

        
        <i class="main-nav__icon icon icon-chevron-right"></i>
        
      </a>

      

    </li>
    
  
    
    
    <li class="main-nav__item main-nav__item--examples
               
               
                 
               
               
               ">
      <a class="main-nav__link main-nav__link--parent" href="//dev.yathit.com/ydn-db/doc/example/index.html" title="Go to Examples">

        Examples

        
        <i class="main-nav__icon icon icon-chevron-right"></i>
        
      </a>

      

    </li>
    
  
    
    
    <li class="main-nav__item main-nav__item--github
               
               
                 
               
               
               ">
      <a class="main-nav__link main-nav__link--parent" href="https://github.com/yathit/ydn-db" title="Go to GitHub">

        GitHub

        
        <i class="main-nav__icon icon icon-chevron-right"></i>
        
      </a>

      

    </li>
    
  

  <li class="main-nav__item right">
    <a class="main-nav__link main-nav__link--parent" id="user-login">...</a>
  </li>
  <li class="main-nav__item right">
    <span class="main-nav__link main-nav__link--parent" id="user-name" style="display: none;"></span>
  </li>

  </ul>
  <button class="main-nav__btn btn--toggle-nav">
    <i class="icon icon-menu"></i>
  </button>

</nav>


</header>


    <div class="article-container" itemprop="text">

      <div class="container">
        <div class="content">
          <div class="api-sidebar">
              <div class="api-toc" data-namespace=ydn.db>
<ul name="ydn"><span>ydn</span>
  <li><a href="/api/ydn/debug.html">debug</a></li>
  <li><ul name="ydn.api"><span>ydn.api</span>
  <li><a href="//crm.yathit.com/api/ydn/api/app.html">App</a></li>
  <li><a href="//crm.yathit.com/api/ydn/api/user.html">User</a></li>
  <li><a href="//crm.yathit.com/api/ydn/api/user-assess.html">UserAssess</a></li>
</ul></li>  <li><ul name="ydn.crm"><span>ydn.crm</span>
  <li><ul name="ydn.crm.inj"><span>ydn.crm.inj</span>
  <li><a href="//crm.yathit.com/api/ydn/crm/inj/app.html">App</a></li>
  <li><a href="//crm.yathit.com/api/ydn/crm/inj/context.html">Context</a></li>
</ul></li>  <li><ul name="ydn.crm.sugarcrm"><span>ydn.crm.sugarcrm</span>
  <li><a href="//crm.yathit.com/api/ydn/crm/sugarcrm/record.html">Record</a></li>
  <li><a href="//crm.yathit.com/api/ydn/crm/sugarcrm/schema.html">Schema</a></li>
  <li><ul name="ydn.crm.sugarcrm.model"><span>ydn.crm.sugarcrm.model</span>
  <li><a href="//crm.yathit.com/api/ydn/crm/sugarcrm/model/field.html">Field</a></li>
  <li><a href="//crm.yathit.com/api/ydn/crm/sugarcrm/model/group.html">Group</a></li>
  <li><a href="//crm.yathit.com/api/ydn/crm/sugarcrm/model/record.html">Record</a></li>
  <li><a href="//crm.yathit.com/api/ydn/crm/sugarcrm/model/sugarcrm.html">SugarCRM</a></li>
</ul></li>  <li><ul name="ydn.crm.sugarcrm.ui"><span>ydn.crm.sugarcrm.ui</span>
  <li><a href="//crm.yathit.com/api/ydn/crm/sugarcrm/ui/events.html">events</a></li>
  <li><a href="//crm.yathit.com/api/ydn/crm/sugarcrm/ui/simple-sugar-panel.html">SimpleSugarPanel</a></li>
  <li><ul name="ydn.crm.sugarcrm.ui.record"><span>ydn.crm.sugarcrm.ui.record</span>
  <li><a href="/api/ydn/crm/sugarcrm/ui/record/record.html">Record</a></li>
</ul></li></ul></li></ul></li></ul></li>  <li><ul name="ydn.db"><span><a href="/ydn-db/api/ydn/db/index.html">db</a></span>
  <li><a href="/ydn-db/api/ydn/db/icursor.html">ICursor</a></li>
  <li><a href="/ydn-db/api/ydn/db/iterator.html">Iterator</a></li>
  <li><a href="/ydn-db/api/ydn/db/key.html">Key</a></li>
  <li><a href="/ydn-db/api/ydn/db/keyrange.html">KeyRange</a></li>
  <li><a href="/ydn-db/api/ydn/db/iterator.html">Iterator</a></li>
  <li><a href="/ydn-db/api/ydn/db/query.html">Query</a></li>
  <li><a href="/ydn-db/api/ydn/db/request.html">Request</a></li>
  <li><a href="/ydn-db/api/ydn/db/schema.html">schema</a></li>
  <li><a href="/ydn-db/api/ydn/db/storage.html">Storage</a></li>
  <li><a href="/ydn-db/api/ydn/db/solver.html">Solver</a></li>
  <li><a href="/ydn-db/api/ydn/db/streamer.html">Streamer</a></li>
</ul></li>  <li><ul name="ydn.gdata"><span>ydn.gdata</span>
  <li><a href="//crm.yathit.com/api/ydn/gdata/entry.html">Entry</a></li>
  <li><a href="//crm.yathit.com/api/ydn/gdata/feed.html">Feed</a></li>
  <li><ul name="ydn.gdata.m8"><span>ydn.gdata.m8</span>
  <li><a href="//crm.yathit.com/api/ydn/gdata/m8/contact-entry.html">ContactEntry</a></li>
  <li><a href="//crm.yathit.com/api/ydn/gdata/m8/group-entry.html">GroupEntry</a></li>
</ul></li></ul></li>  <li><ul name="ydn.http"><span>ydn.http</span>
  <li><a href="//crm.yathit.com/api/ydn/http/itransport.html">ITransport</a></li>
  <li><a href="//crm.yathit.com/api/ydn/http/callback-result.html">CallbackResult</a></li>
</ul></li></ul>
</div>
          </div>
          <div class="api-content jsdoc">
              <h2 class="classTitle">Class ydn.db.Query</h2>
  <p>The class <code>Query</code>&nbsp; represents a query for retrieving
    entities from a storage instance. <span class="version">query</span></p>
  <p>Query is not directly instantiated, but instead obtained from <code>from</code>
    method of a storage instance. </p>
      <pre>var q = db.from('store name');
q.list(function(x) {
  console.log(x)
});
</pre>
  <div class="sectionTitle">Methods </div>
  <details> <summary> <a name="count"></a>
    <div class="fixedFont"> <b>count</b>() </div>
    <div class="description"> Count number of records.</div>
  </summary>
        <pre>db.from('author').where('company', '=', 'Google').count().done(function(cnt) {
  console.log('Number of authors from Google:' + cnt);
});</pre>
    <dl class="detailList">
    </dl>
    <dl class="detailList">
      <dt class="heading">Returns:</dt>
      <dd><span class="light fixedFont">{!<a href="request.html">ydn.db.Request</a>}</span>
        Returns a request object.
        <div><span class="deferred-result">done</span>: <span class="light fixedFont">{number}</span>
          Return number of records.</div>
        <div><span class="deferred-result">fail</span>: <span class="light fixedFont">{Error}</span>
          Resulting error object on executing the query.<span style="font-style: italic;"></span></div>
      </dd>
    </dl>
  </details>
  <hr> <details> <summary> <a name="list"></a>
  <div class="fixedFont"> <b>list</b>(limit) </div>
  <div class="description"> Execute query into array.</div>
</summary>
  <p>List method is the primary way of executing an query.</p>
        <pre>db.from('author').where('hobby', '=', 'camping').list(10).done(function(authors) {
  console.log(authors); // 10 campers
});</pre>
  <p>Although a query is immutable, query has state with cursor position.
    A cursor position is defined by effective key and primary key. When an
    query is execute again, it resume from its cursor position. The
    following query will list next 10 author having 'camping' hobby.</p>
        <pre>db.from('author').where('hobby', '=', 'camping').list(10).done(function(authors) {
  console.log(authors); // next 10 campers
});</pre>
  <dl class="detailList">
    <dt class="heading">Parameters:</dt>
    <dt><span class="light fixedFont">{number=}</span> <b>limit</b></dt>
    <dd><span class="light fixedFont optional">Optional.</span> Limit
      number of results, default to 100.</dd>
  </dl>
  <dl class="detailList">
    <dt class="heading">Returns:</dt>
    <dd><span class="light fixedFont">{!ydn.db.Request}</span> Returns a
      request object.
      <div><span class="deferred-result">done</span>: <span class="light fixedFont">{!Array}</span>
        Return list of records.</div>
      <div><span class="deferred-result">fail</span>: <span class="light fixedFont">{!Array.&lt;Error&gt;}</span>
        Resulting error object on executing the query.<span style="font-style: italic;"></span></div>
    </dd>
  </dl>
</details>
  <hr> <details> <summary> <a name="open"></a>
  <div class="fixedFont"> <b>open</b>(callback, scope) </div>
  <div class="description"> Open iterator to perform iteration process.</div>
</summary>
  <dl class="detailList">
    <dt class="heading">Parameters:</dt>
    <dt><span class="light fixedFont">{!function(!<a href="icursor.html">ydn.db.ICursor</a>):
              (Object|boolean|IDBKey|undefined)}</span> <b>next_callback</b></dt>
    <dd>Callback function to receive stream of cursors. Optionally return
      next cursor advancement. </dd>
    <dt><span class="light fixedFont">{*=}</span> <b>scope</b></dt>
    <dd><span class="light fixedFont">Optional.</span> An optional scope
      to call the callback in.</dd>
  </dl>
  <dl class="detailList">
    <dt class="heading">Returns:</dt>
    <dd><span class="light fixedFont">{!<a href="request.html">ydn.db.Request</a>}</span>
      Returns a request object.
      <div><span class="deferred-result">done</span>: <span class="light fixedFont">{}</span>
        Result not defined.</div>
      <div><span class="deferred-result">fail</span>: <span class="light fixedFont">{Error}</span>
        Resulting error object on executing the query.<span style="font-style: italic;"></span></div>
    </dd>
  </dl>
</details>
  <hr> <details> <summary> <a name="order"></a>
  <div class="fixedFont"> <b>order</b>(field_name) </div>
  <div class="description"> Build a query using given sort order.</div>
</summary>
        <pre>db.from('author').order('born').list(10).done(function(user) {
  console.log(user); // 10 youngest authors
});</pre>
  <dl class="detailList">
    <dt class="heading">Parameters:</dt>
    <dt><span class="light fixedFont">{string|!Array.&lt;string&gt;}</span>
      <b>field_name</b></dt>
    <dd>Field name to be ordered in query result. By default ordering is
      in ascending direction.</dd>
  </dl>
  <dl class="detailList">
    <dt class="heading">Returns:</dt>
    <dd><span class="light fixedFont">{!ydn.db.Query}</span> Returns a
      newly created query object.<span style="font-style: italic;"></span>
    </dd>
  </dl>
</details>
  <hr> <details> <summary> <a name="patch"></a>
  <div class="fixedFont"> <b>patch</b>(arg1, arg2) </div>
  <div class="description">Update field(s) of record value.</div>
</summary>
  <pre>db.from('author', '=', 1).patch({company: 'Facebook'});</pre>
  <p>Or using two arguments</p>
  <pre>db.from('author').where('company', '=', 'Google').patch('company', 'Facebook');</pre>
  <dl class="detailList">
    <dt class="heading">Parameters:</dt>
    <dt><span class="light fixedFont">{!Object|string|!Array.&lt;string&gt;}</span>
      <b>arg1</b></dt>
    <dd>If only one argument is given, it is an object. If optional second
      argument is given, this is field name or array of field names.</dd>
    <dt><span class="light fixedFont">{boolean=}</span> <b>arg2</b></dt>
    <dd><span class="light fixedFont optional">Optional.</span>
      Corresponding field value(s).</dd>
  </dl>
  <dl class="detailList">
    <dt class="heading">Returns:</dt>
    <dd><span class="light fixedFont">{!<a href="request.html">ydn.db.Request</a>}</span>
      Returns a request object.
      <div><span class="deferred-result">done</span>: <span class="light fixedFont">{number}</span>
        Result not defined.</div>
      <div><span class="deferred-result">fail</span>: <span class="light fixedFont">{Error}</span>
        Resulting error object on executing the query.<span style="font-style: italic;"></span></div>
    </dd>
  </dl>
</details>
  <hr> <details> <summary> <a name="reverse"></a>
  <div class="fixedFont"> <b>reverse</b>() </div>
  <div class="description"> Build a query in reverse ordering of result
    set.</div>
</summary>
  <dl class="detailList">
    <dt class="heading">Returns:</dt>
    <dd><span class="light fixedFont">{!ydn.db.Query}</span> Returns a
      newly created query object.<span style="font-style: italic;"></span>
    </dd>
  </dl>
</details>
  <hr> <details> <summary> <a name="unique"></a>
  <div class="fixedFont"> <b>unique</b>() </div>
  <div class="description"> Build an query with distinct primary key record.</div>
</summary>
  <dl class="detailList">
    <dt class="heading">Returns:</dt>
    <dd><span class="light fixedFont">{!ydn.db.Query}</span> Returns a
      newly created query object.<span style="font-style: italic;"></span>
    </dd>
  </dl>
</details>
  <hr> <details> <summary> <a name="where"></a>
  <div class="fixedFont"> <b>where</b>(field_name, op, value, op2,
    value2) </div>
  <div class="description"> Build a query with where clause.</div>
</summary>
        <pre>db.from('author').where('first', '^', 'B').list(10).done(function(authors) {
  console.log(authors); // list 10 authors having first name started with 'B'
});</pre>
  <dl class="detailList">
    <dt class="heading">Parameters:</dt>
    <dt><span class="light fixedFont">{string}</span> <b>field_name</b></dt>
    <dd>Field name.</dd>
    <dt><span class="light fixedFont">{string}</span> <b>op</b></dt>
    <dd>Operator symbol. One of <code>'&lt;'</code>, <code>'&lt;='</code>,
      <code>'='</code>, <code>'&gt;'</code>, <code>'&gt;='</code>, <code>'^</code><code>'</code>.
      The last operator is for string value having starts with. </dd>
    <dt><span class="light fixedFont">{IDBKey}</span> <b>value</b></dt>
    <dd>Left value for the operator. </dd>
    <dt><span class="light fixedFont">{string=}</span> <b>op2</b></dt>
    <dd><span class="light fixedFont optional">Optional. </span>Operator
      symbol. </dd>
    <dt><span class="light fixedFont">{IDBKey=}</span> <b>value2</b></dt>
    <dd><span class="light fixedFont optional">Optional. </span>Left
      value for the operator. </dd>
  </dl>
  <dl class="detailList">
    <dt class="heading">Returns:</dt>
    <dd><span class="light fixedFont">{!ydn.db.Query}</span> Returns a
      newly created query object.<span style="font-style: italic;"></span>
    </dd>
  </dl>
</details>

<br /><div class="g-comments" data-href="/ydn-db/api-reference/ydn-db/storage.html" data-first_party_property="BLOGGER" data-view_type="FILTERED_POSTMOD"></div>

          </div>
        </div>
      </div>
    </div> <!-- /.article-container -->
    <div class="container clear">
	<div id="gc-content-license" class="gc-content-license g-wide--3 g-wide--last" >
		
		<div class="container clear">
	<div class="g-wide--3 g-wide--last">
    
	</div>
</div>

	</div>
</div>

    <footer class="main-footer">
  <div class="main-footer__container container clear">
    <div class="main-footer__list-group">
      <ul class="main-footer__list main-footer__list--primary">
      

        

        
        <li class="sitemap__item sitemap__item--<strong>ydn-db</strong>  sitemap__item--home  ">
          <a class="sitemap-list__link sitemap-list__link--parent" href="/ydn-db/index.html" title="Go to <strong>YDN-DB</strong>">
            <strong>YDN-DB</strong>
          </a>
        </li>
        
      

        

        
        <li class="sitemap__item sitemap__item--download  ">
          <a class="sitemap-list__link sitemap-list__link--parent" href="/ydn-db/downloads.html" title="Go to Download">
            Download
          </a>
        </li>
        
      

        

        
        <li class="sitemap__item sitemap__item--documentation  ">
          <a class="sitemap-list__link sitemap-list__link--parent" href="/ydn-db/doc/index.html" title="Go to Documentation">
            Documentation
          </a>
        </li>
        
      

        

        
        <li class="sitemap__item sitemap__item--api  ">
          <a class="sitemap-list__link sitemap-list__link--parent" href="/ydn-db/api/ydn/db/storage.html" title="Go to API">
            API
          </a>
        </li>
        
      

        

        
        <li class="sitemap__item sitemap__item--examples  ">
          <a class="sitemap-list__link sitemap-list__link--parent" href="//dev.yathit.com/ydn-db/doc/example/index.html" title="Go to Examples">
            Examples
          </a>
        </li>
        
      

        

        
        <li class="sitemap__item sitemap__item--github  ">
          <a class="sitemap-list__link sitemap-list__link--parent" href="https://github.com/yathit/ydn-db" title="Go to GitHub">
            GitHub
          </a>
        </li>
        
      
      </ul>

      <div class="main-footer__google-section">
        <h3 class="main-footer__title"><a href="/ydn-db/">
          <img id="developers-logo-footer" src="/imgs/yathit-dev-network.svg" alt="Yathit Developer Network logo">
        </a></h3>
        <ul class="main-footer__list main-footer__list--secondary google-list">
          <li><a href="https://www.yathit.com/">Yathit</a></li>
          <li><a href="https://www.yathit.com/terms.html">Terms of Service</a></li>
          <li><a href="https://www.yathit.com/privacy.html">Privacy Policy</a></li>
        </ul>
      </div>
    </div>
  </div>
</footer>



    
<script src="/js/script.js"></script>
<script src="/jsc/website-app.js"></script>
<script src="https://apis.google.com/js/client.js?onload=handleClientLoad"></script>





  </body>
</html>

